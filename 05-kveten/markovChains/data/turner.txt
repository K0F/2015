s.boot;

(
Ndef(\a, {
	var osc1,osc2,osc3,osc4;

	osc1 = VarSaw.kr([0.5]);
	osc2 = SinOsc.kr([100]);
	osc3 = LFSaw.kr([1]);
	osc4 = SinOsc.kr([0.1]);

	SinOsc.ar( osc3.range(220,300),0, osc4.range(0.3,1) )
}).play;
)
Ndef(\a).stop(2);

(
Ndef(\c, {

	var osc1,osc2,osc3,osc4;

	osc1 = VarSaw.kr([0.5]);
	osc2 = SinOsc.kr([100]);
	osc3 = LFSaw.kr([1]);
	osc4 = SinOsc.kr([0.1]);

	SinOsc.ar( osc3.range(80,300),0, osc4.range(0,0.7))+SinOsc.ar(150,0,0.3);
}).play;
)
Ndef(\c).stop(2);

//do ndefu
Ndef(\scitani,{Ndef(\a).ar*Ndef(\c).ar}).play;

(
Ndef(\b, {
	SinOsc.ar( SinOsc.kr([4,4]).range(22,160), 0, SinOsc.kr([2,1]).range(0,1) )
});
)





Ndef(\b).play;

(

Ndef(\b).stop(2);
)
(

var f1 = 44;
var f2 = 777;

var arr = 0.5 * [0.25,3,12,0.25,0.25,6,0.5,0.25];

Ndef(\bass1,{Splay.ar(SinOsc.ar({ExpRand().exprange(f1,f1*2)}!8) * Pulse.ar(arr).clip(),1,0.55)}).play;
Ndef(\bass2,{Splay.ar(SinOsc.ar({ExpRand().exprange(f1,f1*2)}!8) * Pulse.ar(arr).clip(),1,0.55)}).play;
Ndef(\bass3,{Splay.ar(SinOsc.ar({ExpRand().exprange(f2,f2*2)}!8) * Pulse.ar(arr).clip(),1,0.55)}).play;
Ndef(\bass4,{Splay.ar(SinOsc.ar({ExpRand().exprange(f2,f2*2)}!8) * Pulse.ar(arr).clip(),1,0.55)}).play;
)

NdefMixer(s);

s.scope;
s.boot;


(
    Ndef(\hertz).fadeTime = 8.0;
    Ndef(\hertz).quant = 2.0;
    Ndef(\hertz,{
        Splay.ar(
            CombN.ar(
                Resonz.ar(
                    LFSaw.ar(50+(1.001**(1..32)),mul:0.5).distort.distort.tanh *
                    LFSaw.ar(1/5/(2**(1..8))).squared
                    ,SinOsc.ar(1/5/(1.1**(1..12))).range(44,880))
                ,1/4/[25,50,75,100]+TRand.ar(0.0001,0.04,Impulse.ar(5/4/[1,2,4,8])).lag(1/50),
                16/[25,50,75,100]+TRand.ar(0.0001,0.5,Impulse.ar(5/[1,2,4,8])).lag(1/5),32)

        )}).play;
);

p=ProxySpace.push(s);
(
~a={ var sig = LFSaw.ar(44*(_*1.5!8)+SinOsc.ar(1/(1..8)).range(-4,4));
	sig = BMoog.ar(sig,LFSaw.ar(8/(1..8)).range(800,5));
	sig = sig + LFSaw.ar(44.1*[1,2,4,1.5,1.25,1.125,4,8]);
	sig = sig + SinOsc.ar([4410,8820,17660]+LFSaw.ar(1/(1..10)).range(1000,-100),mul:0.1);
	sig = BPF.ar(sig,LFSaw.ar(1/8/(1..8)).exprange(44.001,18000),0.2)/2;
	sig = CombN.ar(sig,0.4,(0.1)*(_*1.68133!8),2);
	sig = FreeVerb.ar(sig,0.33,1.5);
	sig = CompanderD.ar(sig,0.5,1/1.25,1);
	sig= Pan2.ar(Mix.ar(sig),LFCub.ar(4).range(-0.5,0.5));
};
~a.fadeTime=2;
~a.play;
)

//this is insane
//(ja) where to found BMoog -> Error: Class not defined

//SC3-plugins ^^, k
(
~sel={Duty.kr(4,0,Dseq([1.5,1.25,1.125,2],inf)).lag(1/16)};
~sel.quant =2;

~sel2={Duty.kr(4,0,Dseq([1.5,1.25,1.125/2,2],inf))};
~sel2.quant =2;
)

(
~a.play;
~a.quant=2;
~a={
	var in,m,hat,kick,pat1,pat2;

	pat1=[2,1]*2;
	pat2=[4,8]/2;

	kick = SinOsc.ar(55*(4*Decay.ar(Impulse.ar(pat1),0.1225)+1),mul:0.7)* Decay.ar(Impulse.ar(pat1),1.5);
	hat = RHPF.ar(WhiteNoise.ar(0.2!2),2200*[1,2,4,8]) * Decay.ar(Impulse.ar(pat2),0.45);
	m = VarSaw.ar(43.2*[1,2,4,8]*~sel2.kr,mul:0.2);
	in = Ringz.ar(Impulse.ar(4), 43.2*(_*~sel.kr!12) ,2.5,mul:1/(1..12)) + m + hat + kick / 2.0;
	in = CompanderD.ar(in,0.75,1/1.15,1/10).softclip;
	in = BBandPass.ar(in,LFTri.ar(1/32*fib(8)).range(44,12000),1,1,in/2);
	Splay.ar(in,0.1);
}
)



(
~abc={
	var sel = SelectX.kr(TRand.kr(0,8,Impulse.kr(1/4!4)).lag(1),[1,2,4,8,3,1,2,8]);
	var sig = LFSaw.ar(SinOsc.ar(1/440/(1..8)).range(55,66));
	sig = PitchShift.ar(sig,0.2,SinOsc.ar(1/8/(1..8)).range(0.9,1.1));
	sig = Resonz.ar(sig,60,SinOsc.ar(0.1*(1..8)).range(0.1,1.1));
	sig = CombN.ar(sig,0.2,0.2,4) + (SinOsc.ar(1400*sel,mul:0.005) * LFPulse.ar([4,5,6,7]));
	sig = Mix(sig)!2 * 0.75;
	sig = CompanderD.ar(sig,1/2,1/2,1/2);
	sig = Pan2.ar(sig,SinOsc.ar(sel));
	sig = GVerb.ar(sig,10,3)/2 + sig/2;

	Splay.ar(sig.flat,0.1,0.13);
};
~abc.play;
)

(

    var tempo = 4;

    Ndef(\addi).quant = 2.0;
    Ndef(\addi,
         {|note = 22,fre = 1,mod = 1|
          var f = {(note.midicps)*fre};
          Splay.ar(

              FreeVerb.ar(
                  CompanderD.ar(
                          LPF.ar(
                      SinOsc.ar(
                          (f)*(1..32) + (1.001**(1..32)) * mod.lag(0.15),
                          SinOsc.ar(f/(1.0001**(1..32))*mod.lag(0.025) ).range(0,2pi),
                              mul:1/(1..32))
                              ,SinOsc.ar(1/tempo/(1.1**(1..32))).range(110,4000)) *
                       Decay.ar(Impulse.ar(tempo),TRand.ar(0.01,tempo*2,Impulse.ar(tempo!32))) +
                      (SinOsc.ar((30.midicps*(1..32))*mod*fre,mul:1/(1..32)) * LFSaw.ar(1/tempo!32).squared)
                      ,0.75,1,0.25)
                  ,0.33,2)
              ,0.2,1)

         }).play;

    Ndef(\addi)[1] = \set -> Ppar([
        Pbind(
            \dur,16,
            \fre, Pxrand([1,1.5,1.25,2,1.5,2],inf)
        ),
        Pbind(
            \dur,1/tempo,
            \note, Pseq((([60,61,65,72]-12)),inf)
        ),
        Pbind(
            \dur,4,
            \mod, Pxrand(([1,1.5,1.25,0.5,0.75,2]*0.25pi),inf)
        )
    ]);
);
)


// ^^ https://www.youtube.com/watch?v=YsZKvLnf7wU

s.scope


(
~tone.quant=2;
~tone={
	var s,tm,e,oct,octmod,mod;

	mod = Duty.kr([1,8],0,Dseq(1/[1,2,3,4]+1,inf));
	octmod = Duty.kr(16,0,Dseq(([4,6,5,3]),inf));
	oct = Duty.kr(4,0,Dseq(octmod+(1/[1,2,3,4]),inf));

	tm = Impulse.ar(1,1/4*(0..3));
	e = Decay.ar(tm,1,0.9,0.0001);
	s = SinOsc.ar(oct.octcps /4 * ([1.025,1.001]**(1..8))*(e**4*10),mul:1/oct) * e;


	tm = Impulse.ar(2,1/4*(0..3));
	e = Decay.ar(tm,2);
	s = LFSaw.ar(oct.octcps/mod * ([1.00025,1.001]**(1..8)),mul:0.1) * e + s;
	s = MoogFF.ar(s,e**[4,8]*(LFTri.ar(1/[1,2,4,8]).range(8000,180))+44);


	tm = Impulse.ar(1/4,[0,1,2,3,4,5,6,7,7.25,7.5,7.75]/8);
	e = Decay.ar(tm,1);
	s = SinOsc.ar(33*(e**4.01*[10,30/mod]+1)) * e + s;

	tm = Impulse.ar(1/4,([0,0.5,1,1.5,2,3,3.25,3.5]+0.5)/4);
	e = Decay.ar(tm,0.25,0.95,0.00001);
	s = HPF.ar(WhiteNoise.ar(0.04!2),e**4.0*14000.0+[10,10000]) * e + s ;

	s = Limiter.ar(s,1,0.001);
	s = CompanderD.ar(s,0.85,1/1.5,1/4);
	s = FreeVerb.ar(s);

	Splay.ar(s,0.31,0.9);

};

~tone.play;

)


s.scope;
s.reboot;
p=ProxySpace.push(s);

~c.play;

(
~c = {
	var sig = AudioIn.ar([0,1],2);
	Splay.ar(sig,0.1,1);
};


~c[30] = \filter->{|in| Splay.ar(PitchShift.ar(in,0.15,0.5+(Amplitude.ar(in,0.15,0.15)*16))) };
~c[32] = \filter->{|in| FreeVerb.ar(in,0.15,2)};

)s.boot;

a = Ardour();

(
a.recToggle;
a.play;
Ndef(\a,{
	Splay.ar(
		SinOsc.ar(432/2pi*(1..8),mul:1/(1..8)) * Decay.ar(Impulse.ar(4/(1..8))).squared
		,0.5,1,0.5)
}).play;
)

(
a.stop;
s.freeAll;
)


s.boot;

(
Ndef(\a).fadeTime = 5.0;
Ndef(\a,{Splay.ar(CombL.ar(VarSaw.ar(2*[98,99,100,101,102,103,104]+SinOsc.kr([1,2,4,8,16]/1000.0).range(1,2),0,SinOsc.kr([0.5,0.4,0.3,0.1,0.01]/8.0).range(0.1,1.0),SinOsc.kr([0.1,0.13,0.02,0.041]/40.0)),0.2,0.21,3.0))}).play;


Ndef(\b).fadeTime = 5.0;
Ndef(\b,{Splay.ar(CombL.ar(VarSaw.ar(1.01*[98,99,100,101,102,103,104,105]+SinOsc.kr([1,2,4,8,16]/1001.0).range(1,5),0,SinOsc.kr([0.5,0.4,0.3,0.1,0.01]/10.1).range(0.1,1.0),SinOsc.kr([0.1,0.13,0.02,0.041]/30.14)),0.2,0.22,3.0))}).play;


Ndef(\c).fadeTime = 5.0;
Ndef(\c,{Splay.ar(CombL.ar(VarSaw.ar(4.01*[98,99,100,101,102,103,104,105,106]+SinOsc.kr([1,2,4,8,16]/1003.1337).range(1,2.3),0,SinOsc.kr([0.5,0.4,0.3,0.1,0.01]/10.0).range(0.1,1.0),SinOsc.kr([0.1,0.13,0.02,0.041]/100.23)),0.2,0.23,3.0))}).play;


Ndef(\d).fadeTime = 5.0;
Ndef(\d,{Splay.ar(CombL.ar(VarSaw.ar(0.5127*[98,99,97,96,95,94,93]+SinOsc.kr([1,2,4,8,16]/1008.1337).range(1,2.2),0,SinOsc.kr([0.5,0.4,0.3,0.1,0.01]/10.0).range(0.1,1.0),SinOsc.kr([0.1,0.13,0.02,0.041]/10.1)),0.2,0.27,3.0))}).play;


)

Ndef(\a).stop(10);
Ndef(\b).stop(10);
Ndef(\c).stop(10);
Ndef(\d).stop(10);


NdefMixer(s);


Ndef(\a,{Splay.ar(CombN.ar((WhiteNoise.ar(0.08!8) * Pulse.ar(6.6).clip()) + VarSaw.ar(VarSaw.kr(0.01*{ExpRand()}!20).exprange(44,99),{ExpRand()}!20,{ExpRand()}!20)))});


Ndef(\b,{Splay.ar( Compander.ar(BBandPass.ar( Ndef(\a).ar, SinOsc.kr(0.1).exprange(44,444))) )}).play;


Ndef(\c,{Splay.ar(Compander.ar(Ndef(\b).ar * Pulse.ar(6.6),0,0.75,2.2))}).play();

Ndef(\d,{Splay.ar(Compander.ar(VarSaw.ar({ExpRand()*44100}!8,{ExpRand()}!8,{ExpRand()}!8,{ExpRand()/2.0}!8) * Pulse.ar({ExpRand()*10.0}!8).clip()))}).play;


NdefMixer(s);s.boot;



(
Ndef(\beat).fadeTime = 3.0;
Ndef(\beat,{

	var tempo,freq,saw,lfo,tone,oo;
	tempo = 100/60; //bpm
	freq = Select.kr(Stepper.kr(Impulse.kr(1/2),max:4),[60,62,63,67,69].scramble.midicps*4) * [0.5,0.5,0.25,0.75];
	saw = LFPulse.ar([1,2,4]*tempo) * 4.0 * BPF.ar(WhiteNoise.ar([0.2,0.2,0.1]),[77,440,8000]);
	lfo = SinOsc.kr([0.01,0.02]*10).range(0,1);
	tone = SinOsc.ar( Decay.ar(Impulse.ar([1,2,8,1/4,1/8]*[1,1/2,1/4]*tempo),saw).exprange([77,88,99]*[1,2,4],freq.lag([0.1,0.2])));
	oo = Decay.ar(Impulse.ar([1,2,4]*[1,1/2,1/4]*tempo),lfo).exprange(0.01,3/tempo) * tone + saw;

	Splay.ar(
	CombN.ar(oo,delaytime:(lfo*4.0)+0.002*[1,2,4,8,10,20],decaytime:[1,2,4]);
)}).play;
)
(
s.boot;
)

(
Ndef(\a).fadeTime = 0.02;

Ndef(\a,{|freq = 77,voice = 33| Splay.ar(DelayN.ar(BBandPass.ar( Pulse.ar([3.3,2.2,1.1,0.55,6.6,13.2]).clip() * Blip.ar(SinOsc.kr(3.3).exprange(freq,freq+2.0),voice,1.0),SinOsc.kr(0.3).exprange(77.0,444.0),0.95),0.3,0.252))}).play();

)


(
Tdef(\tt,{
	var i = 0;
	loop{
		Ndef(\a).set(\freq,[60,63,65,67,69].wrapAt(i).midicps/4.0);
		Ndef(\a).set(\voice,[10,15,12,12,5,12,10,10].wrapAt(i));
		i = i + 3;
		2.2.wait();
	}
}).play;
)



(

Ndef(\b).fadeTime = 5.0;
// 8 ch magic
Ndef(\b,{Splay.ar(Pulse.ar(3.3*[2.0,0.5,0.25,0.0115,1.5,1.75,1.0,0.25]).clip() * SinOsc.ar(77+({ExpRand()*777.0}!8),{ExpRand()}!8,SinOsc.kr({ExpRand()*0.1}!8).exprange(0.1,1.0)))}).play();

)


Ndef(\c,{Splay.ar(Pulse.ar(MouseX.kr*[3.3,2.2,1.1,6.6]).clip()*SinOsc.ar(77+{ExpRand()*333.0}!4))}).play();


s.scope;
(

var tempo = 2;

Ndef(\addi).quant = 2.0;
Ndef(\addi,
	{|note = 22,fre = 1,mod = 1|
		var f;
		f = {(note.midicps)*fre};
		Splay.ar(

			FreeVerb.ar(
				CompanderD.ar(
					SinOsc.ar(
						(f)*(1..32) + (1.001**(1..32)) * mod.lag(0.15),
						SinOsc.ar(f/(1.0001**(1..32))*mod.lag(0.025) ).range(0,2pi),
						mul:2/(1..32)
					) * Decay.ar(Impulse.ar(tempo),TRand.ar(0.01,1.5,Impulse.ar(1/tempo!32))) +
					(SinOsc.ar(((31+36).midicps*(1..32))*mod,mul:1/(1..32)) * LFSaw.ar(1/(1..32)).squared) +
					(SinOsc.ar(55+(1.0001**(1..32)),mul:1/(1..32)) * Pulse.ar(2,[1,1.5,1.25]) )
					,0.75,1,0.25)
				,0.33,2)
			,0.2,1)

}).play;

Ndef(\addi)[1] = \set -> Ppar([
	Pbind(
		\dur,16,
		\fre, Pxrand([1,1.5,1.25,2,1.5,2],inf)
	),
	Pbind(
		\dur,1/tempo,
		\note, Pseq(([30,42,31,42]),inf)
	),
	Pbind(
		\dur,4,
		\mod, Pxrand(([1,1.5,1.25,0.5,0.75,2]*0.5pi),inf)
	)
]);
);
)

s.scope


(
~a={
	var i = Impulse.kr(1/[5,64],(1..64)+[0.5,0]/64);
	var mod = Select.kr(TExpRand.kr(0.0001,5,i),[1,1.5,2,1.25]);
	var sig;
	var sig1 = SinOsc.ar(43.2*(mod)*8pi/(((1+(1/(1..64)**2)))),8pi/(1..64),mul:0.5/(1..64)) * Decay.kr(i,0.45);
	var sig2 = SinOsc.ar(43.2*mod*2pi/(((1+(1/(1..64)**2)))),8pi/(1..64),mul:0.25/(1..64)) * Decay.kr(i,10.75);

	sig1 = Mix(sig1);
	sig2 = Mix(sig2);


	sig = SelectX.ar(LFTri.ar(1/4/(1..64),0.5)**4+0.0001,[sig1,sig2])/16;
	sig = Mix(sig);
	sig = GVerb.ar(sig,100,3)/8+sig/2;
	Splay.ar(sig,0.1);
};
~a.quant=2;
~a.play;
)

s.scope(
~a.play;
~melod.quant=2;
~a.quant=2;
~melod={Duty.kr(8,0,Dseq([1,1.5,2,1.5,1,2],inf)).lag(1)};
)

(
~a={
  var sig;

  sig = SinOsc.ar(43.2*~melod*(1.0001*(1..8)),mul:0.5);
  sig = sig * Decay.ar(Impulse.ar(4/fib(8)),4);
  sig = sig + ( HPF.ar(WhiteNoise.ar(0.06!4),TRand.ar(1200,12000,Impulse.ar(8!4))) * Pulse.ar(8/fib(4)));
  sig = sig + PitchShift.ar((LFSaw.ar(4320*(~melod.lag(2)*1.5)*(1.0001**(1..8)),mul:LFTri.ar(1/fib(8)).exprange(0.2,0.001))),SinOsc.ar(1/8).range(0.001,0.2));
  sig = CompanderD.ar(sig,0.5,1/1.5,1/6,0.01,0.01);
  sig = DelayL.ar(sig,0.1,SinOsc.ar(4/(1..8)).range(0.00001,0.01));
  sig = AllpassL.ar(sig,0.1,SinOsc.ar(1/8/(1..8)).range(0.00001,0.01));
  sig = FreeVerb.ar(sig,0.1,10);

  
  Splay.ar(sig);
};
)

(
~xoxo.quant=2;
~xoxo.play;
~xoxo={
	var t,t2,t3,env,env2,env3,sig,sig2,sig3,temp,l1,l2,l3,melod;

	melod = Duty.kr(8,0,Dseq(powerset([1.25,1.5,1,0.75]).scramble.flat,inf));

	temp = 1/2;
	l1 = 0.5;
	l2 = 1.75;
	l3 = 0.125;

	t = Impulse.ar(temp/2,1/8*[0,1,2,3,4,5,6,7,7.25,7.5,7.75]);
	t2 = Impulse.ar(temp*[2,1],1/4*([0,0.5,1,1.25,1.5,1.75,2,3,3.5]));
	t3 = Impulse.ar(temp/2,1/4*([0,1,2,3,3.5,3.75]+0.5));

	env = Decay.ar(t,l1);
	env2 = Decay2.ar(t2,0.06,l2);
	env3 = Decay.ar(t3,l3);

	sig = (SinOsc.ar(50!2+(Decay.ar(t,0.02).exprange(1.0001,4400.0) ))*env);
	sig = Resonz.ar(sig,Decay.ar(t,0.1).exprange(4000.01,44));

	sig2 = LFSaw.ar(([24,36,24+4,24+4]+LFNoise0.ar(1/4!3).range(0,40).round(12)).midicps*(_*melod!4)*(SinOsc.ar(4.01).range(1.000001,1.001)**(1..8)),mul:0.295/(1..4));
	sig2= sig2 * SinOsc.ar(4/[1,2,4,8]).range(0,1);
	sig2=CombC.ar(sig2,0.002,4,32) * env2;

	sig3 = HPF.ar(WhiteNoise.ar(0.4!2)*env3,Decay2.ar(t2,0.02,0.07).exprange(14000.01,432.0));


	sig = CompanderD.ar(sig,0.95,1/1.25,1/6);

	sig = FreeVerb.ar(sig+sig2+sig3,0.1,0.5)*4;

	Splay.ar(sig,0);

}
)
(
~xoxo.quant=2;
~xoxo.play;
~xoxo={
	var t,t2,t3,env,env2,env3,sig,sig2,sig3,temp,l1,l2,l3,melod;

	melod = Duty.kr(4,0,Dseq(powerset([1.25,1.5,2,1,1.125]).scramble.flat,inf));

	temp = 1/2;
	l1 = 0.75;
	l2 = 0.95;
	l3 = 0.25;

	t = Impulse.ar(temp,1/8*[0,1,2,3,4,5,6,7,7.25,7.5,7.75]);
	t2 = Impulse.ar(temp,1/8*([0,1,2,3]));
	t3 = Impulse.ar(temp,1/4*([0,1,2,3,3.5,3.75]+0.5));

	env = Decay.ar(t,l1);
	env2 = Decay.ar(t2,l2);
	env3 = Decay.ar(t3,l3);

	sig = (SinOsc.ar(50!2+(Decay.ar(t,0.02).exprange(1.0001,4400.0) ))*env);
	sig = Resonz.ar(sig,Decay.ar(t,0.1).exprange(4000.01,44));

	sig2 = LPF.ar((LFSaw.ar(36.midicps*(_*melod!4)*(1.0001**(1..8)))*env2),Decay.ar(t2,0.02).exprange(1400.01,43.2) );

	sig3 = HPF.ar(WhiteNoise.ar(0.2!2)*env3,Decay.ar(t2,0.02).exprange(14000.01,432.0));


	sig = CompanderD.ar(sig,0.95,1/1.25,1/4);

	sig = FreeVerb.ar(sig+sig2+sig3,0.1,0.5);

	Splay.ar(sig,0);

}
)
s.boot;

(
a.recToggle;
a.play;
Ndef(\a,{
	var c,r;
	~c = SinOsc.ar(1/20,-0.5pi);
	~r = LFSaw.ar(1/20,-0.5pi);

	Splay.ar(
		LFSaw.ar(432/2pi*(1..8),mul:1/(1..8)) * ~c.range(0,1)
		,0.5,1,0.5)
}).play;
)


p=ProxySpace.push(s.reboot);

(
    ~morph={
        var fd = LFSaw.ar(1/8/[8,17,33,65,71]);
        var sig = LFSaw.ar(4320/fd.range(1,43.2)) + SinOsc.ar(43.2!2,mul:0.5);
        sig = sig + (Gendy1.ar(1,2,LFPulse.ar([1,4,8,42]).range(0.01,0.5),minfreq:12,maxfreq:9000,initCPs:8));
        sig = PitchShift.ar(sig,0.15*(1..8),fd.exprange(1.0001,4));
        sig = BPF.ar(sig,LFTri.ar(1/12/(1..8)).exprange(11.1,10200),SinOsc.ar(1/4/[2,4,8]).range(0.1,2));
        sig = GVerb.ar(sig,LFTri.ar(1/8/[1,2,4,8]).range(2,100)) + LPF.ar(sig,150,2);
        sig = CompanderD.ar(sig,1/75,1/[1,2,3,4],1/2);

        sig = Splay.ar(sig.flat,0.75);
    };
    ~morph.play;
)

s.boot;
(
Tdef(\tt,{
	loop{

		Ndef(\a).fadeTime = 1/4;
		Ndef(\a).quant = 0;
		Ndef(\a,{
			var a,b,c,d,e,f,g,sel,octave,gr,mod1,sig1;
			a = [0,3,5,7,8];
			b = [2,5,7,7,7];

			c = [0,3,7,8,10];
			d = [0,2,5,8,8];
			e = [0,2,3,7,7];
			f = [0,3,5,8,8];
			g = [2,3,7,10,10];


			sel = 0.rrand(4);
			octave = sel * 12 + 24;

			gr = [c,d,e,f,g].at(sel);

			mod1 = gr.at(0.rrand(4!3))+octave;

			sig1 = SinOsc.ar((mod1).midicps,mul:0.2);

			Splay.ar(
				sig1 * Decay.ar(Impulse.ar(4/[1,2,4]))
				,0.5,0.5,0.5)
		}).play;
		4.wait;
	}
}).play;
)

s.boot;

(

var tempo = 80.0;

Ndef(\low,{|amp = 0.1|Splay.ar(CombN.ar(VarSaw.ar([77/2,77,144,144*2]/2.0,{ExpRand()}!4) * SinOsc.ar([0.01,0.1,0.1/2,0.2]/10.0,0,0.4),0.2,0.5,10.0),1,amp.lag(5))}).play;

Ndef(\tone,{|freq = 2200,amp = 0.1|Splay.ar(SinOsc.ar([1,2,3,4]*freq) * Pulse.ar([1/8,1/4,1/2,1]*(tempo*2)/60),1,amp.lag(5))}).play;


Ndef(\tone2,{|freq = 2200,amp = 0.1|Splay.ar(SinOsc.ar([1,2,3,4]*freq) * Pulse.ar([1/8,1/4,1/2]*(tempo*2)/60),1,amp.lag(5))}).play;

Ndef(\hiss2,{|amp = 0.1|Splay.ar(PinkNoise.ar([1,2,3,4]/20.0) * Pulse.ar([1/8,1/4,1/2,1,2,4]*(tempo*4)/60),1,amp.lag(5))}).play;


Ndef(\hiss,{|amp = 0.1|Splay.ar(WhiteNoise.ar([1,2,3,4]/10.0) * Pulse.ar([1/8,1/4,1/2,1,2,4]*(tempo*4)/60),1,amp.lag(5))}).play;

Ndef(\beat,{|amp = 0.1|Splay.ar(SinOsc.ar([55,99]) * Pulse.ar([1/8,1/4,1/2,1,2,4]*(tempo/4)/60),1,amp.lag(5))}).play;

Ndef(\a,{|freq = 1.0,amp = 0.1|Splay.ar(CombN.ar(SinOsc.ar([440,220,110,55]/freq.lag(1/10.0)+440,{ExpRand()}!4,SinOsc.kr({ExpRand()*10.0}!4) * Decay.kr(Impulse.kr([1,2,4,8]*(tempo/4)/60),[1.0,0.5,0.25,0.0125]/(tempo/60))),0.2,SinOsc.kr({ExpRand()/16.0}!2).range(0.02,0.2),1.0),1,amp.lag(5))}).play;

Ndef(\a).fadeTime = 1.0;


Ndef(\b,{|freq = 1.0,amp = 0.1|Splay.ar(CombN.ar(VarSaw.ar([440,220,110,55]/freq.lag(1/100.0)+220,{ExpRand()}!4,{ExpRand()}!4,SinOsc.kr({ExpRand()*10.0}!4)*Decay.kr(Impulse.kr([1,2,4,8]*(tempo/2)/60),[1.0,0.5,0.25,0.0125]/(tempo/60))),0.2,SinOsc.kr({ExpRand()/8.0}!2).range(0.02,0.2),1.0),1,amp.lag(5))}).play;

Ndef(\b).fadeTime = 1.0;


Ndef(\c,{|freq = 1.0,amp = 0.1|Splay.ar(CombN.ar(SinOsc.ar([440,220,110,55]/freq.lag(1/200.0)+110,{ExpRand()}!4,SinOsc.kr({ExpRand()*10.0}!4)*Decay.kr(Impulse.kr([1,2,4,8]*(tempo/8)/60),[1.0,0.5,0.25,0.0125]/(tempo/60))),0.2,SinOsc.kr({ExpRand()/4.0}!2).range(0.02,0.2),1.0),1,amp.lag(5))}).play;

Ndef(\c).fadeTime = 1.0;

Ndef(\d,{|freq = 1.0,amp = 0.1|Splay.ar(CombN.ar(VarSaw.ar([440,220,110,55]/freq.lag(1/2.0)+55,{ExpRand()}!4,{ExpRand()}!4,SinOsc.kr({ExpRand()*10.0}!4)*Decay.kr(Impulse.kr([1,2,4,8]*(tempo*2)/60),[1.0,0.5,0.25,0.0125]/(tempo/60))),0.2,SinOsc.kr({ExpRand()/2.0}!2).range(0.02,0.2),1.0),1,amp.lag(5))}).play;

Ndef(\d).fadeTime = 1.0;

)

(
Tdef(\tt,{
	var i = 0;
	loop{
		Ndef(\a).set(\freq,[0.5,1,2,0.75,0.25,4,1/16,1/32].wrapAt(i*i+i)/([1,2].wrapAt(i)));
		Ndef(\b).set(\freq,[0.5,1,2,0.75,0.25,4,1/16,1/32].wrapAt(i+i)/([0.5,16,8,1.5,0.25].wrapAt(i)));
		Ndef(\c).set(\freq,[0.5,1,2,0.75,0.25,4,1/16,1/32].wrapAt(i*i)/([1,2,8,4,8].wrapAt(i)));
		Ndef(\d).set(\freq,[0.5,1,2,0.75,0.25,4,1/16,1/32].wrapAt(i)/([0.5,32,2,1.5].wrapAt(i)));

		Ndef(\tone).set(\freq,[0.5,1,2,0.75,0.25,4,1/16,1/32].wrapAt(i)/([0.5,16,12,1.5].wrapAt(i*i+i))*220);
		Ndef(\tone2).set(\freq,[0.5,1,2,0.75,0.25,4,1/16,1/32,1/64].wrapAt(i)/([0.5,16,12,1.5,8].wrapAt(i*i+i))*4400);

		Ndef(\a).set(\amp,0.01.rrand(0.125));
		Ndef(\b).set(\amp,0.01.rrand(0.125));
		Ndef(\c).set(\amp,0.01.rrand(0.125));
		Ndef(\d).set(\amp,0.01.rrand(0.125));

		Ndef(\hiss).set(\amp,0.01.rrand(0.127));
		Ndef(\hiss2).set(\amp,0.01.rrand(0.127));
		Ndef(\tone).set(\amp,0.01.rrand(0.123));
		Ndef(\tone2).set(\amp,0.01.rrand(0.123));

		Ndef(\beat).set(\amp,0.01.rrand(0.275));
		Ndef(\low).set(\amp,0.15.rrand(1.0));


		i = i + 1;

		3.wait;
	}
}).play;
)

NdefMixer(s);
(
~pulse={
	var mod = Duty.kr([8,4],0,Dseq([1,1,2,1.5,1.25,2,4,1.125],inf));
	var sig = [
		LFPulse.ar(50!2*mod[0]),
		LFTri.ar(50!2*mod[1]),
		WhiteNoise.ar(0.5!2),
		SinOsc.ar(0)
	];

	sig = Select.ar(LFSaw.kr(1/4).range(0,sig.size+4.01),sig) / 4;

	sig = (SinOsc.ar(BrownNoise.ar(1!16).range(50,500).lag(1/32)) ) + sig;

	sig = Resonz.ar(sig,4320/(1..8),0.1) * 8;

	sig = PitchShift.ar(sig,0.2,Saw.ar(8/[1,2,4,8]).range(0.5,2));

	sig = sig + (SinOsc.ar(50!2,mul:0.3)*LFPulse.ar(1/2,0,1/2));

	sig = CompanderD.ar(sig,1/2,1/2,1/2) / 3 * 2;

	sig = GVerb.ar(sig)/4+sig/3;

	Splay.ar(sig.flat,0.1,0.5);
};
~pulse.quant=2;
~pulse.play;

)

//crashes everything// SC_PortAudioDriver: exception in real time: alloc failed, increase server's memory allocation (e.g. via ServerOptions)
//increased memory and still crashed :)

// ..this one is unusually CPU heavy, not worth sqeezing the server.. sounds quite bad


(
~gen={
	var sig;
	var speed = 1/[8,400,80,10];
	sig = Gendy1.ar(LFDNoise0.kr(speed).range(1,6),LFDNoise1.kr(speed),LFDNoise1.kr(speed),LFDNoise1.kr(speed),100,800,LFDNoise1.kr(speed),LFDNoise1.kr(speed),12);
	sig = BPF.ar(sig,1840/[1,2,4,8]*SinOsc.ar(1/4/[1,2,4,8]).range(0.1,8));
	sig = GVerb.ar(sig,100)+(sig/2);
	Splay.ar(sig.flat,0.5);
};
~gen.play;
)
s.boot;

(
  Ndef(\a).fadeTime = 4;
  Ndef(\a).quant = 2.0;
  Ndef(\a,{
	var a,b,speed,imp,env1,env2,melody,voices,freq,mm,c,sig,crusher,comp,strangler;

    a = LFCub.ar(43.2+SinOsc.ar((1.00001**(1..8))),mul:1/(1..8));
    b = WhiteNoise.ar(0.4!2);
    b = HPF.ar(b,LFNoise2.ar(18000!2));

    speed = Duty.kr(Dseq([1/2,1/4,1],inf),0,Dseq([4,8],inf));
    imp = Impulse.ar(speed);
    env1 = Decay.ar(imp,0.75);
    env2 = Decay.ar(imp/16,0.45);

    mm = Duty.kr(4,0,Dseq([60,67,57,60,72]+24,inf)).lag(0.1);

    melody = Duty.kr([1,2,4,8,16],0,Dseq([1,2,1.5,1,2,1.25,1,2,0.5,1,2],inf));
    voices = Duty.kr([1,2,4,8,16]*4,0,Dseq([1,2,1.5,1,2,1.25,1,2,0.5,1,2].reverse*4,inf));
    freq = mm * melody;

    c = Blip.ar(freq*(1.5001**(1..8)),voices,mul:4/(1..8)) + LFSaw.ar(freq*2);
    c = Resonz.ar(c,freq*SinOsc.ar(1/[11,22,44]).range(0.95,1.05));
    c = c * LFSaw.ar(1/4/[1,2,4,8,16]).squared;
    c = CombN.ar(c,0.25,0.25,8);
    c = FreeVerb.ar(c,4);
    c = LPF.ar(c,freq*1.5);

    sig = (a * env1) + (b * env2) + c;

    crusher = CombN.ar(sig,
                        TExpRand.ar(0.02,0.25,Impulse.ar(1)).lag(1/32),
                        TExpRand.ar(0.04,4,Impulse.ar(1/8)).lag(1/8),
                        4);

    comp  = CompanderD.ar(crusher ,0.5,1,1/10,0.002,0.02);
    comp = LPF.ar(comp,SinOsc.ar(0.1*(1.0001**(1..8))).range(400,16000));
    strangler =  OnePole.ar(comp,SinOsc.ar(0.01*(1.0001**(1..8))).range(0,1)).softclip / 1.5;

    Splay.ar(
      (strangler.distort + sig.distort)
    ,0.5,1,0.5)}).play;
)



///nooooaaaiiisss 
s.boot;
(
Ndef(\a).quant = 1;
Ndef(\a,{
	var a,b,f,lfo;
	a = Duty.ar(1/100,0,Dseq([0,4,7,0,3,7],inf));
	b = Duty.ar(8,0,Dseq([0,12,24,36]-60,inf)).lag(1/4);

	f = (80+a+b).midicps;
	lfo = SinOsc.ar(1/4/(1..8)).range(0.01,1);
	Splay.ar(


		VarSaw.ar(f*(1.0001**(1..8)),0,lfo,mul:0.5) +
		(VarSaw.ar(f*3,0,1-lfo,mul:0.4) * LFSaw.ar(1/4).squared)
		* Decay.ar(Impulse.ar(4/[1,2,4]),[1,0.5,0.25])
		,0.5,1,0.5)}).play;

)

(
~barrel={
	var sig2;
	var sig = PinkNoise.ar(0.1!4);
	var t = Impulse.ar(1/4,(0..3)/4);
	var times = TExpRand.ar(1.01,8,t);
	var slopes = TExpRand.kr(0.33,2,t);
	var freq = TExpRand.kr(20.01,12000,t);


	var env1 = EnvGen.ar(Env([20000,freq,4],[1.2,1.2]*times,[3,-3]*slopes),t);
	var env2 = EnvGen.ar(Env([0.01,1,0.001],[1.2,1.2]*times,[3,-3]*slopes),t);
	var env3 = EnvGen.ar(Env([0,1,0],[1.2,1.2]*times,[3,-3]*slopes),t);


	sig = BBandPass.ar(sig,env1,env2,env3);

	sig2 = DynKlank.ar(`[Array.fill(12,{TExpRand.ar(55.01,140,t).round(44/pi).lag(1/8)}),nil,Array.fill(4,{TExpRand.ar(1.001,4,t)})],sig/20.0);
	sig2 = Limiter.ar(sig2,0.75);

	sig2 = GVerb.ar(sig2)/5+sig/2;
	sig2 = HPF.ar(sig2,55);
	sig2 = LPF.ar(sig2,4000);
	sig2 = CompanderD.ar(sig2,0.5,1/1.5,1/2)/2;

	Splay.ar(sig2,0.1);
};
~barrel.play;
)
(
~qwe={
	var imp = Impulse.ar(1/2,(0..7)++[0.5,7.5,7.75]/8);
	var sig = DynKlank.ar(`[(1..20),nil,{ExpRand(0.001,2)}!20],imp,1,Decay.ar(imp,1).exprange(5.01,65));
	sig = HPF.ar(sig,20);
	sig = sig + (RHPF.ar(WhiteNoise.ar(0.74!2),LFDNoise1.ar(1/4!8,10000,12000),SinOsc.ar(11/fib(12),0.5).exprange(0.2,0.6)) * Decay2.ar(imp,0.25,0.0035));
	Splay.ar(sig,0.25);
};
~qwe.play;
)(

/////////////////////////////////////////////

Ndef(\melod).quant = 2.0;
Ndef(\melod,{
	var trig,freq,mod,vibrato;
	trig = Impulse.ar(8/[1,2,4,8]);

	freq = Duty.kr(1/8,0,Dseq([1,1.5,2,1.5,1,1.5,0.5,0.75],inf)) * 43.2 * pi ;
	mod = Duty.kr(4,0,Dseq([1,1.5,1.25,0.5],inf));
	vibrato = SinOsc.ar(1/2/(1.01**(1..8))).range(-40,40);

	Splay.ar(
		RLPF.ar(
			CompanderD.ar(
				LFSaw.ar(freq*mod,mul:0.25) * Decay.ar(trig);
				,0.25,1,0.25,0.003,0.02) * 2
			,freq*2 + vibrato)
		,0.5,0.25,0.5)
}).play;
)
/////////////////////////////////////////////
(
Ndef(\submelod).fadeTime = 2.0;
Ndef(\submelod).quant = 2.0;
Ndef(\submelod,{
	var trig,freq,mod,vibrato;
	trig = Impulse.ar(4/[1,2,4,8]);

	freq = Duty.kr(2*[1,2,4,8],0,Dseq([1,1.5,2,1.5,1,1.5,0.5,0.75],inf)) * 43.2 * 4pi ;
	mod = Duty.kr(8,0,Dseq([1,1.5,1.25,0.5],inf));
	vibrato = SinOsc.ar(1/2/(1.01**(1..8))).range(-40,40);

	Splay.ar(
		RLPF.ar(
			CompanderD.ar(
				LFSaw.ar(freq*mod,mul:0.25) * LFSaw.ar(1/2/[1,2,4,8]);
				,0.25,1,0.25,0.003,0.02) * 2
			,freq*2 + vibrato)
		,0.5,0.15,0.5)
}).play;

)
/////////////////////////////////////////////
(
Ndef(\kick).quant =2.0;
Ndef(\kick,{
	var duty,imp,speed,sig,cmp;
	duty = Duty.ar(Dseq([1,1,2],inf),0,Dseq(8/[1,1,2,1],inf));
	imp = Impulse.ar(duty);

	speed = 2;

	sig = LPF.ar(
		Ringz.ar(
			imp,
			TExpRand.ar(44.0,55.0,Impulse.ar(4)),
			TExpRand.ar(0.15001,1.5,Impulse.ar(4)))
		, 500 );
	cmp = CompanderD.ar(sig,0.15,1,0.26, clampTime: 0.004, relaxTime: 0.08);

	Splay.ar(
		cmp * 3
		,0.5,0.5,0.5)
}).play;
);


s.reboot;

(


    Ndef(\mod).quant = 2.0;
    Ndef(\mod,{Select.kr(Stepper.kr(Impulse.kr(1/4)),[1,1.5,3,8,1,2,4,1.5,1,1,1])});

    SynthDef(
        \one,
        {|freq = 220,freq2 = 221,dur = 1,amp = 1,mod = 1,harm = 1000|
         var sig,env;
         env = EnvGen.ar(Env([0,1,0],[0.02,dur*{ExpRand(1,2)}!12],[-3,3]),doneAction:2);
         sig = LPF.ar(SinOsc.ar([freq2,freq] * mod.lag({ExpRand(0.01,dur/2)}!8) / Ndef(\mod).kr, mul:0.12),harm.lag(1/16)) * env;
         Out.ar(0,Splay.ar(
             sig
             ,0.05,1));
        }).add;


    Pdef(\z,{
        Ppar([
            Pbind(
                \instrument,\one,
                \dur, 1/8,
                \freq,Pshuf(2**(1..4)*55*pi,inf),
                \mod,Pshuf([1,2,0.5,1,1.5],inf),
                \freq2,Pshuf(2**(1..4)*55*pi,inf),
                \amp,Pwhite(0.5,1,inf),
                \harm, Pwhite(22,1800,inf)
            ),
            Pbind(
                \instrument,\one,
                \freq,Pshuf(2**(1..3)*55,inf),
                \freq2,Pshuf(2**(1..3)*55,inf),
                \mod,Pshuf([1,2,0.5,1,1.5],inf),
                \amp,Pwhite(0.5,1,inf),
                \dur, 1/8,
                \harm, Pwhite(22,8000,inf)
            ),
            Pbind(
                \instrument,\one,
                \dur, 1/4,
                \mod,Pshuf([1,2,0.5,1,1.5],inf),
                \amp,Pwhite(0.5,1,inf),
                \freq,Pshuf(2**(1..4)*55*0.5pi,inf),
                \freq2,Pshuf(2**(1..4)*55*0.5pi,inf),
                \harm, Pwhite(22,8000,inf)
            )
        ])}).play(quant:2);
)

(
    ~env.quant=2;
    ~env={


        var env2 = EnvGen.ar(Env([0,1,0],[0.0075,1.0],[3,-3]),Impulse.ar(1/2,(0..3)++[0.5,0.25,2.5,2.25]/4));
        var env3 = EnvGen.ar(Env([12,22000,44],[0.125*(_*2!4),0.07],[3,-3]),Impulse.ar(1/2,(0..3)/4));

        var sig = WhiteNoise.ar(0.5!2) + LFSaw.ar(44) * env2;
        sig = BBandPass.ar(sig,env3)*2;
        sig = FreeVerb.ar(sig,0.1,0.5);

        Splay.ar(sig,0.1,0.8);
    };
    ~env.play;
)

//i used Duty for gate but Impulse is nice as well 
(
Ndef(\a,{
	var sig;
	sig = Pulse.ar([1,2,4,8]) ;
	sig = CombN.ar(sig,1/80,1/70+(1/80*LFSaw.ar(1/8/[1,2,4,8]).lag(0.1)),32);
	sig = Limiter.ar(sig,1,0.5);
	sig = sig * LFPulse.ar(8/fib(12));
	sig = Resonz.ar(sig,43.2*[1,2,4,8,16,32,32*1.5,64,64*1.5],1,4);
	sig = sig * Decay.ar(Impulse.ar(4/fib(12)),[1,2,4,6,8,10,20].normalize.reverse*2);
	sig = FreeVerb.ar(sig,0.1,10);

	Splay.ar(
		sig
		,0.1,1,0.5)
}).play;
)

s.scope

s.boot;


(
var fibonacci = 1/[1,1,2,3,5,8,13,21,34,55,89];

Ndef(\a,{|freq = 440| Splay.ar(CombN.ar(Pulse.ar((fibonacci) * 220/60).clip(-1,1) *
	SinOsc.ar((fibonacci)*freq.lag(0.2)) *
	SinOsc.ar((fibonacci)).range(0.0,1.0),0.2,0.2,1.0),0.5,0.2)}).play;

Tdef(\tt,{
	var i = 0;
	var fibonacci = 1/[1,1,2,3,5,8,13,21,34,55,89];
	loop{
		Ndef(\a).set(\freq,(220/(fibonacci.wrapAt(i))));
		i = i + 1;
	1.0.wait;
	}
}).play;
)
(
~w.quant_(2,-1);
~w={var i,s,d,e;

	i = Impulse.ar(1/4,(0..15)++[0.5]/16);

	d = EnvGen.ar(Env([0.002,[1,0.75],0.00001],[0.002,[2,1,2,0.1]],[50,-10]),i);
	s = SinOsc.ar([50,90,50,90]*(d.pow(15)*2+1)) * d + (PinkNoise.ar(d.pow(5)));

	i = Impulse.ar(1/16,(0..7)+0.5/8);
	d = EnvGen.ar(Env([0.002,[1,0.75],0.00001],[0.002,[2,1,2,0.1]/4],[50,-10]),i);
	s = (WhiteNoise.ar(d.pow(5)/4)) + s;

	s = LPF.ar(s,LFTri.ar(1/8/[1,2,4,8,3.5,2.33]).exprange(12000.01,40));

	i = Impulse.ar(1/16,(0..7)/8);
	d = EnvGen.ar(Env([0.002,[1,0.75],0.00001],[0.002,[2,1,2,0.1]],[50,-10]),i);
	s = (WhiteNoise.ar(d.pow(5)/4)) + s;

	i = Impulse.ar(1/16,(0..7)+0.45/8);
	d = EnvGen.ar(Env([0.002,[1,0.75],0.00001],[0.002,[2,1,2,0.1]*8],[-3,4]),i);

	e = HPF.ar(s,10000);
	e = CombN.ar(s,TExpRand.ar(0.0002,0.042,Impulse.ar(1/8)).lag(1/8),TExpRand.ar(0.02,0.1,Impulse.ar(1/4)).lag(1/4),4) / 3 * d;
	e = OnePole.ar(e,SinOsc.ar(1/8/(1..8)).range(0,1));

	s = GVerb.ar(s,8,3,0.02,0.05,3,0.5,0.2,0.7)/15 + (s / 3 * 2) + e;

	s = CompanderD.ar(s,0.75,1/1.2,1/6);

	Splay.ar(s,0.1);
};
~w.play;
)

p = ProxySpace.push(s);

///////////////////////////
// global variables
///////////////////////////

(
~rythm.quant = 2;
~rythm.fadeTime = 0.1;
~rythm = {Duty.ar(Dseq([1/2,2+1/2],inf),0,Dseq([32,4]*2,inf))};
~saw.quant = 2;
  ~saw = {LFSaw.ar(2).exprange(2200.01,22)};
)
///////////////////////

(
  Ndef(\a).fadeTime = 2;
  Ndef(\a).quant =2;
  Ndef(\a,{
    var sig = SinOsc.ar(~saw+(~saw*Pulse.ar(~rythm)));
    sig = sig + Resonz.ar(WhiteNoise.ar(1!2),~saw*10,0.1,4);
    sig = sig * Decay.ar(Impulse.ar(~rythm),0.15+SinOsc.ar(1/16).range(0.001,0.15));
    sig = RLPF.ar(sig,~saw*10);
    sig = FreeVerb.ar(sig,0.13,2);

    Splay.ar(
       sig
    )
  }).play;
)


s.scope;

///////  1  hf sounds /////////////////////////////////////////////////////////

(


~one={
	var sig;
	sig = LFSaw.ar(8000*[1,1.5]+SinOsc.ar([1,1.00001]).range(-1,1) ,mul:0.5) * LFSaw.ar(1/[1,2]).exprange(0.0001,1);
	Splay.ar(sig,0.1,m.kr(0,1));
};
// ~one[50]=\filter->{|in|FreeVerb.ar(in,0.22,0.5)};

~one.play;
~one.fadeTime = 4;


///////// 2 calm little melodies whan loud  ////////////////////////////////////////////////////////


(

~modulate.quant=2;
~modulate = {Duty.kr(4*(1..8),0,Dseq([0,-48,-24,-12,-36]+12,inf))};
~a.quant = 4;
~a={
	var sig;

	sig = SinOsc.ar(([60,67,64,69,65,60-12+7,60-24+4]+~modulate).midiratio * (pi) * (1..12) * (1.0001**(1..12)),SinOsc.ar(8/[11,22,44]).range(-pi,pi),mul:1/(1..12));
	sig = sig * LFSaw.ar(1/(1..8)).range(0,1);
	sig = sig + (SinOsc.ar([44,45] * Decay2.ar(Impulse.ar(4/[1,2]),0.002,0.18,5,1),0.1) * Decay2.ar(Impulse.ar(4/[1,2]),0.2,1));
	sig = sig + (HPF.ar(WhiteNoise.ar(0.005!4),TExpRand.ar(440,16000,Impulse.ar(1/2!4))) * Pulse.ar([1/4,1/8,1],[1,2,6,8].normalize));
	sig = CompanderD.ar(sig,0.5,1,1/10);

	Splay.ar(sig,0.01,m.kr(0,2));
};


~a.fadeTime = 20;
~a.play;


~a[10]=\filter->{|in| Splay.ar(BBandPass.ar(in,SinOsc.ar(1/4/(1..8)).range(44,8000)) * 1.5)};
~a[12]=\filter->{|in| Splay.ar(Resonz.ar(in,SinOsc.ar(1/4/(1..8)).range(44,8000)) * 1.5)};
~a[14]=\filter->{|in| Splay.ar(Vibrato.ar(in,[4,5,6,7],0.2))};
~a[16]=\filter->{|in| Splay.ar(FreeVerb.ar(in,SinOsc.ar(1/10/(1..8)).range(0.01,0.18),1))};
);


///////// 3  impro set 1.5 1.25 1.75 ////////////////////////////////////////////////////////////////

(
~low.quant=2;
  ~low={

	var oct,f,sig;

      oct = Duty.kr(16,0,Dseq([0,1,2]*7,inf));
      f = Duty.kr(4,0,Dseq(([60,64,67,63]-36+oct).midicps,inf)).lag(1/4);
      sig = Blip.ar(f,40*LFSaw.ar(1/4/[1,2,4,8]).exprange(0.0001,1)+1,mul:0.2);

      sig = Resonz.ar(sig,SinOsc.ar(1/4/[1,2]).exprange(f*8,f));
      sig = Vibrato.ar(Mix.ar(sig).softclip!2,[4,5],0.2);


    Splay.ar(
      Compander.ar(
        FreeVerb2.ar(
          sig[0],sig[1]
            ,0.23,40) * 2.0
        ,0.5,1,1/10)
		,0.1,m.kr(0,3))
  };
~low.play;
);


/////////// 4 toned hihats ////////////////////////////////////////////////////////



~hh={
	var hat,pat1;

	pat1=[1,2,3,4]*2;


	hat = HPF.ar(WhiteNoise.ar(0.5!2),2200*(Decay.ar(Impulse.ar(pat1),0.15)+1)) * Decay.ar(Impulse.ar(pat1),0.25);
	Splay.ar(hat,0.1,m.kr(0,4));
};
~hh.quant=1;
~hh.play;


/////////// 4b melod kicks //////////////////////////////////////////////////////


~rrr={
	var in,mel,hat,kick,pat1,pat2,sl,sl2;

	sl =Duty.ar(4,0,Dseq([1.5,1.25,1.125,2],inf)).lag(1/16);
	sl2=Duty.ar(4,0,Dseq([1.5,1.25,1.125/2,2],inf));

	pat1=[1,4,1/4];
	pat2=[2,8,1.5];

	kick = SinOsc.ar(44*sl2*(4*Decay.ar(Impulse.ar(pat1),0.1225)+1),mul:1)* Decay.ar(Impulse.ar(pat1),1.5);
	hat = RHPF.ar(WhiteNoise.ar(0.2!2),2200*[1,2,4,8]) * Decay.ar(Impulse.ar(pat2),0.25);
	mel = VarSaw.ar(43.2*[1,2,4,8]*sl2,mul:0.37);
	in = Ringz.ar(Impulse.ar(4), 43.2*(_*sl!8) ,2.5,mul:1/(1..12)) + mel;
	in = kick / 1.25 + mel;
	in = CompanderD.ar(in,0.75,1/1.15,1/10).softclip;
	in = BBandPass.ar(in,LFTri.ar(1/32*fib(8)).range(44,12000),1,1,in/2);
	Splay.ar(in,0.1,m.kr(0,5));
};

~rrr.fadeTime=2;
~rrr.quant=2;
~rrr.play;





//////////// 5 alex astral /////////////////////////////////////////////////////////////




//////////// 6 inpropriate guitar basses /////////////////////////////////////////////////////////////



(
~six={
	var sig,mld;
	mld = LFTri.ar(222/(1..8))*25;

	sig = SinOsc.ar(16000/(1..16),mul:0.05);
	sig = sig * LFPulse.ar(TExpRand.ar(1/4!16,16,Impulse.ar(4)));
	sig = CompanderD.ar(sig,0.5,1,1/10);
	sig = CombN.ar(sig,1,8,8);
	sig = FreeVerb.ar(sig,0.31,2);

	Splay.ar(sig,0.1,m.kr(0,6));

};
);
~six.quant=2;
~six.play;




///////////// 7 disturbing high freq sounds //////////////////////////////////////////////////////////////////


(

~pila.fadeTime = 2.0;
~pila.quant = 2.0;
~pila={Splay.ar(
	RLPF.ar(
		SinOsc.ar(LFSaw.ar(11.31).exprange(22.0,17777),mul:0.75) * SinOsc.ar(11.32).squared * SinOsc.ar(8/[8,5,3,1]).lag(0.001+SinOsc.kr(0.01).range(0,0.01))
		,LFNoise0.ar(1/[4,4]).range(22,17777).lag(1))
	,0.1,m.kr(0,7))};




~pila[52] = \filter -> {|in| Resonz.ar(in,LFNoise0.ar(1/[4,4]).range(22,17777).lag(1),mul:0.33,add:in)};
~pila[54] = \filter -> {|in| GVerb.ar(in,100,mul:0.33,add:in)};

~pila.play;

);


);

(



///////////// 10 serioux tones //////////////////////////////////////////////////////////////////

(
~aaa.fadeTime = 2.0;
~aaa.quant = 2.0;
~aaa={
	var base,saws;
	Splay.ar(

		base = [60,60.13]*1.25;
		saws = LFSaw.ar(1/8/[1,2,3,5,8,13,21,34,55,89]).squared;

		FreeVerb.ar(
			FreeVerb.ar(
				SinOsc.ar(SinOsc.kr([1,1/2,1/4,1/8]*pi).range(base,base+2),mul:2)
				,0.1375,1).softclip * Decay.ar(Impulse.ar(8/[1,2,3,5,8])).squared + (VarSaw.ar(SinOsc.kr([1,1/2,1/4,1/8],(8pi*saws)).range(base*2,base*2+2)) * saws)
			// +(HPF.ar(WhiteNoise.ar(0.75!4),10080) * Decay.ar(Impulse.ar(8/[1,2,3,5,8,13]),0.6).squared)

			,0.1,2).softclip
		,0.1,m.kr(0,8))};

);
);


///////// 11 ////////////////////////////////////////////////////////////////////

(

(
~ss.quant=2;

~ss = {Duty.kr(1/8,0,Dseq([1,2,0,0,0,0,3,3,3,4,0,0,0,0],inf))};

~x={
	var sigs,sel,env,f,l;

	sigs = [
		SinOsc.ar(43.2),
		HPF.ar(WhiteNoise.ar(0.7!2),TExpRand.ar(1000,16000,Impulse.ar(1!4))),
		Blip.ar(1986,{TExpRand.ar(10,100,Impulse.ar(4!4))} ),
		RLPF.ar(WhiteNoise.ar(0.7!2),TExpRand.ar(1000,16000,Impulse.ar(1!4))),
		Pluck.ar(Pulse.ar(4000),Impulse.ar(4),0.5,0.5)
	];

	sel = Select.ar(~ss,sigs);
	sel = CompanderD.ar(sel,0.9,1,1/10);
	sel = FreeVerb.ar(sel,0.12,2.5);

	Splay.ar(sel,0.1,m.kr(1,1));

}
);

~x.play;

~x.quant =2;

);


s.reboot;

(
(
	Ndef(\mm).quant= 2.0;
	Ndef(\mm,{Select.kr(Stepper.kr(Impulse.kr(1/4)),[1,1.5,1,1.25,1,2,3,1.5,4,1,1,1])});

	Ndef(\fil).quant= 2.0;
	Ndef(\fil,{Select.kr(Stepper.kr(Impulse.kr(1/2)),1200*[1,1.5,1,1.25,1,2,3,1.5,4,1,1,1]).lag(1)});

	Ndef(\lfo).quant= 2.0;
	Ndef(\lfo,{Splay.kr(SinOsc.kr(1/64/fib(12))).exprange(0.001,1)});
);

SynthDef(\fading,{|freq=432,dur=1,mod =1,amp = 0.5|
	var sig,sig1,sig2,env1,env2;
	mod = Ndef(\mm).kr;
	env1 = EnvGen.ar(Env([0,1,0],[0.002,dur/2*Ndef(\lfo).kr],[3,-3]));
	env2 = EnvGen.ar(Env([0,1,0],[dur/2*Ndef(\lfo).kr,dur],[3,-3]),doneAction:2);
	sig1 = Blip.ar(freq * mod * (1.0001**(1..12)),(2+(amp*10)).round(1),mul:2/(1..12));
	sig2 = LFSaw.ar(freq * mod / 1.5pi * (1.01**(1..12)),mul:1/(1..12));
	sig = (sig1 * env1) + (sig2 * env2);
	sig = RLPF.ar(sig,Ndef(\fil).kr);
	sig = CompanderD.ar(sig,0.4,1,0.25);


	Out.ar(0,Splay.ar(sig,0.5,amp));
}).add;
(
	Pdef(\melod,{
		Ppar([
			Pbind(\instrument,\fading,\dur,Pseq([Pn(1,6),Pn(1/16,64)],inf),\freq,Pseq(([60,60,72,59]+36).midicps,inf),\amp,0.6),
			Pbind(\instrument,\fading,\dur,Pseq([Pn(1/8,6),Pn(1/4,2)],inf),\freq,Pseq(([60,60,72,59]).midicps,inf),\amp,Pwhite(0.3,0.4,inf)),
			Pbind(\instrument,\fading,\dur,Pseq([Pn(2,6),Pn(1/16,32)],inf),\freq,Pseq(([60,60,72,59]+24).midicps,inf),\amp,0.2),
			Pbind(\instrument,\fading,\dur,Pseq([Pn(8,6),Pn(1/16,32)],inf),\freq,Pseq(([60,60,72,59]-12).midicps,inf),\amp,0.1),
			Pbind(\instrument,\fading,\dur,Pseq([Pn(16,6),Pn(1/16,32)],inf),\freq,Pseq(([60,60,72,59]-36).midicps,inf),\amp,0.4)
		])
	}).play(quant:2);
);

(
	Ndef(\dark_kick).quant = 16.0;
	Ndef(\dark_kick).fadeTime = 0.02;

	Ndef(\dark_kick,{Splay.ar(
		FreeVerb.ar(
			CombN.ar(
				SinOsc.ar(LFSaw.ar([4.4,5.5]).range(44,99)) * LFPulse.ar(4/[1,2,4,8]);
				,0.02,0.133,0.5)
			,0.33,2,0.75)
	)}).play;
);

(
	Ndef(\highfreq).fadeTime = 8.0;
	Ndef(\highfreq).quant = 16.0;
	Ndef(\highfreq,{
		Splay.ar(
			AllpassN.ar(
				HPF.ar(
					SinOsc.ar(Decay.ar(Impulse.ar(44/fib(8)),0.0015+SinOsc.ar(1/4/(1.0001**(1..8)))).range(5,11000),mul:0.12) * Decay.ar(Impulse.ar(16/fib(8)),0.5)
					,3000)
				,0.025,4,8)
			,0.5,1)}).play;
	Ndef(\highfreq).mold(2);
);

)

//more like "The Cure trapped in a room full of instruments, year 3015"

(
~q.quant=2;
~q.fadeTime=4;
~q={
	var sig,tb,env,sig2;
	sig = WhiteNoise.ar(1!8) + LFSaw.ar([44,44.1]*(_*2!8)*(1.0001**(1..8))) + SinOsc.ar([8800,880.3*1.5,440.2,4400.1]);

	sig = BPF.ar(sig,110*(1..12),LFSaw.ar(1/32/fib(8)).exprange(0.01,1.0001)**5 ,mul:LFSaw.ar(1/32/fib(8)).range(0.001,1)**3 );


	sig = CompanderD.ar(sig,0.75,1/4,1/10);
	tb = Impulse.ar(1/32/fib(8),0.5);
	env = EnvGen.ar(Env([0.001,1,0.0001],[0.002,6],[3,-3]),tb);
	sig = SinOsc.ar(50!2*(env**(0.02)+1)) * env + sig;

	sig = FreeVerb.ar(sig,0.1*(1..5),10.5/(1..5));

	Splay.ar(sig,0.1,0.5);
};
~q.play;
)

s.boot;

(
var tempo = 100/60;

Ndef(\z).quant = 2 / tempo;
Ndef(\z).fadeTime = 1;


Ndef(\z,{|freq = 440|
	Splay.ar(
		CombN.ar(
			LFTri.ar(freq.lag(0.01)*[1,0.5],{ExpRand()}!16,mul:SinOsc.kr((_*0.1!16)).range(0.01,0.1))
			,delaytime:(4/tempo),decaytime: tempo*4)
	)
}).play;

Ndef(\z)[1] = \set -> Pbind(
	\dur, 1 / 4 / tempo,
	\freq, Pxrand([
		Pxrand((20+[0,3,7,10]).midicps,4),
		Pxrand((30+[0,3,7,10]).midicps,4),
		Pxrand((40+[0,4,7,11]).midicps,4),
		Pxrand((50+[1,4,7,11]).midicps,4),
		Pxrand((60+[1,4,8,11]).midicps,4),
	]*2,inf),
	\amp, Pwhite(0.5,1.0),
);



Ndef(\d).quant = 2 / tempo;
Ndef(\d).fadeTime = 1;


Ndef(\d,{|freq = 440|
	Splay.ar(
		CombN.ar(
		LFCub.ar(freq*[1,1],{ExpRand()}!16,mul:SinOsc.kr((_*0.01!16)).range(0.01,0.1))
			,delaytime:(2/tempo),decaytime: tempo*2)
	)
}).play;

Ndef(\d)[1] = \set -> Pbind(
	\dur, 1 / 2 / tempo,
	\freq, Pxrand([
		Pxrand((20+[0,3,7,10]).midicps,2),
		Pxrand((30+[0,3,7,10]).midicps,2),
		Pxrand((40+[0,4,7,11]).midicps,2),
		Pxrand((50+[1,4,7,11]).midicps,2),
		Pxrand((60+[1,4,8,11]).midicps,2),
	],inf),
	\amp, Pwhite(0.5,1.0),
);



Ndef(\y).quant = 2 / tempo;
Ndef(\y).fadeTime = 1;


Ndef(\y,{|freq = 440|
	Splay.ar(
		CombN.ar(
		LFCub.ar(freq*[1,1],{ExpRand()}!16,mul:SinOsc.kr((_*0.001!16)).range(0.01,0.1))
			,delaytime:(1/tempo),decaytime: tempo)
	)
}).play;

Ndef(\y)[1] = \set -> Pbind(
	\dur, 2 / 1 / tempo,
	\freq, Pxrand([
		Pxrand((20+[0,3,7,10]).midicps,1),
		Pxrand((30+[0,3,7,10]).midicps,1),
		Pxrand((40+[0,4,7,11]).midicps,1),
		Pxrand((50+[1,4,7,11]).midicps,1),
		Pxrand((60+[1,4,8,11]).midicps,1),
	]/2,inf),
	\amp, Pwhite(0.5,1.0),
);


)



(
    Ndef(\bass).fadeTime = 2.0;
    Ndef(\bass).quant = 2.0;
    Ndef(\bass,{
        Splay.ar(
            AllpassN.ar(
                LPF.ar(
                    SinOsc.ar(Decay.ar(Impulse.ar(8/fib(8)),0.0015).range(43,5)+55,mul:0.2) * Decay.ar(Impulse.ar(8/fib(8)),0.5)
                    ,1000)
                ,0.25,4,8)
            ,0.5,1)}).play;
    Ndef(\bass).mold(2);
)

(
    Ndef(\highfreq).fadeTime = 2.0;
    Ndef(\highfreq).quant = 2.0;
    Ndef(\highfreq,{
        Splay.ar(
            AllpassN.ar(
                HPF.ar(
                    SinOsc.ar(Decay.ar(Impulse.ar(44/fib(8)),0.0015+SinOsc.ar(1/4/(1.0001**(1..8)))).range(5,11000),mul:0.12) * Decay.ar(Impulse.ar(16/fib(8)),0.5)
                    ,3000)
                ,0.025,4,8)
            ,0.5,1)}).play;
    Ndef(\highfreq).mold(2);
)


s.boot;

(
Ndef(\conv,{
	var sig1,sig2;
	sig1 = RLPF.ar(WhiteNoise.ar(1!2),LFSaw.ar(1/8/[1,2,4,8]).range(22,22000));
	sig2 = LFSaw.ar(TExpRand.ar(22,22000,Impulse.ar(1/8/[1,2,4,8]!16)).round(43.2).lag(8*[1,2,4,8]) );

	sig1 = Normalizer.ar(sig1) /32;
	sig2 = Normalizer.ar(sig2) /32;

	Splay.ar(
		Compander.ar(
			CombN.ar(
				Convolution.ar(sig1,sig2,1024,0.5)
				,1,1.001,32)
			,0.25,1,1/10) * LFSaw.ar(1/8/[1,2,4,8]).exprange(0.001,1)
	);

}).play;
)
s.reboot;

(
SynthDef(\oscill,{|freq = 440,amp=0|
	Out.ar(0,SinOsc.ar(freq,mul:amp));
}).add;
)

(
~efx.fadeTime=4;
~efx.quant=2;
~efx={
	var sig;

	sig = CompanderD.ar(~tone.ar,0.5,1/1.5,1/10);
	sig = sig + CompanderD.ar(~subtone.ar,0.5,1,1/10);
	sig = PitchShift.ar(sig,0.02,SinOsc.ar(1/[4,8,16,32]).range(0.95,1.05));



	sig = sig + CompanderD.ar(~hiss.ar,0.5,1,1/10);
	sig = sig + CompanderD.ar(~kick.ar,0.5,1,1/10);


	sig = Vibrato.ar(sig,[5,6,7,6,8],0.02).distort;
	sig = FreeVerb.ar(sig,0.13,1.5*(1.001**(1..8)));
	Splay.ar(sig,0.4);
};
~efx.play;
);

//////////////////////////////////////

(

(
// ~a.play;
~kick.quant=4;
~kick = {
	var env,fenv,sig,t,sel,tone;
	sel = Duty.kr(4,0,Dseq([1,1.25,1.125,1.5,2,4],inf));

	t = Impulse.ar(1/2,1/4*[0,1,1.25,2,3,3.25,3.75]);
	env = Decay.ar(t,TExpRand.ar(0.5,1.75,t));
	fenv = Decay.ar(t,TExpRand.ar(0.002,0.15,t)).exprange(0.0001,1.01+(sel*1000.0));


	sig = SinOsc.ar(43.2+fenv,mul:0.85) * env;
	sig = LPF.ar(sig,4000);
	// sig = Resonz.ar(sig,43.1,mul:2);
	sig = CompanderD.ar(sig,0.75,1,1/10);

	Splay.ar(sig,0.4);
};
);

(
// ~hiss.play;
~hiss.quant=4;
~hiss = {
	var env,fenv,sig,t,sel,tone;
	sel = Duty.kr(1/4,0,Dseq([1,1.125,2],inf));

	t = Impulse.ar(1/2,1/4*[0.5,1.5,2.5,3.25,3.5,3.75]);
	env = Decay.ar(t,TExpRand.ar(0.15,0.5,t));
	fenv = Decay.ar(t,TExpRand.ar(0.02,0.15,t)).exprange(1000.0001,10.01+(sel*10000.0));

	sig = WhiteNoise.ar(0.1!2) * env;
	sig = RHPF.ar(sig,fenv);
	sig = CompanderD.ar(sig,0.75,1,1/10);

	Splay.ar(sig,0.4);
};

);

(
// ~tone.play;
~tone.quant=4;
~tone = {
	var env,fenv,sig,t,sel,tone;
	sel = (60+[5,7,9,-7,4,-12,-24,12,24,12,-24,-48]+36).scramble;
	sel = sel + LFNoise0.ar(1/4/[1,2,4,8,16,32,64,128,256]).range(-48,24).round(12);

	t = Impulse.ar(1/8,1/16*[0,1,2,3]);
	env = Decay2.ar(t,0.25,TExpRand.ar(0.5,0.95,t));
	fenv = Decay.ar(t,TExpRand.ar(0.02,0.5,t)).exprange(10.01+(1500.0),10.0001);

	sig = SinOsc.ar(sel.midicps*(1.00001**(1..8))+SinOsc.ar([4,5,6,7],0,4),mul:0.025) * LFSaw.ar(1/4/[1,2,4,8,16,32,64,128,256]).exprange(0.01,1.0);
	sig = Resonz.ar(sig,fenv) * LFSaw.ar(1).exprange(1.001,0.5);
	sig = CompanderD.ar(sig,0.5,1/1.5,1/10);

	Splay.ar(sig,0.4);
};

);

(
// ~subtone.play;
~subtone.quant=4;
~subtone = {
	var env,fenv,sig,t,sel,tone;
	sel = (60+[5,7,9,24,48]-24).scramble;
	sel = sel + LFNoise0.ar(1/4/[1,2,4,8,16,32,64,128,256]).range(-24,48).round(12);

	t = Impulse.ar(1/8,1/4*[0,1,2,3]);
	env = Decay2.ar(t,0.25,TExpRand.ar(0.5,0.95,t));
	fenv = Decay.ar(t,TExpRand.ar(0.02,1.5,t)).exprange(10.01+(150.0),10.0001);

	sig = LFSaw.ar(sel.midicps*(1.0001**(1..8)),SinOsc.ar(1/4/[4,5,6,7],0,8pi),mul:0.75) * LFSaw.ar(1/4/[1,2,4,8,16,32,64,128,256]).exprange(0.01,1.0);
	sig = BBandPass.ar(sig,fenv*SinOsc.ar(1/4/(1..8)).range(1,0.1) )  * LFSaw.ar(1).range(1.001,0.55);
	sig = CompanderD.ar(sig,0.5,1/1.5,1/10);

	Splay.ar(sig,0.4);
};

);
)



(
~a.play;
~a.quant=4;
~a = {
	var env,fenv,sig,t,sel,tone;
	sel = Duty.kr(4,0,Dseq([1,1.25,1.125,1.5,2,4],inf));

	t = Impulse.ar(1/4,1/4*[0,1,1.25,2,3,3.25,3.75]);
	env = Decay.ar(t,TExpRand.ar(0.5,1.75,t));
	fenv = Decay.ar(t,TExpRand.ar(0.2,0.15,t)).exprange(0.0001,1.01+(sel*1000.0));

	sig = SinOsc.ar(44+fenv,mul:0.85) * env;
	sig = CompanderD.ar(sig,0.75,1,1/10);

	Splay.ar(sig,0.1);
};
)

(
~hiss.play;
~hiss.quant=4;
~hiss = {
	var env,fenv,sig,t,sel,tone;
	sel = Duty.kr(1/2,0,Dseq([1,1.125,2,4],inf));

	t = Impulse.ar(1/4,1/4*[0.5,1.5,2.5,3.5]);
	env = Decay.ar(t,TExpRand.ar(0.15,0.5,t));
	fenv = Decay.ar(t,TExpRand.ar(0.02,0.15,t)).exprange(100.0001,10.01+(sel*5000.0));

	sig = WhiteNoise.ar(0.2!2) * env;
	sig = HPF.ar(sig,fenv);
	sig = CompanderD.ar(sig,0.75,1,1/10);

	Splay.ar(sig,0.1);
};

)

(
~tone.fadeTime=4;
~tone.play;
~tone.quant=4;
~tone = {
	var env,fenv,sig,t,sel,tone;
	sel = (60+[5,7,9,4,-7,-12,-24,12,24,12,-24,-48]+36).scramble;

	t = Impulse.ar(1/8,1/16*[0,1,2,3]);
	env = Decay2.ar(t,0.25,TExpRand.ar(0.5,0.95,t));
	fenv = Decay.ar(t,TExpRand.ar(0.02,0.5,t)).exprange(10.01+(15000.0),10.0001);

	sig = SinOsc.ar(sel.midicps*(1.00001**(1..8))+SinOsc.ar([4,5,6,7],0,4),mul:0.025) * LFSaw.ar(8/(fib(12))).range(0,1);
	// sig = Resonz.ar(sig,fenv);
	sig = CompanderD.ar(sig,0.5,1/1.005,1/10);

	Splay.ar(sig,0.3);
};

)

(
~subtone.fadeTime=4;
~subtone.play;
~subtone.quant=4;
~subtone = {
	var env,fenv,sig,t,sel,tone;
	sel = Duty.kr(4,0,Dseq((60+[5,7,9,4,-7,-12,-14,24,48]-12).pyramid.scramble,inf));

	t = Impulse.ar(1/8,1/4*[0,1,2,3]);
	env = Decay2.ar(t,0.25,TExpRand.ar(0.5,0.95,t));
	fenv = Decay.ar(t,TExpRand.ar(0.02,1.5,t)).exprange(10.01+(15000.0),10.0001);

	sig = SinOsc.ar(sel.midicps*(1.00001**(1..8)),SinOsc.ar(1/4/[4,5,6,7],0,8pi),mul:0.15) * LFSaw.ar(1/4/(1..8)).range(0,1);
	sig = BBandPass.ar(sig,fenv*SinOsc.ar(1/4/(1..8)).range(1,0.1) );
	sig = CompanderD.ar(sig,0.5,1/1.05,1/10);

	Splay.ar(sig,0.3);
};

)
s.boot;

(
Ndef(\inter).fadeTime = 4.0;
Ndef(\inter).quant = 2.0;

Ndef(\iner,{
	var mod,sig;
	mod = SinOsc.ar(1/111/(1.501**(1..8))).range(4320,43.2).round(43.2);
	sig = SinOsc.ar(mod,mul:0.3) +
	((LFSaw.ar(1/4/[1,2,4,8]).squared * LFSaw.ar(mod/2,mul:0.7) + WhiteNoise.ar(0.2!4)) *
		Pulse.ar(4/fib(12)) ).softclip;

	sig = {|i| BBandPass.ar(sig, SinOsc.ar(11/(1.01**(1..12)).at(i)).range(10000,43.20).round(43.2) ) }!8;
	sig = sig + (SinOsc.ar(43.2+ (43.20/1.5pi*(2.001**(1..8))),mul:0.2) * LFSaw.ar(1/4/[1,2,4,8]).squared);
	sig = CombN.ar(sig,0.0025**(1..8),4,8);
	sig = CompanderD.ar(sig,0.5,1,0.25);
	sig = FreeVerb.ar(sig,0.15,10);


	Splay.ar(
		sig.distort.softclip
		,0.2,0.65)}).play;

)

(
Ndef(\mic).fadeTime = 8.0;
Ndef(\mic).quant = 2.0;

Ndef(\mic,{
	var sig;
	sig = AudioIn.ar([1,1],2).softclip + (WhiteNoise.ar(0.2!4) * Decay.ar(Dust.ar(1/4!4)));
	sig = CompanderD.ar(sig,0.5,1,0.5);

	sig = {|i| BBandPass.ar(sig, SinOsc.ar(sig.range(11,1/4).lag(0.02)/(2.001**(1..12)).at(i)).range(22,1600) ) }!8;

	sig = FreeVerb.ar(sig,0.5,100);

	Splay.ar(
		sig
		,0.2,1)}).play;

)

s.freeAll;
s.boot;

(
Ndef(\a).quant = 2.0;
Ndef(\a).fadeTime = 8.0;
Ndef(\a,{Splay.ar(
	AllpassN.ar(
		//     CombN.ar(
		RLPF.ar(SinOsc.ar(SinOsc.ar(1/4/(1..8)).range(-4,4)+432*(1..12)*((1.0001)**(1..8))/8,mul:1/(1..12)),SinOsc.ar(8/(1..12)).range(22000,44) ) * LFSaw.ar(8/(2**(1..12))).squared
		//       ,MouseX.kr(0.002,1),MouseY.kr(0.002,4),8)
		,0.02*(1..12),4,12)
	,0.2,1)}).play;
)

(
Ndef(\b).quant = 2.0;
Ndef(\b).fadeTime = 2.0;
Ndef(\b,{
	Splay.ar(
		RHPF.ar(
			PinkNoise.ar(0.14!4) * Decay.ar(Impulse.ar(8.1/(1..8)),{ExpRand(0.2,1)}!4)
			,SinOsc.ar(8/(1..8)).range(44,18888))
		,0.2+SinOsc.ar(1/2/[4,5,6,7]).range(0.001,0.5),1)
}).play;
)

(
Ndef(\c).quant = 2.0;
Ndef(\c).fadeTime = 8.0;
Ndef(\c,{Splay.ar(
	AllpassN.ar(
		CombN.ar(
			RLPF.ar(WhiteNoise.ar(0.1!4),SinOsc.ar((1..8)).range(44,12000)) * LFPulse.ar(8/(2**(1..12))).squared
			,MouseX.kr(0.002,1),MouseY.kr(0.002,4),8)
		,0.02*(1..12),4,12)
	,0.5,0.12)}).play;
)


Ndef(\a).stop(30)
Ndef(\b).stop(30)
Ndef(\c).stop(30)


s.boot;

(
Ndef(\b).fadeTime = 8.0;
Ndef(\b).quant = 2.0;
Ndef(\b,{Splay.ar(
	AllpassN.ar(
		LPF.ar(
			Vibrato.ar(
				LFSaw.ar(4320*2*[0.5,1.5,1.25,1,2,0.5,0.25] / 1.5 + (SinOsc.ar(1/[11,22,33,44]).range(-2,2)),mul:0.12) * LFSaw.ar(1/4/(2**(1..8))).squared
				,[4,5,6,7],0.2)
			,LFSaw.ar(4/fib(9)).range(432,4320*4))
		,1,2,8).softclip * 0.1 +
	AllpassN.ar(
		RLPF.ar(
			SinOsc.ar([55,54,432*0.5,432*1.25,432*2,432/4,432/pi] * 1.5,mul:1.5/(1..8)) * LFSaw.ar(2/(2**(1..8))).squared
			,LFSaw.ar(8/fib(8)).range(22,4320*2) )
		,1,2,8).softclip
	,0.5,0.75,0.5)}).play;

)


Ndef(\b).stop(60)
s.reboot;
StageLimiter.activate;

(
Ndef(\low).quant =2.0;
Ndef(\low).fadeTime = 8.0;

Ndef(\low,{Splay.ar(
	CompanderD.ar(
		LPF.ar(
			Pulse.ar(43.2*1.125*(1.00001**(1..16)) + SinOsc.ar(1.00001**(1..8)).range(-0.2,0.2),mul:0.5) * Pulse.ar(4/[1,2,4,8]) +
			SinOsc.ar(43.2*(1..8),mul:0.2/(1..8))
			,VarSaw.ar(1/[1,2,4,8]).range([16000/4,11],[11,16000/4]))
		,0.5,1,0.5)
	,0.5,0.5,0.5)}).play;
)

Ndef(\low).stop(8)

(
Ndef(\puls).quant =2.0;
Ndef(\puls).fadeTime = 8.0;
Ndef(\puls,{
	GVerb.ar(
		CombN.ar(
			//CompanderD.ar(
			CombN.ar(
				Pulse.ar(4/[4,2],SinOsc.ar(1/[3,4]).range(0.14,0.96))
				,0.025,1.02+SinOsc.ar(1/[4,8]),32)
			,0.0224,1.04+SinOsc.ar(1/[8,16]),32) * 0.01
		//,0.85,1,0.5)
		,10)
}).play;
)

Ndef(\puls).stop(8)



s.scope
Ndef(\low).stop(8)

(
Ndef(\high).quant =2.0;
Ndef(\high).fadeTime = 8.0;

Ndef(\high,{

	var mod = Select.kr(Stepper.kr(Impulse.kr(1/4),max:3),[0.75,1.25,1.5,0.5]);
	Splay.ar(
		GVerb.ar(
			RHPF.ar(
				SinOsc.ar(43.20*mod.lag(0.5)*(1.001**(1..16)),mul:0.15)
				,VarSaw.ar(4/[1,2,4,8]).range(1600,22))
		)
		,0.5,1,0.5)}).play;

)

Ndef(\high).stop;


(
Ndef(\mel).quant =2.0;
Ndef(\mel).fadeTime = 8.0;

Ndef(\mel,{

	var mod2 =Select.kr(Stepper.kr(Impulse.kr(16),max:1),[1,2]);

	Splay.ar(
		GVerb.ar(
			RLPF.ar(
				LFSaw.ar(432*(mod*pi)*(mod2+0.00001**((1..8)*(1..8))),mul:0.5/(1..8))
				,VarSaw.ar(1/8/[1,2,4,8]).range(160,44))
			,roomsize:100)
		,0.5,0.25,0.5)}).play;

)

s.boot;

//////////////////////

(
Ndef(\bass,{
	var f;
	Splay.ar(
		f = [55,56,57,58];
		MoogFF.ar(
			LFSaw.ar(f,{ExpRand()}!4)
			,SinOsc.ar(f/1.01).range(f/2,f*2))
	)
}).play;
)

//////////////////////

(
t = Tuning.young;
Ndef(\pinks,{
	Splay.ar(
		f = t.cents.at([1,2,7,11]) * pi * 1.5;
		FreeVerb.ar(
			MoogFF.ar(
				SinOsc.ar(f)
				,SinOsc.ar(f/2048.013).range(f/2,f*2))
			* Decay.ar(Dust.ar([1,2,4,8]/64),8)
		)
	)
}).play;
)

//////////////////////

(
Ndef(\dusts,{
	var trigs;
	Splay.ar(
		FreeVerb.ar(
			trigs = Decay.ar(Dust.ar([1,2,4,8,16,32,64]/64),{ExpRand()*8+1}!8);
			RHPF.ar(WhiteNoise.ar(0.5!8), {ExpRand()*11000}!8) * LFSaw.ar({ExpRand()*75}!8 + (1100*(trigs.exprange(0.001,1)+1))) * trigs
		,0.33,1)
	)
}).play;
)


/////////////////////s.boot;

(
Ndef(\a).quant = 2.0;
Ndef(\a).fadeTime = 2.0;

Ndef(\a,{
	var lfo;
	Splay.ar(
	lfo = SinOsc.kr([0.1,0.2,0.22,0.23]/4.0).range(0,220);

	FreeVerb.ar(
		XFade2.ar(
			LFSaw.ar([55,56,57,58],SinOsc.ar([57,58,59,60]).range(lfo*(-1),lfo)),		SinOsc.ar([55,56,57,58]*1.5,SinOsc.ar([57,58,59,60]).range(lfo*(-1),lfo)),
			SinOsc.kr([0.1,0.23])
		) + SinOsc.ar([55,56,57,220,110,4400])

		*
		Decay.ar(Impulse.ar(8/[1,2,3,5,8,13]),SinOsc.kr([0.1,0.11,0.111,0.1111]).range(0.01,1))
		,0.33,1)
)}).play;
)

//////vole vole :)(

(
Ndef(\a).fadeTime = 4.0;
Ndef(\a).quant = 2.0;
Ndef(\a,{Splay.ar(
	SinOsc.ar([60,62,64].midicps/[1,2,4,8,16]/2+LFSaw.ar(111),mul:0.5)
	* LFSaw.ar(1/4/[1,2,4]).squared;
)});
);

// |
// |   FM 1
// V

(
Ndef(\b).fadeTime = 2.0;
Ndef(\b).quant = 2.0;
Ndef(\b,{Splay.ar(
	SinOsc.ar(Ndef(\a).ar.range(60.midicps/2,60.midicps*[1,2,4,8,16]),mul:0.5)
	* LFSaw.ar(1/16/[1,2,4,8,16]).squared;
)});
);


// |
// |  FM 2
// V


(
Ndef(\c).fadeTime = 2.0;
Ndef(\c).quant = 2.0;
Ndef(\c,{Splay.ar(
	SinOsc.ar(Ndef(\b).ar.range(60.midicps/2,(60-12).midicps*[1,2,4,8,16]*2),mul:0.5)
	* LFSaw.ar(1/16/[1,2,4,8,16]).squared;
)});
);


// |
// |   FM 3
// V


(
Ndef(\d).fadeTime = 2.0;
Ndef(\d).quant = 2.0;
Ndef(\d,{Splay.ar(
	SinOsc.ar(Ndef(\c).ar.range((LFNoise0.ar((1/16)!3).range(30,90).round(11)).midicps.lag([1,2,4])*[1,2,4,8,16],(LFNoise0.ar((1/32)!3).range(30,90).round(11)).midicps.lag([1,2,4])*[1,2,4,8,16]*2),mul:0.5)
	* LFSaw.ar(1/32/[1,2,4,8,16]).squared;
)});
);


// |
// |   filter
// V


(

var num = 16;
var speed = 1/4/[12,18,22,99,0.1];
var sharpness = 0.5;

Ndef(\filtr).fadeTime = 2.0;
Ndef(\filtr,{
	Splay.ar(
		BPF.ar(
			Ndef(\d).ar + SinOsc.ar((1..10)/100.1,mul:0.01)
			,(1..num)*(22000/num)+SinOsc.ar({ExpRand()}!48).range(-40,40),sharpness,SinOsc.ar({ExpRand()*speed}!48).exprange(0.001,8)
		)
		,0.17,1)}).play;
);

)//
// Nebeha???? consola:
// Ndef('filtr')
// late 0.107418287
// exception in GrafDef_Load: exceeded number of interconnect buffers.
// while reading file 'C:\Users\Jachym\AppData\Local\SuperCollider\synthdefs\\temp__0filtr_0.scsyndef'
// exception in GrafDef_Load: exceeded number of interconnect buffers.
// while reading file 'C:\Users\Jachym\AppData\Local\SuperCollider\synthdefs\\temp__0filtr_0.scsyndef'
// *** ERROR: SynthDef temp__0filtr_0 not found
// FAILURE IN SERVER /s_new SynthDef not found
// FAILURE IN SERVER /n_set Node 1011 not found


// ted?

// bohuzel to same?

(

(
Ndef(\a).fadeTime = 4.0;
Ndef(\a).quant = 2.0;
Ndef(\a,{Splay.ar(
	SinOsc.ar([60,62,67].midicps/[1,2,4,8,16]+LFSaw.ar(1),mul:0.5)
	* LFSaw.ar(1/4/[1,2,4]).squared;
)});
);

// |
// |   FM 1
// V

(
Ndef(\b).fadeTime = 2.0;
Ndef(\b).quant = 2.0;
Ndef(\b,{Splay.ar(
	LFSaw.ar(SinOsc.ar(1).range(-10,10)+Ndef(\a).ar.range(60.midicps/2,60.midicps*[1,2,4,8,16]))
	* LFSaw.ar(8/[1,2,3,5,8]*{ExpRand()}!8).squared;
)});
);


// |
// |  FM 2
// V


(
Ndef(\c).fadeTime = 2.0;
Ndef(\c).quant = 2.0;
Ndef(\c,{Splay.ar(
	LFSaw.ar(Ndef(\b).ar.range(60.midicps/2,(60-24).midicps*[1,2,4,8,16]*2))
	* LFSaw.ar(16/[1,2,3,5,8,13]).squared;
)});
);


// |
// |   FM 3
// V


(
Ndef(\d).fadeTime = 2.0;
Ndef(\d).quant = 2.0;
Ndef(\d,{Splay.ar(
	SinOsc.ar(Ndef(\c).ar.range((LFNoise0.ar((1/16)!3).range(30,90).round(12)).midicps.lag([1,2,4])*[1,2,4,8,16],(LFNoise0.ar((1/32)!3).range(30,90).round(12)).midicps.lag([1,2,4])*[1,2,4,8,16]))
	* LFSaw.ar(1/4/[1,2,4,8,16]).squared;
)});
);


// |
// |   filter
// V


(
var num = 8;
var speed = 1/4/[12,18,22,99,0.1];
var sharpness = 0.5;

Ndef(\filtr).fadeTime = 2.0;
Ndef(\filtr,{
	Splay.ar(
		BPF.ar(
			Ndef(\d).ar + SinOsc.ar((1..num-1)/100.1,mul:0.01)
			,(1..num-1)*(22000/(num+1))+SinOsc.ar({ExpRand()}!8).range(-40,40),sharpness,SinOsc.ar({ExpRand()*speed}!8).exprange(0.001,48)
		)
		,0.17,1)}).play;
);

)(
Ndef(\a).quant = 2.0;
Ndef(\a).fadeTime = 2.0;
Ndef(\a,{
	var mod,a;
	mod = Select.kr(Stepper.ar(LFSaw.ar(1/2/[2,4,8,16,32,64])),[1,2,1.5,2,3,2,1.25,4,8]);
	a = RLPF.ar(
		BBandStop.ar(
			LFSaw.ar(1/2/[2,4,8,16,32,64]).squared *
			SinOsc.ar([432/4,432/16,432/8]/(mod/2pi),LFTri.ar(1/[2,4,8,16]).range(-1,1)) +
			LFSaw.ar([7777,7777]/(mod/2pi),mul:0.05) * LFPulse.ar(4*[1,2,2,4]).squared
			,LFNoise0.ar(8!8).range(22,18000).lag(1/8),0.21) * 0.5
		,18000) +
	HPF.ar(WhiteNoise.ar(LFSaw.ar(1/4/[1,2,3,8]).squared*0.1),8000+LFNoise0.ar(4!4).range(0,8000));

	Splay.ar(
		// GVerb.ar(
		LPF.ar(
			// CombN.ar(
				Compander.ar(a,a,0.5,1,0.33,0.01,0.01)
				// ,1,0.5,16)
			,18000)
			// ,2,3,drylevel:1,mul:0.2)
).clip(-0.99,0.99)}).play;
)s.boot;
(
Ndef(\kick).quant = 2.0;
Ndef(\kick).fadeTime = 2.0;
Ndef(\kick,{
	var filt;
	filt = Select.kr(Stepper.kr(Impulse.kr(1/[1,2,4,8]),max:4),[400,1000,2000,800,400]).lag(0.01);
	Splay.ar(
		FreeVerb.ar(
			AllpassC.ar(
				Pan2.ar(
					LPF.ar(Ringz.ar( SinOsc.ar([77,77.01]) + BrownNoise.ar(0.2!2) * Decay.ar(Impulse.ar(8/[1,1.5,3,2]),0.25), filt, 0.015 ),LFSaw.kr(1/8/[1.01,2.02]).range(44,2200)) -
					HPF.ar((WhiteNoise.ar(0.5!4) * Decay.ar(Impulse.ar(4/[1,3,4,2]),0.35)),2200) -
					(SinOsc.ar(([61,57,67]-12).midicps) * LFSaw.ar(1/8/[1,2,3,5,8]))
					,SinOsc.ar(0.5).range(-0.5,0.5))
				,1.33,0.0133,2)
			,0.133,1).softclip;
		)

}).play;
)

s.reboot;
(
Ndef(\setOsc).quant = 2.0;
Ndef(\setOsc,{
	var set;
	set = [1,2,4,8,16,32,64,128,256,512,1024,2048] * 8888;

	Splay.ar(
		BPF.ar(
			LFSaw.ar(11+((1..1000)/set),mul:0.125)
			,m.kr(0,1)*22000)
		,1,1)
}).play;
)

s.scope;


(
Ndef(\pulsar).quant = 2.0;
Ndef(\pulsar).fadeTime = 2.0;
Ndef(\pulsar,{
	var z;
	z = SinOsc.ar((1..10)*0.513,LFTri.ar([45,45]),mul:0.35);

	Splay.ar(

		Compander.ar(
		z,z,0.5,1,0.01
		)
	).clip(-1,1)
}).play;

)
// nice trick  "CTRL + /" to comment out line.. nice for livecoding

(
Ndef(\a).fadeTime = 1.0;
Ndef(\a).quant = 1;
Ndef(\a,{|tempo = 1,sel = 4|



	//////// signal ////////////
	var s;
	s =
	SinOsc.ar(44) +
	CombN.ar((LFPulse.ar(tempo*1/[1,4,2,3],[0,0.25,0,0.25]))) *
	Pulse.ar(tempo*4/[1,2,3,4]) +
	Vibrato.ar(LFCub.ar(4320/(pi*sel)*([1.5,16,8,1.5,8,16,32]),mul:0.75) * LFSaw.ar(1/4/[4,8,16,32,64,128]).squared,[4,5,6,7],0.2) +
	(SinOsc.ar([77,99]) + SinOsc.ar([4320,4320*2pi,4320/2pi],mul:0.2) * Decay.ar(Impulse.ar(1/4/[1,2,4]))) +
	0;

	////////// band pass /////////////


	s = BBandPass.ar(s,LFNoise0.ar(4!2).range(44,4320*2),1,mul:0.5,add:s);

	///////// add hisses /////////////

	s = s + RHPF.ar(Decay.ar(Impulse.ar(tempo*4/[1,2,4,8]),LFNoise0.ar(4!4).range(0.01,0.2)) * WhiteNoise.ar(0.5!4),LFNoise0.ar(4!4).range(432,16000));

	////////// compressor ///////////

	s = Compander.ar(s,s,0.75,1,0.25,0.01,0.01);

	Splay.ar(s).clip(-1,1)};

).play;

// Ndef(\a)[1] = \filter -> {|in| GVerb.ar(in,5,mul:0.25) + (in/3*2)};
)



///// post-param mods

Ndef(\a).lag(\sel,0.02,\tempo,4);
Ndef(\a).set(\sel,16);

// Ndef(\ctla,{SinOsc.ar(1/16/[1,2]).range(1,8).round(2)});
// Ndef(\ctla).quant = 2.0;
// Ndef(\ctla).fadeTime  = 4.0;
// Ndef(\a).map(\sel,Ndef(\ctla));

Ndef(\a).set(\tempo,1);
Ndef(\a).set(\sel,16);


s.reboot;

(
    // synchro odpal
    Ndef(\b).quant = 2.0;
    Ndef(\b).fadeTime = 2.0;

    Ndef(\b,{
	var pat,freqs;
        pat = [1,2,3,5,8,13,21,34,55,89];
        freqs = [34,30,20,56,82,106,126,111].midicps;
        Splay.ar(
            RLPF.ar(
                2 * Blip.ar(freqs  + LFNoise0.ar(12!4).range(-4,4).lag(0.01),2) * Decay.ar(Impulse.ar([8,4]/pat), pat/5)
                ,freqs)
            )
        }).play;

)
(
Ndef(\first).quant = 2.0;
Ndef(\first,{Splay.ar(
	LFSaw.ar([432,432.1,432.13,432.14]/3pi) * LFSaw.ar([1.5,1,1,8].scramble).squared
)}).play;
)

(
Ndef(\second).quant = 2.0;
Ndef(\second,{Splay.ar(
	SinOsc.ar([432,432.1,432.13,432.14] / 1.25pi) * LFSaw.ar([1.5,1,1,8].scramble).squared
)}).play;
)

Ndef(\second).stop(5)


(
Ndef(\third).fadeTime = 2.0;
Ndef(\third).quant = 2.0;
Ndef(\third,{Splay.ar(
	GVerb.ar(
		SinOsc.ar([432,432.1,432.13,432.14] /  ([4,1.5,1.25,1,0.5,1.25] * 1.5pi) ) * LFSaw.ar(1/16/[1,2,4,8].scramble).squared
	,20,3,0.2)

)}).play;
)


Ndef(\third).stop(5)






(
Ndef(\third).fadeTime = 2.0;
Ndef(\third).quant = 2.0;
Ndef(\third,{Splay.ar(
	GVerb.ar(
		LPF.ar(
		WhiteNoise.ar(0.6!4) * Decay.ar(Impulse.ar(2/[1,2,3,5,8,13]),0.1)
			,LFNoise0.ar(1!4).range(44,22000))
			,10,3,0.2)

)}).play;
)


(
Ndef(\new).fadeTime = 2.0;
Ndef(\new).quant = 2.0;
Ndef(\new,{
	Splay.ar(
		Vibrato.ar(
			LFSaw.ar(LFSaw.ar([32/[1,2,3,5,13,21]]).range(4320*2,1)) * Decay.ar(Impulse.ar(8/[1,2,3,5,13,21]))
			,[4,5,6,7],0.1)
	,1,0.1)
}).play;

)

Ndef(\new).stop(10)


(
Ndef(\quar).quant = 2.0;
Ndef(\quar,{Splay.ar(
	LFSaw.ar([432,432.1,432.13,432.134]/1.5pi) * Decay.ar(Impulse.ar([4,2,1,4]))
)}).play;
)

NdefMixer(s);
(
var sec = 2;
var rate = 48000;
)

(
// allocate a buffer for writinig into
s = Server.local;
s.sendMsg("/b_alloc", 0, rate * sec,2);
)


//write into the buffer with a BufWr (still overwriting)
(

var recspeed = [1,1];

Ndef(\rec).quant = 2.0;
Ndef(\rec,{
	var mod,sig;
	mod = Select.kr(Stepper.kr(Impulse.kr(1/[1,2,4,8])),[4,8,2,4,8,2,4,8,1,4,8,1.5]).lag(0.1);
	sig = Splay.ar(
		 LFPulse.ar([1,2,4,8]).squared * SinOsc.ar(4320/([2pi,8pi,1.5pi,4pi,16pi,32pi]*mod));
	,0.5,1);

	BufWr.ar(sig, 0, LFSaw.ar(1/sec*recspeed).range(0,rate * sec));

	0; // zero output
}).play;
)

// no sound so far just rec


///////////////////////////////////////// VV


//read it with a BufRd
(
var speed = [0.5,2];

Ndef(\play).fadeTime = 2.0;
Ndef(\play).quant = 2.0;

Ndef(\play,{
	Splay.ar(
		FreeVerb.ar(
			    BufRd.ar(2, 0, LFSaw.ar(1/sec*speed,mul:rate*sec)) * 0.5 * LFPulse.ar(8/[1,2])
		)
	).clip(-1,1)
}).play;
)

(
Ndef(\dude_say,{
	var dust;
	dust = Impulse.ar(8/[1,2,4,8]+LFNoise0.ar(8).range(0.001,0.002));
	Splay.ar(
		GVerb.ar(
		AllpassC.ar(
				(WhiteNoise.ar(SinOsc.ar(0.1).range(0.01,0.2))*LFPulse.ar(8/[1,2,4,8])) +
				(Gendy1.ar(1,1,1,1,22,880,mul:0.01) * LFPulse.ar(8/[1,2,4,8])) +
			SinOsc.ar(LFPulse.ar(dust).exprange(1.00001,45.00001)) * Decay.ar(dust,0.33)
			,1.5,0.0033 + dust/100.0+(SinOsc.ar([4.4,5.5]).abs/10000.0),1.5)
			,2,3,0.5,0.5,SinOsc.kr(0.11).range(10,30),SinOsc.kr(0.0011).range(0.01,0.9),SinOsc.kr(0.011).range(0.01,0.9),SinOsc.kr(0.01).range(0.01,0.9))
)}).play;
)


//hawt! love the name *_*
s.boot;

(
t = Tuning.harmonic;

Ndef(\a).fadeTime = 2.0;
Ndef(\a).quant = 2.0;

Ndef(\a,{
	var change,n,f;
	Splay.ar(
	change = LFSaw.kr(1/2/[1,2,3,4,8,16,32]).range(1,8).round(2);

	n = t.cents.at([1,2,7,11,7,2,1]) / 3.141528;
	f = n / change + SinOsc.kr((_*0.1!4)).range(-2,2);

	FreeVerb.ar(
		XFade2.ar(
			RHPF.ar(
				SinOsc.ar(f),
				SinOsc.ar(f/(256..260)).range(f/2,f*2)
			),
			RLPF.ar(
				LFSaw.ar(f),
				SinOsc.ar(f/(512..516)).range(f/2,f*2)
			),
			SinOsc.kr([0.01,0.02,0.04,0.05])
		)
		* Decay.ar(Impulse.ar(4/[1,2,3,5,8,13,21,34]),[1,2,2,4,8,8,16]) +

		(WhiteNoise.ar(SinOsc.kr((_*0.01!4)+0.01).range(0.01,0.2)) * Decay.ar(Impulse.ar(8/[1,2,3,5,8,13,21]),Decay.kr(Dust.kr([1,2,4,8])*4)))

		,0.333,2,0.2,0.8)

)}).play;
)



///////////////////////////////////////////////////////////////
(
Ndef(\bass).quant = 2.0;
Ndef(\bass,{
	var s,base,r;
	s = Select.kr(Stepper.kr(Impulse.kr(1/4),max:8),[1.5,1.5,1.25,1.125,1,1.5,1.25,1.125,0.5]*1pi).lag(0.5);
	base = [432,432/1.5] / s;
	r = 1/2/[1,2,4,8,16,32];
	Splay.ar(
		Resonz.ar(
			LFSaw.ar(Decay.ar(Impulse.ar(r)).range(base,[3.1,3])) * Decay.ar(Impulse.ar(r*8),0.75)
			,Decay.ar(Impulse.ar(r*2)).range([3.1,3.2],base))
)}).play;

Ndef(\bass)[1] = \filtera -> {|in| AllpassC.ar(Vibrato.ar(in,[4,5,6,7],0.5),2,0.0133,2)};
)

///////////////////////////////////////////////////////////////

(
Ndef(\mid).quant = 2.0;
Ndef(\mid,{
	var s,base,r;
	s = Select.kr(Stepper.kr(Impulse.kr(1/4),max:8),[1.5,1.5,1.25,1.125,1,1.5,1.25,1.125,0.5]*1pi).lag(0.5);
	base = [432,432/1.5] / s * 4;
	r = 1/2/[1,2,4,8,16,32];
	Splay.ar(
		Resonz.ar(
			SinOsc.ar(Decay.ar(Impulse.ar(r)).range(base,[3.1,3])) * Decay.ar(Impulse.ar(r*8),0.75)
			,Decay.ar(Impulse.ar(r*2)).range([3.1,3.2],base))
)}).play;

Ndef(\mid)[1] = \filterb -> {|in| AllpassC.ar(Vibrato.ar(in,[4,5,6,7],0.5),2,0.0133,2)};
)

///////////////////////////////////////////////////////////////
(
Ndef(\high).quant = 2.0;
Ndef(\high).fadeTime = 4.0;
Ndef(\high,{
	var f;
	Splay.ar(
	f = [1,1.25,2,1.125] * 432 * [1.25,1.5,0.25,1.5,0.5] * Select.kr(Stepper.kr(Impulse.kr(1/16/[1,2,3,5,8])),[1,2,4,2,1.5,1.25,1,2,4]*pi);
	SinOsc.ar([f,f+0.1]) * LFSaw.ar(1/16/[1,2,3,5,8],mul:0.25).squared * Decay.ar(Impulse.ar(16/[1,2,3,8,5]),0.15)

)}).play;
Ndef(\high)[1] = \filterc -> {|in| AllpassC.ar(Resonz.ar(Vibrato.ar(in,[4,5,6,7],0.15),f,SinOsc.ar(1/32/[1,2,4,8,16]).range(0.02,3)),0.2,0.133,1)};
)

///////////////////////////////////////////////////////////////
(
Ndef(\bck).quant = 2.0;
Ndef(\bck).fadeTime = 4.0;
Ndef(\bck,{
	var f;
	Splay.ar(
	f = [1,1.25,2,1.125] * 432 * [1.25,1.5,0.25,1.5,0.5] / Select.kr(Stepper.kr(Impulse.kr(1/16/[1,2,3,5,8])),[1,2,4,2,1.5,1.25,1,2,4]*pi);
	LFSaw.ar([f,f+0.1]) * LFSaw.ar(1/16/[1,2,3,5,8],mul:0.1725).squared * Decay.ar(Impulse.ar(8/[1,2,3,8,5]),0.75)

)}).play;
Ndef(\bck)[1] = \filterd -> {|in| AllpassC.ar(Resonz.ar(Vibrato.ar(in,[4,5,6,7],0.15),f,SinOsc.ar(1/16/[1,2,4,8,16]).range(0.02,3)),0.2,0.133,1)};
)

///////////////////////////////////////////////////////////////
(
Ndef(\kick).quant = 2.0;

Ndef(\kick,{
	var r;
	r = 4/[1,2,4];
	Splay.ar(
		CombN.ar(
			Vibrato.ar(LFPar.ar(Decay.ar(Impulse.ar(r),1/r).range(133.33,[43,44]),mul:0.1735),[4,5,6,7,8],0.2) * Decay.ar(Impulse.ar(r),1/r)
			,1,0.02+(LFNoise1.ar(1!4).lag(0.25)/10000.0),1.5)
)}).play;
)

///////////////////////////////////////////////////////////////

(
Ndef(\hat).quant = 2.0;
Ndef(\hat).fadeTime = 2.0;

Ndef(\hat,{
	var r;
	r = 8/[1,2,3,8];
	Splay.ar(
		CombN.ar(
			Vibrato.ar(BPF.ar(WhiteNoise.ar(1!2),LFNoise1.ar(1!4).range(2000,12000).round(1000).lag(0.1),mul:0.1235),[5,6,7,8],0.7) * Decay.ar(Impulse.ar(r),1/r)
			,1,0.25+LFNoise1.ar(1!4).range(0.25,1).round(0.125),4)
)}).play;
)



///////////////////////////////////////////////////////////////


(
Ndef(\whales).quant = 2.0;
Ndef(\whales).fadeTime = 2.0;

Ndef(\whales,{
	var r;
	r = 1/8/[1,2,3,8];
	Splay.ar(
		CombN.ar(
			SinOsc.ar((LFSaw.ar(4/[1,2,4,8])).squared.range(2200,22000),LFNoise1.ar(16!4).range(-8pi,8pi).round(0.1).lag(0.5),mul:0.25) * Decay.ar(Impulse.ar(r),1/r)
			,1,0.25+LFNoise1.ar(1!4).range(0.25,1).round(0.125),4).distort
)}).play;
)

/////////////////////////////////////////////////////////////////

//this is great!
/////////
(
Ndef(\y).fadeTime = 5.0;
Ndef(\y).quant = 2.0;

Ndef(\y,{
	var f1,f2;
	Splay.ar(
	f1 = Decay.ar(Impulse.ar(8/[1,2,3,5,8]),{ExpRand()*1}!5);
	f2 = Decay.ar(Impulse.ar(1/2/[1,2,3,5,8]),{ExpRand()/4.0}!5);
	AllpassC.ar(
	LPF.ar(
	Vibrato.ar(
				LFSaw.ar(f2.range(432/8,43200/2)+SinOsc.ar((1..5)),mul:1.5) * f1;
		,[4,5,6,7],0.2)
		,432/8+f2.range(0,4320/2))
		,(1..10)/10.0,(1..10)/1000.0,1,0.5)

)}).play;
)

///////

(
Ndef(\x).fadeTime = 5.0;
Ndef(\x).quant = 2.0;

Ndef(\x,{
	var f1,f2;
	Splay.ar(
	f1 = Decay.ar(Impulse.ar(8/[1,2,3,5,8]),{ExpRand()/2.0}!5);
	f2 = Decay.ar(Impulse.ar(4/[1,2,3,5,8]),{ExpRand()/2.0}!5);
	AllpassC.ar(
	LPF.ar(
	Vibrato.ar(
				WhiteNoise.ar(0.33!5) * f1;
		,[4,5,6,7],0.2)
		,432/8+f2.range(4320*4,0))
		,(1..10)/10.0,(1..10)/1000.0,4,0.5)

)}).play;
)


/////////

(
Ndef(\z).fadeTime = 5.0;
Ndef(\z).quant = 2.0;

Ndef(\z,{
	var f1,f2;
	Splay.ar(
	f1 = Decay.ar(Impulse.ar(8/[1,2,3,5,8]),0.5);
	f2 = Decay.ar(Impulse.ar(1/2/[1,2,3,5,8]),1);
	AllpassC.ar(
	LPF.ar(
	Vibrato.ar(
		SinOsc.ar([432,432.01*1.5,432/2,432/2*3]/8.0+LFNoise1.ar((1..16)).range(-1,1).lag((1..16))-f2.range(0,-432/4),0,0.75).lag(f2/1000.0) * f1;
		,[4,5,6,7],0.2)
		,432/8+f2.range(4320*2,0))
		,(1..10)/100.0,(1..10)/1000.0,1,0.5)

)}).play;
)

/////////


(
Ndef(\a).fadeTime = 15.0;
Ndef(\a,{
	var f;
	Splay.ar(
	f=  Select.kr(Stepper.kr(Impulse.kr(1/16/[1,2,3,5,8,13,21,34,55])),[1,2,1.5,1.25,1,1.125,0.5,0.25,0.125] / 0.5pi);
	Vibrato.ar(

			LFSaw.ar(1/16/[1,2,3,5,8,13,21,34,55]).squared * LFSaw.ar([432,432.01,432/1.5,432/2,432/4,432/8] / f +({ExpRand()/3.0}!16)+LFNoise1.ar((1..16)).range(-5,5).lag(4),SinOsc.ar((1..16)/640).range(-pi,pi),0.133)
		,(1..16),0.2)

	)}).play;
)


/////////

(
Ndef(\b).fadeTime = 15.0;
Ndef(\b,{
	var f;
	Splay.ar(
	f=  Select.kr(Stepper.kr(Impulse.kr(1/16/[1,2,3,5,8,13,21,34,55])),[1,2,1.5,1.25,1,1.125,0.5,0.25,0.125]/1.5pi);
	Vibrato.ar(

			LFSaw.ar(1/16/[1,2,3,5,8,13,21,34,55]).squared * SinOsc.ar([432,432.01,432/1.5,432/2,432/4,432/8] / f +({ExpRand()/3.0}!16)+LFNoise1.ar((1..16)).range(-5,5).lag(4),SinOsc.ar((1..16)/640).range(-pi,pi),0.133)
		,(1..16),0.2)

	)}).play;
)


/////////

(
Ndef(\c).fadeTime = 15.0;
Ndef(\c,{
	var f;
	Splay.ar(
	f=  Select.kr(Stepper.kr(Impulse.kr(1/16/[1,2,3,5,8,13,21,34,55])),[1,2,1.5,1.25,1,1.125,0.5,0.25,0.125]/0.25pi);
	Vibrato.ar(

			LFSaw.ar(1/16/[1,2,3,5,8,13,21,34,55]).squared * SinOsc.ar([432,432.01,432/1.5,432/2,432/4,432/8] / f +({ExpRand()/3.0}!16)+LFNoise1.ar((1..16)).range(-5,5).lag(4),SinOsc.ar((1..16)/640).range(-pi,pi),0.133)
		,(1..16),0.2)

	)}).play;
)


/////////



/////////

Ndef(\z).stop(60);
Ndef(\c).clear;




(
Tdef(\worker,{
	loop{
		var l;
		l = 2.rrand(4);
		Ndef(\a).fadeTime = l;
		Ndef(\a,{
			var a,b;
			a = [1,2,4,8,1.5,1.25,1.125].at(0.rrand(6));
			b = [1,2,4,8,1.5,1.25,1.125].at(0.rrand(6));

			Splay.ar(
				Vibrato.ar(
					XFade2.ar(
						SinOsc.ar( 4320 / 1 / ([a,b]*0.5pi) + LFNoise1.ar({ExpRand()*16}!16).range(-8,8).lag(0.1),mul:0.25).lag(0.001),
						LFSaw.ar( 4320 / 2 / ([a,b]*2pi) + LFNoise1.ar({ExpRand()*16}!16).range(-8,8).lag(0.1),mul:0.25).lag(0.001),
						SinOsc.kr(1/l/l).range(-0.5,0.5)

					)
					,{ExpRand()*4}!4,0.15)
		)}).play;


		l.wait;

		////////////////////

		l = 1.rrand(4);

		Ndef(\b).fadeTime = l;
		Ndef(\b,{
			var c,d;
			c = [1,2,4,8,1.5,1.25,16].at(0.rrand(6));
			d = [1,2,4,8,1.5,1.25,16].at(0.rrand(6));

			Splay.ar(

				Vibrato.ar(
					XFade2.ar(
						LFPar.ar( 4321 / 1 / ([c,d]*1.5pi) + LFNoise1.ar({ExpRand()*16}!16).range(-8,8).lag(0.1),mul:0.25).lag(0.0001),
						LFSaw.ar( 4322 / 2 / ([c,d]*1.0pi) + LFNoise1.ar({ExpRand()*16}!16).range(-8,8).lag(0.1),mul:0.25).lag(0.001),
						SinOsc.kr(1/l/l).range(-0.5,0.5)

					)

					,{ExpRand()*4}!4,0.15)
		)}).play;


		l.wait;


		l = 1.rrand(4);

		Ndef(\c).fadeTime = l;
		Ndef(\c,{
			var e,f;
			e = [1,2,4,8,1.5,1.25,4].at(0.rrand(6));
			f = [1,2,4,8,1.5,1.25,4].at(0.rrand(6));

			Splay.ar(

				Vibrato.ar(
					XFade2.ar(
						LFPar.ar( 43.21 * 1.5 * ([e,f]) + LFNoise1.ar({ExpRand()*16}!16).range(-8,8).lag(0.1),mul:0.25).lag(0.0001),
						LFSaw.ar( 43.22 * ([e,f]) + LFNoise1.ar({ExpRand()*16}!16).range(-8,8).lag(0.1),mul:0.25).lag(0.001),
						SinOsc.kr(1/l/l).range(-0.5,0.5)

					)

					,{ExpRand()*4}!4,0.15)
		)}).play;


		l.wait;
	}
}).play;
)


//jesus mary on a stick! <3(
Ndef(\z,{Splay.ar(
	Normalizer.ar(
	AllpassN.ar(
	RLPF.ar(
		GVerb.ar(
			(
				Resonz.ar(
					CombN.ar(
						WhiteNoise.ar(LFNoise0.ar(16!4)/2) + SinOsc.ar([43.2,43.21]*2) + Impulse.ar(4/[1,2,4,8])
						,0.5,LFNoise0.ar((1/2)!4).linlin(0,1,0.02,0.015).round(0.001).lag(0.2),8,LFNoise0.ar((1/2)!4).linexp(0,1,0.5,1.0))
					,[432,432.1]/4) * 4 *
				Decay.ar(Impulse.ar(4/[1,2,4,8]),1)
			).softclip
			,2,3,0.9)
		,4000+SinOsc.ar([4,5,6,7]).range(-30,10000))
		,0.033,0.033,4/[1,2,4,8])
	)
	,SinOsc.ar(0.1).linexp(-1,1,0.1,0.9))}).play;
)(
Ndef(\a).fadeTime = 2.0;
Ndef(\a).quant = 2.0;
Ndef(\a,{
	var ss,s;

	ss = Select.kr(Stepper.kr(Impulse.kr(1/4/[1,2,2,4,8,16,32,64])),[1,1,1.5,1.25,2,1.125,0.5,0.75,1,2,8]);
	s = Select.kr(Stepper.kr(Impulse.kr(1/8/[1,2,2,4,8,16,32,64])),[1,1,2,4,8,1,2,4,8,1,0.5,1]);

	Splay.ar(
	AllpassC.ar(
			SinOsc.ar([22,22.01]*[2,1.5]*(ss*pi)/(1+(1/s))+{ExpRand()/100}!8,Ndef(\a).ar.lag(1e-8),mul:0.08).tanh * Pulse.ar(4/[1,2,2,4],mul:0.25)
			,8, {TExpRand.ar(0.001,0.2,Impulse.ar(1/[1,2,4,8,16,32,64])).lag(1/8)} ,8).clip(-1,1)
,0.5,1).softclip}).play;
)


// ^^ quite heavy computations, and it sounds bad )) ^^

s.scope
(
Ndef(\pila).fadeTime = 2.0;
Ndef(\pila).quant = 2.0;

Ndef(\pila,{
	(
		CombN.ar(
			LFSaw.ar([0.5,2]*1/2) * LFSaw.ar([0.5,2]*22) * LFPulse.ar(1/[1,2]).lag(0.1)
			,0.1,LFNoise1.ar(88!2).range(1,16)/48000,32)
	).softclip * SinOsc.ar([44,44.1]*[2,2.01],mul:0.75)
});
)

Ndef(\pila).stop


(
var num,speed,sharpness;
num = 127;
speed = 1/16/[12,18,22,99,0.1];
sharpness = 0.02;

Ndef(\filtr).fadeTime = 2.0;
Ndef(\filtr,{
	Splay.ar(
	BPF.ar(
			Ndef(\pila).ar + SinOsc.ar((1..10)/100.1,mul:0.01)
			,(1..num)*(16000/num)+SinOsc.ar({ExpRand()}!48).range(-40,40),sharpness,SinOsc.ar({ExpRand()*speed}!48).exprange(0.001,8)
		)
,0.17,1)}).play;
)s.boot;


(

Ndef(\ss).quant = 2.0;
Ndef(\ss).fadeTime = 2.0;

Ndef(\ss,{
	var sig,efx;
	Splay.ar(
	sig = (LFSaw.ar([90,60],SinOsc.kr(0.1).range(-pi,pi),mul:0.2) * Decay.ar(Impulse.ar(8/[1,2,4,8]),0.5));
	efx = CombN.ar(sig,LFSaw.kr(4).range(0.08,0.4),LFSaw.kr(4).range(0.01,0.2),1,1,sig).softclip

)}).play;

)

Ndef(\ss).stop(10)
(
Ndef(\z).quant = 2.0;
Ndef(\z).fadeTime;
Ndef(\z,{Splay.ar(

	FreeVerb.ar(
		AllpassC.ar(

			LPF.ar(
			OnePole.ar(
					LFSaw.ar([1,2,4,8],mul:0.5) * LFSaw.ar([55,55.1,55.2,55.3]),SinOsc.ar(0.1).range(-0.9,0.9)
				)
			,110)
			,0.133,0.133,1)
		,0.133,1)

)}).play;
)
(
Ndef(\dark_kick).quant = 2.0;
Ndef(\dark_kick).fadeTime = 2.0;

Ndef(\dark_kick,{Splay.ar(
	FreeVerb.ar(
		Delay2.ar(
			CombN.ar(
				SinOsc.ar(LFSaw.ar([4.4,5.5]).range(44,99)) * LFPulse.ar(4/[1,2,4,8]);
				,1,0.133,0.5)
		)
		,0.33,2,0.5)
)}).play;
)

(

Ndef(\tone).quant = 2.0;
Ndef(\tone).fadeTime = 2.0;

Ndef(\tone,{Splay.ar(
	FreeVerb.ar(
		Delay2.ar(
			CombN.ar(
				Vibrato.ar(
					SinOsc.ar(43.2*([1,2,4,8,1.5,6]*pi),mul:0.25) * LFSaw.ar(1/2/[1,2,3,5,8,13])
					,[4,5,6,7],0.3)
				,1,0.133,0.5)
		)
		,0.33,2,0.5)
)}).play;
)

(

Ndef(\tone2).quant = 2.0;
Ndef(\tone2).fadeTime = 2.0;

Ndef(\tone2,{
	var melody;
	melody = Select.kr(Stepper.kr(Impulse.kr(1/8,[0,0.5])),[1,1,1.5,1.25,1.125,0.5,1,2,3]*pi);
	Splay.ar(
	FreeVerb.ar(
		Delay2.ar(
			CombN.ar(
				Vibrato.ar(
					LFTri.ar(4320/1.5/([1,2,4,8,1.25,3]*melody),mul:0.25) * LFSaw.ar(1/8/[1,2,3,5,8,13])
					,[4,5,6,7],0.3)
				,1,0.133,0.5)
		)
		,0.33,2,0.5)
)}).play;
)



(

Ndef(\hiss).quant = 2.0;
Ndef(\hiss).fadeTime = 2.0;

Ndef(\hiss,{Splay.ar(
	FreeVerb.ar(
		Delay2.ar(
			CombN.ar(
				Vibrato.ar(
					WhiteNoise.ar(0.3!4) * Decay.ar(Impulse.ar(4/[1,2,3,5,8,13]),0.2).squared
					,[4,5,6,7],0.3)
				,1,0.133,0.5)
		)
		,0.33,1,0.5)
)}).play;
)
(
Ndef(\datacom,{
	var s,bf;
	s = 8;
	bf = CombN.ar(Pulse.ar(4/[1,2,4,8,16,64]).sqrt*s.squared,0.25,0.25,8);

	Splay.ar(
		Limiter.ar(
			Mix.fill(s,{|i| SinOsc.ar(i.squared*bf.sqrt + (44) + SinOsc.ar([4,5,6,7],mul:4) ) * SinOsc.ar(1/i)})
		)
	,1,0.5)
}).play;
)(
Ndef(\z,{
	var a;
	a = LFCub.ar((1/12)!4+({ExpRand()/100.0}!12)).linlin(-1,1,-0.9,0.9);
	Splay.ar(
		LFCub.ar([77,77.01]*LFSaw.ar(1/[1,2]).linlin(-1,1,1,0.001),a) * LFPulse.ar(4/[1,2])
)}).play;
)
s.boot;
(
t = Tuning.harmonic;
Ndef(\a).quant = 2.0;
Ndef(\a,{

	var s1,s2,f,depth,d1,d2,d3;
	Splay.ar(

	s1 = Select.kr(Stepper.kr(Impulse.kr(1/2/[1,2,3,5,8,13,21])),[4,4,2,2,8,8,16,16,2,2].scramble);
	s2 = Select.kr(Stepper.kr(Impulse.kr(1/[1,2,3,5,8,13,21])),[4,4,2,2,8,8,16,16,2,2].scramble);

	f = t.cents.at([1,2,7,11]) / (s1*pi) + LFNoise0.ar(4!4).range(-3,3).lag(0.1);
	depth = t.cents.at([1,2,7,11]) / (s2/s1*pi) / 2.0 ;

	d1 = Decay.ar(Impulse.ar(1/[1,1,2,3,5,8]),SinOsc.kr(0.01).range(0.5,0.1));
	d2 = Decay.ar(Impulse.ar(2/[1,1,1,2,3,5,8]),SinOsc.kr(0.02).range(0.2,2.0));
	d3 = Decay.ar(Impulse.ar(8/[1,2,3,5,8]),SinOsc.kr(0.03).range(0.6,1.0));

	FreeVerb.ar(
		RLPF.ar(
			LFSaw.ar(f,SinOsc.kr(depth/10000.0).range(-8pi,8pi),mul:4).distort * d3
			,f + LFNoise0.kr(1/4/[1,2,3,5,8,13]).range(depth/2,depth*2).round(depth/4.0)
		)
	,0.1,2).softclip

)}).play;
)
 /////////////////////////////////////////////////////////////////////// _ # X //
//                                                                              //
//     #    "           #       mmmm    m             "           #             //
//  mmm#  mmm     mmm   #   m  m"  "m mm#mm   m mm  mmm     mmm   #   m   mmm   //
// #" "#    #    #   "  # m"   #    #   #     #"  "   #    #   "  # m"   #" "#  //
// #   #    #     """m  #"#    #    #   #     #       #     """m  #"#    #   #  //
// "#m##  mm#mm  "mmm"  #  "m   #mm#    "mm   #     mm#mm  "mmm"  #  "m  "#m#"  //
//                                                                              //
 //////////////////////////////////////////////////////////  by kof /////////////


////  1  ////////////////////////////////////////////////////////////////////////////// >


(

Ndef(\a).fadeTime = 2.0;
Ndef(\a).quant = 2.0;
Ndef(\a,{
	var tempo;
	tempo = 2;
	Splay.ar(
		Blip.ar([220,440,880,880*1.5]/1.5+LFNoise0.kr(0.1!8).range(-4,4),LFSaw.ar([1,2]*tempo/2.01,SinOsc.kr([0.1,0.2,0.4,0.8]/10.0)*2pi).range(1,120),0.35)

)}).play;

Ndef(\a)[1] = \filter -> {|in| Vibrato.ar(in,(1..8),0.195)};
Ndef(\a)[2] = \filter -> {|in| in.distort * LFPulse.ar(tempo*[1,2,3,5,8]/2)};
Ndef(\a)[3] = \filter -> {|in| FreeVerb.ar(in,0.773,10,add:in)};
Ndef(\a)[4] = \filter -> {|in| RLPF.ar(in,SinOsc.kr(0.07111).range(22,12222),mul:0.25,add:in)};
Ndef(\a)[5] = \filter -> {|in| Pan2.ar(in,SinOsc.kr(0.02111).range(0.1,0.9))};
)


//////  2  //////////////////////////////////////////////////////////////////////////// >

(

Ndef(\b).fadeTime = 2.0;
Ndef(\b).quant = 2.0;
Ndef(\b,{
	Splay.ar(
		Pan2.ar(
		BPF.ar(
				OnePole.ar(WhiteNoise.ar(0.66!8),SinOsc.kr([0.03,0.08]).range(0.1,0.9)) * Decay.ar(Impulse.ar(8/[1,2,3,5,8,13]),{ExpRand()*0.5}!8)
			,2200+LFNoise0.ar(2!4).range(-400,4000).lag(0.0001))
		,SinOsc.kr(2.01))

)}).play;


Ndef(\b)[1] = \filter -> {|in| Vibrato.ar(in,(1..8),0.5)};
Ndef(\b)[2] = \filter -> {|in| FreeVerb.ar(in,0.1373,100,add:in)};
Ndef(\b)[3] = \filter -> {|in| RHPF.ar(in,SinOsc.kr(0.1111).range(2222,12222),mul:0.75,add:in)};
Ndef(\b)[4] = \filter -> {|in| Pan2.ar(in,SinOsc.kr(0.2111).range(0.1,0.9))};
)

///////////  3  /////////////////////////////////////////////////////////////////////// >

(
Ndef(\c).quant = 2.0;
Ndef(\c).fadeTime = 2.0;

Ndef(\c,{
	var lfo,sig1;
	lfo = SinOsc.kr(1/8).range(0.00001,0.2);
	sig1 = SinOsc.ar([99,99.1],LFNoise0.ar(1/2!8).lag(lfo)*8pi,mul:0.75) * Decay.ar(Impulse.ar(8/[1,2,3,5,8]),0.35);

	Splay.ar(
		sig1
)}).play;

Ndef(\c)[1] = \filter -> {|in| Vibrato.ar(in,6+(1/[1,2,4,8]),0.1/[1,2,4,8])};
Ndef(\c)[2] = \filter -> {|in| FreeVerb.ar(in,0.233,10,mul:0.93,add:in/2)};
Ndef(\c)[3] = \filter -> {|in| RLPF.ar(in,SinOsc.ar([77,77.1]).range(110,2000),mul:0.33,add:in)};

)


//////////////////////////////////////////////////////////////////////////////////(
Ndef(\z).fadeTime = 3.0;
Ndef(\z, {Splay.ar(
	AllpassC.ar(
		LPF.ar(
			BBandPass.ar(
				    SinOsc.ar([77,77]) + BrownNoise.ar(0.1!2),
				220,LFSaw.ar(1/4/[1,2]).range(2,5), // bw
				    1)+ WhiteNoise.ar(0.1!2) * Decay.ar(Impulse.ar(4/[1,4]),1.2)
			,1000)
		,2,0.0125,2) +
	AllpassC.ar(
		HPF.ar(
			LPF.ar(
				LFSaw.ar([2000,4001,150,150/8,150/4] + LFNoise0.ar(8).lag(1),mul:0.5) * LFSaw.ar(1/8/[1,2,4,8]).squared
				,LFSaw.ar(44/[1,2]).range(220,1660))
			,220)
		,4,0.0125,8)

)}).play;

)s.boot;
s.scope;

(
Ndef(\bass).quant = 2.0;
Ndef(\bass).fadeTime = 2.0;

Ndef(\bass,{
	var rythm,sel,freq,dec;
	Splay.ar(
	rythm = [1,2,3,5,8,13,21,34,55,89,144];
	sel = Select.kr(Stepper.kr(Impulse.kr(1/8/[1,2,3,5])),1/[1,2,4,1,2,4,1,2,4,2,4]);
	freq = [25,30,34,39,44,49,54,58,63,68,73,78,82,87].midicps.scramble*(sel).lag(0.01);
	dec = Decay.ar(Impulse.ar(4/rythm),rythm/2);

	Limiter.ar(
		Resonz.ar(
			SinOsc.ar(freq + SinOsc.kr(freq/21,mul:0.2).range(-1.midiratio,1.midiratio),SinOsc.kr(freq/96).range(0.2,1.0)) * dec

			,freq) +
		(LFCub.ar([25,30].midicps,mul:0.4) * Decay.ar(Impulse.ar(8/[1,2,3,5]*sel,[1,2,3,5]/1))) +

		(PinkNoise.ar(0.2!4) * Decay.ar(Impulse.ar(2/rythm/sel,rythm/144)))

	)
)}).play;
)(

Tdef(\t1,{

	loop{


		Ndef(\1).fadeTime = 8.0;
		Ndef(\1,{
			var basenote,s,base,tone;

			basenote = 60-12;

			s = Select.kr(Stepper.kr(Impulse.kr(1/4)),[1,1.5,2,1.25,1,4,2,1,4].scramble / 8);

			base = Select.kr(Stepper.kr(Impulse.kr(8)),[1,2,4,1/2,1/4,1,1.5,2,1].scramble * basenote.midicps / s);


			tone =
			SinOsc.ar(base + 0.1 * 1pi / {(1..12).normalize.windex.round(2).squared}!8,mul:1/8).tanh +
			SinOsc.ar(base + 0.2 * 2pi / {(1..16).normalize.windex.round(2).squared}!8,mul:1/12).tanh +
			LFCub.ar(base + 0.3 * 4pi / {(1..24).normalize.windex.round(2).squared}!8,mul:1/24).tanh * 8.0;

			Splay.ar(
				FreeVerb.ar(
					AllpassC.ar(
						Vibrato.ar(
							CompanderD.ar(LPF.ar(tone * TExpRand.ar(1e-7,1,Impulse.ar(1/[1,2,4,8])).lag(1) ,440),0.5,1,0.5,0.2,0.2)  +
							CompanderD.ar(BPF.ar(tone * TExpRand.ar(1e-7,1,Impulse.ar(1/2/[1,2,4,8])).lag(1) ,880),0.5,1,0.5,0.15,0.15) +
							CompanderD.ar(HPF.ar(tone * TExpRand.ar(1e-7,1,Impulse.ar(1/4/[1,2,4,8])).lag(1) ,1660),0.5,1,0.5,0.01,0.01)
							,[4,5,6,7],0.2)
						,1,{ExpRand(0.001,0.2)}!32,2).softclip
					,0.33,2)
				,0.55,1)}).play;

		16.wait;
	}
}).play;
)

s.scope;
(

(
Ndef(\melody,{
	var mod,mod2,base,shift;

	mod2 = Select.kr(Stepper.kr(Impulse.kr(1/[1,2,4,8]),max:3),[1,2,4,8]);
	mod = Select.kr(Stepper.kr(Impulse.kr([1,2,4,8]),max:3),[1,2,4,8] + mod2) ;

	base = (48).midicps.squared / mod;
	shift = base / (LFNoise0.ar(8!8).range(1,3).round(2).squared);
	shift = shift;
	Splay.ar(
		FreeVerb.ar(
			LPF.ar(
				SinOsc.ar(shift + SinOsc.ar([4,5,6,7] + {ExpRand()}!4,mul:2),0,0.133)
				,800)
			,0.133,10)
)}).play;
);

)
(
Ndef(\ring,{
	var f,a,b;
	f = [77,77*2,77*4,77/2,77*2,77*4]*1.25;
	a = LPF.ar(
		LFSaw.ar(f).lag(SinOsc.kr(f/512.1).range(0.00001,0.1))
		,SinOsc.kr(f/1024.13).range(f/2,f*2)) * LFSaw.ar(1/4/[1,2,4,8,16,32,64]).squared.lag(0.002);
	b = HPF.ar(
		LFSaw.ar(f).lag(SinOsc.kr(f/512).range(0.00001,0.1))
		,SinOsc.kr(f/1024.1).range(f/2,f*2)) * LFSaw.ar(1/4/[1,2,4,8,16,32,64]).squared.lag(0.002);
	////
	Splay.ar(
		FreeVerb.ar(
			SelectX.ar(SinOsc.kr(f/2048).range(0,1),[a,b])
			,0.33,2)
)}).play;
)

s.scope;
(
Ndef(\rythm).fadeTime = 4;
Ndef(\rythm).quant = 4;

Ndef(\rythm,{Splay.ar(
	Splay.ar(
		Pulse.ar(4/(2**(1..8)))
	)
)});
)

(
Ndef(\a).fadeTime = 4.0;
Ndef(\a).quant = 2.0;
Ndef(\a,{Splay.ar(
	Limiter.ar(
		SinOsc.ar(DelayN.ar(Ndef(\a).ar,0.25,4).range(432/8,432*1.5)) + SinOsc.ar(432*[1,1]) * Ndef(\rythm).ar
	)
)}).play;
)
(
Ndef(\feedback).fadeTime = 2.0;
Ndef(\feedback,{
	var f;
	f = Ndef(\feedback).ar.range(432/2,4320/(2**(1..8))).lag(SinOsc.ar(1/(1..24)).range(1e-7,4));

	Splay.ar(
		RLPF.ar(
			SinOsc.ar(f);
			,4320/((1..8)**2))
,0.2,0.75)}).play;
)

//^^ sweet!s.scope;
(
Ndef(\q,{
	Splay.ar(
		CombN.ar(
			Resonz.ar(
			Vibrato.ar(
			LFPulse.ar(432/[1,2]/pi,mul:0.4).lag(0.00001)-0.2;
				,[4,5,6,7],0.2)
			,432/2pi)
			,1,LFSaw.ar(1/64/[1,2]).range(0.0001,0.2),4).softclip.lag(0.001)
	)
}).play;
)// moc pekne
(
Ndef(\b).quant = 2.0;
Ndef(\b).fadeTime = 4.0;

Ndef(\b,{
	var s;
	s = BBandPass.ar(
		SinOsc.ar(44+8800/(LFNoise0.ar((16/[2,3,5,8,13,21])).range(1,32).round([1,1.5,2,4,8]).squared*2)) *
		LFSaw.ar(8/[2,3,5,8,13,21]).squared * 12	,SinOsc.ar(11.1).range(22,8800).lag(1),SinOsc.ar(1/[4,2.1]).range(0.01,0.7)) +

	BBandPass.ar(
		HPF.ar((WhiteNoise.ar({ExpRand()/2.0}!4) * Pulse.ar(4/[1,2,2,4])),[1000,2000,8000,16000])

		,SinOsc.ar(11).range(1000,16000).lag(1),SinOsc.ar(2/[4,2.1]).range(0.01,0.7));

	Splay.ar(
		FreeVerb.ar(
			Compander.ar(s,s,0.75,1,0.5,0.01,[0.01,0.1,0.5]);
			,0.1,100)
).clip(-1,1)}).play;
)

Ndef(\b).stop(5);s.boot;


(
Ndef(\hisses).fadeTime = 2.0;

Ndef(\hisses).quant = 2.0;

Ndef(\hisses,{
	var mel,a,b,z;
	mel = Select.kr(Stepper.kr(Impulse.kr(1/2/[4,8])),[1,1.5,1.25,2,4,0.5,1,1.5]).lag(0.1);
	a = WhiteNoise.ar(0.8!2) + LFSaw.ar(mel*([67,72,60]-36).midicps/[1,1.5,1.25,2,4,8],LFNoise0.kr(1/4/[1,2]).range(-1,1).lag(0.5));
	b = Decay.ar(Impulse.ar(4/[1,2,3,5,8,13]),1);
	a = RLPF.ar(a,b.range(20,2000*mel),add:a) * b;
	z = AllpassC.ar(a,1.25,0.25,mul:0.5,add:a) * LFSaw.ar(1/4/[1,2,3,5,8,13]);

	Splay.ar(
		Delay1.ar(
			FreeVerb.ar(z,0.95,2,0.25,mul:0.25,add:z)
		)
)}).play;
)s.boot;


(
Ndef(\a).quant = 2.0;

Ndef(\a,{
	var rythm;
	rythm = [1,2,4,8];

	RLPF.ar(
		WhiteNoise.ar(SinOsc.kr(1/2/rythm).range(0.01,1.0)) +
		SinOsc.ar([55,88,99,4000,8000]),
		SinOsc.kr(1/4/rythm).exprange(55.0,1001.0)
	) *

	Splay.ar(
		Decay.ar(Impulse.ar(8/rythm))
)}).play;
)s.boot;


(
Ndef(\a).quant = 2.0;

Ndef(\a).fadeTime = 2.0;

Ndef(\a,{
	var rythm,sel,f;

	Splay.ar(
	rythm = [1,2,3,5,8,13,21,34,55,89];
	sel = Select.kr(Stepper.kr(Impulse.kr(1/2)),1+(1/[1,1,2,4,1,2,1,4,1,1].scramble));
	f = [20,16+12,22,44,54].midicps*sel;
	RLPF.ar(
		Blip.ar([f,f*2]+LFNoise0.kr(24!32).range(-8,8).lag(0.01),8),
		[f,f*2,f*1.5,f*1.25],SinOsc.ar(4/rythm).range(0.2,1.5)
	) *

	Decay.ar(Impulse.ar(8/rythm),rythm/21)

)}).play;
)
s.boot;


(
Ndef(\a).quant = 2.0;

Ndef(\a).fadeTime = 2.0;
Ndef(\a,{

	var rythm,sel,f;

	rythm = [1,2,3,5,8,13,21,34,55,89];
	sel = Select.kr(Stepper.kr(Impulse.kr(1/2)),1+(1/[1,1,2,4,1,2,1,4,1,1].scramble));
	f = [20,16+12,22,44,54].midicps*sel;
	RLPF.ar(
		Blip.ar([f,f*2]+LFNoise0.kr(24!32).range(-8,8).lag(0.01),4) +
		LFSaw.ar(f,mul:0.5),
		[f,f*2,f*1.5,f*1.25],SinOsc.ar(8/rythm).range(0.2,1.5)
	) *

	Splay.ar(
	Decay.ar(Impulse.ar(8/rythm),rythm/21)

)}).play;
)
(

Ndef(\1,{

	var mod,mod2,vib;


	mod = LFDNoise0.ar(1/2/fib(12,4,5)).range(0.25,8).round(2**(1..8)/16);
	mod2 = LFDNoise0.ar(1/2/fib(12,4,5)).range(0.25,8).round(2**(1..8)/16);

	vib = SinOsc.ar(1/2/fib(12,4,5));

	Splay.ar(
	CombL.ar(
		SinOsc.ar(4320 / (mod*8pi/mod2),vib.range(0,2pi)) * LFSaw.ar(1/2/fib(12,4,5)).squared
		,0.01,4,8)
	,0.7,1)}).play;
)


s.scope;

//very nice!
Ndef(\sinusa,{	SinOsc.ar(440!2) * Pulse.ar(1)})
Ndef(\sinusa).play


Ndef(\del1,{CombC.ar(\in1.ar([0,0]),1,0.25,1)})
Ndef(\del1).play


Ndef(\del1)<<>.in1 Ndef(\sinusa)

(
Ndef(\a).fadeTime = 2.0;
Ndef(\a).quant = 2.0;
Ndef(\a,{
	SinOsc.ar(4320/([1,2,4,8]*pi)) * LFPulse.ar(4/[1,2,4,8])
});

Ndef(\a).mold(4);
Ndef(\a).numChannels.postln;


Ndef(\a)[1] = \filter -> {|in| CombN.ar(in,1/[1,2,4,8],LFSaw.ar(1/16/[1,2,4,8]).range(0.01,0.1),[1,2,4,8])};
Ndef(\a)[2] = \filter -> {|in| Vibrato.ar(in,[1,2,4,5],0.2)};
Ndef(\a)[3] = \filter -> {|in| FreeVerb.ar(in,0.7,100)};
Ndef(\a)[4] = \filter -> {|in| LFPulse.ar(in.range(432/8,432/2)).lag(0.01)};
// Ndef(\a)[5] = \filter -> {|in| BBandPass.ar(in*2,LFDNoise1.ar(1!8,4400))};
// Ndef(\a)[5] = \filter -> {|in| Splay.ar(in,SinOsc.ar(4/[1,2,4,8]).range(0.1,1),0.25).clip(-1,1)};
)
(
Ndef(\heavyMetal).fadeTime = 2.0;
Ndef(\heavyMetal,{
	var f,sig;
	f = ([67,63-12,65,69,71]-12).midicps / 0.5pi;
	sig = Gendy1.ar(0.5,0.5,minfreq:f,maxfreq:f*2,initCPs:SinOsc.kr([0.03,0.04]).range(4,110)) * LFSaw.ar(1/4/[4,1]).squared;

	Splay.ar(
		(sig + LFPar.ar(f,mul:0.5) * Decay.ar(Impulse.ar(4/[1,2,5,8,13,21]),1.75)) +
		HPF.ar((WhiteNoise.ar(0.75!4) * Decay.ar(Impulse.ar(8/[1,2,5,8,13,21]),0.1)),12000)
	)
}).play;


Ndef(\heavyMetal)[1] = \filter -> {|in| Pan2.ar(in,SinOsc.kr(0.3).range(-0.5,0.5))};
Ndef(\heavyMetal)[2] = \filter -> {|in| CombN.ar(in,2,0.333,2,0.5,in)};
Ndef(\heavyMetal)[3] = \filter -> {|in| FreeVerb.ar(in,0.33,2,0.5,1,in)};


)(
Ndef(\heavyMetal).fadeTime = 2.0;
Ndef(\heavyMetal,{
	var f,sig;
	f = [77,77*1.5];
	sig = Gendy1.ar(0.5,0.5,minfreq:f,maxfreq:f*2,initCPs:SinOsc.kr([0.03,0.04]).range(4,110)) * LFSaw.ar(1/4/[4,1]).squared;

	Splay.ar(
		(sig + LFPar.ar(f,mul:0.5) * LFPulse.ar(8/[2,1],mul:1)) +
		HPF.ar((WhiteNoise.ar(0.75!4) * Decay.ar(Impulse.ar(8/[1,2,5,8,13,21]),0.1)),12000)
	)
}).play;


Ndef(\heavyMetal)[1] = \filter -> {|in| Pan2.ar(in,SinOsc.kr(0.3).range(-0.5,0.5))};
Ndef(\heavyMetal)[2] = \filter -> {|in| CombN.ar(in,2,0.333,2,0.5,in)};
Ndef(\heavyMetal)[3] = \filter -> {|in| FreeVerb.ar(in,0.33,2,0.5,1,in)};


)

(

Ndef(\arw).fadeTime = 5.0;
Ndef(\arw).quant = 2.0;
Ndef(\arw,{
	var f,lfo,sig,a,b,fade,f1,f2;
	f = ([[44,44.44]*1pi,[45,45.44]]*1.5pi) / 1.5pi;
	lfo = LFSaw.ar(1/8/[1,2,4,8,16]).squared;

	sig = LFSaw.ar(f+LFNoise0.kr((_*1!8)).range(-8,8).lag(2),mul:0.25).lag(SinOsc.kr([0.01,0.02]).range(0.00001,0.01)) + WhiteNoise.ar(0.005!2);

	a = RLPF.ar(sig,44*1.5pi,add:sig);
	b = RHPF.ar(sig,44*pi,add:sig) ;

	fade = XFade2.ar(b,a,lfo) * lfo;
	f1 =
		AllpassC.ar(fade,0.0002,SinOsc.kr([0.1,0.11]).range(0.01,0.2),2,add:fade)+ (SinOsc.kr(f)*LFSaw.ar(4/[1,2],mul:0.1)) + (Ringz.ar(Impulse.ar(1/4/[1,2,4,8,16,32]),f*[8,4,2,1.5,16*1.25,32*1.5]+LFNoise0.kr((_*1!8)).range(-8,8).lag(2),4,0.1));
	f2 = FreeVerb.ar(f1,SinOsc.kr(0.01345).range(0.001,0.9),SinOsc.kr(0.01134).range(0.2,1.7),0.5,1,f1);
	Splay.ar(
		f2
)}).play;
)

Ndef(\arw).stop(60)

(
Ndef(\weird_tune).quant = 2.0;
Ndef(\weird_tune).fadeTime = 2.0;

Ndef(\weird_tune,{
	var mm,base,m,f;
	mm = Select.kr(Stepper.kr(Impulse.kr(1/4/[1,4,2])),[1,1,1.5,2,4,8,1,2,4,8]);


	base = [432,432.1] / (1+(1/mm));//(1+(1/mm));
	m = Select.kr(Stepper.kr(Impulse.kr(1/[4,2])),[2,4,1.5,3,1,0.5,1,2,4,8]);
	f = base * 4 * m / (2 ** LFSaw.ar(4/[1,2,4,8,16,32,64,128]).range(1,8).round(m));

	Splay.ar(
		FreeVerb.ar(
			Vibrato.ar(
				(SinOsc.ar(f+((1..10)/8.0),((1..10)/pi),mul:0.5) +
					LFCub.ar(f/m+((1..10)/4.0),((10..20)/2pi),mul:0.9)).softclip *
				Pulse.ar(4/[1,2,4,8])
				,[4,5,6,7],0.33).softclip
			,0.33,20)
		,0.75,0.65)}).play;
)(
Ndef(\2).quant = 2.0;
Ndef(\2).fadeTime = 4.02;

Ndef(\2,{
	var n,f;
	n = Select.kr(Stepper.kr(Impulse.kr(1/4/[1,2,3,5,8,13,21,34]),max:4),[1,12,1,2,4].scramble);
	f = (n).midicps * (32pi * [1,1.5] / 256 * 16) ;


	Splay.ar(
		FreeVerb.ar(
			CombN.ar(
				LFSaw.ar([22000,22000.1]*1.5/([1,2,4,8]*(f+f)) + {ExpRand()}!8,{ExpRand()*8pi},mul:0.125) +
				SinOsc.ar([2200,2200.1]/([1,2,4,8]*f),mul:0.125)
				,0.5*16pi/(f.lag(1)),16pi/(f.lag(4)),8).clip(-1,1)
			,0.33,100)
		,0.5,0.7)

}).play;

)

Ndef(\2).stop(20)

s.scope// Ja_WOW

// I can't play this - the server keeps crashing :(
// ^^ pitty it desn't sond bad (uploading flac named notes_pulsed)

(
Tdef(\automata,{
	loop{
		(
			Ndef(\2).quant = 2.0;
			Ndef(\2).fadeTime = 16.0;

			Ndef(\2,{
				var mod,mod2,n,f,signal;

				mod2 = Select.kr(Stepper.kr(Impulse.kr(1/16/[1,2,4,8]),max:6),[1,2,1,4,1,4,8].scramble * 4).lag(0.4);
				mod = Select.kr(Stepper.kr(Impulse.kr(1/8/[1,2,4,8]),max:6),[1,2,1,1.5,0.5,4,8].scramble);
				n = Select.kr(Stepper.kr(Impulse.kr(1/4/[1,2,4,8]),max:4),[1,12,1,2,4].scramble).lag(0.008);
				f = (n).midicps * (32pi * [1,1.5] / 256 * 16 / mod2 * mod) ;


				signal = CombN.ar(
					LFSaw.ar([22000,22000.1]/([1,2,4,8]*(f*2)) + {ExpRand()}!8,{ExpRand()*8pi},mul:0.5) +
					SinOsc.ar([2200,2200.1]/([1,2,4,8]*f),mul:0.5)
					,0.5*16pi/(f),16pi/(f),8).clip(-1,1) ;

				signal = RLPF.ar(CompanderD.ar(signal,0.5,1,0.5,[0.001,0.01,0.1],[0.001,0.01,0.1]),[55,110,220,440,880,8800]);

				Splay.ar(
					FreeVerb.ar(
						RLPF.ar(
							signal * Decay.ar(Impulse.ar(8/[1,2,3,5,8]),{ExpRand()*1.5}!8)
							,55*(1..12),SinOsc.ar((1..12)/1000.0,{ExpRand()*2pi}!8).range(0.001,0.5))
						,0.133,20).softclip
					,0.5,0.5)

			}).play;

		);
		16.wait;
	}
}).play;
)

Ndef(\2).stop(20)

s.scope// Ja_WOW

(
Ndef(\2).quant = 2.0;
Ndef(\2).fadeTime = 4.02;

Ndef(\2,{
	var mod,n,f;
	mod = Select.kr(Stepper.kr(Impulse.kr(1/8/[1,2,4,8]),max:6),[1,2,1,1.5,0.5,4,8*1.5].scramble);
	n = Select.kr(Stepper.kr(Impulse.kr(1/4/[1,2,4,8]),max:4),[1,12,1,2,5].scramble);
	f = (n).midicps * (32pi * [1,1.5] / 256 * 16 / 2 * mod) ;


	Splay.ar(
		CombN.ar(
			LFSaw.ar([22000,22000.1]*1.5/([1,2,4,8]*(f+f)) + {ExpRand()}!8,{ExpRand()*8pi},mul:0.125) +
			SinOsc.ar([2200,2200.1]/([1,2,4,8]*f),mul:0.125)
			,0.5*16pi/(f),16pi/(f),8).clip(-1,1)
		,0.5,0.75)

}).play;

)

Ndef(\2).stop(20)

s.scope(

(
Ndef(\melody).fadeTime = 8.0;
Ndef(\melody).quant = 2.0;
Ndef(\melody,{
	var mod,mod2,base,shift;

	mod2 = Select.kr(Stepper.kr(Impulse.kr(1/4/[1,2,4,8]),max:4),[1,2,4,8,16]);
	mod = Select.kr(Stepper.kr(Impulse.kr([1,2,4,8]),max:7),([1,2,4,8,4,2,1,16] + mod2) / pi) ;

	base = (48-12).midicps.squared / mod;
	shift = base / (LFNoise0.ar(8!8).range(1,4).round(2).squared);
	shift = shift;
	Splay.ar(
		FreeVerb.ar(
			BPF.ar(
				CombN.ar(
					SinOsc.ar(shift + SinOsc.ar([4,5,6,7] + {ExpRand()}!4,mul:2),0,0.233)
					,1,[1,2,4,8],8)
				,SinOsc.ar(1/4/[1,2,4,8]).range(44,16000))
			,0.133,10)
		,1,1)}).play;
);

)

(
Ndef(\a).quant = 2.0;
Ndef(\a).fadeTime = 8.0;
Ndef(\a,{Splay.ar(
		FreeVerb.ar(
		CompanderD.ar(
			Vibrato.ar(
			CombN.ar(
				SinOsc.ar([43,44.013,44*2,44*8]*16*(1+1/[2,4,16,32,64,1.25,1.25])) * LFPulse.ar(1/4/4/[1,2,4,8]).squared
				,[4,5,6,7]*[1,2,4,7,6,5].scramble,0.8)
				,0.5,1,0.5)
			,1,0.25/[1,2,4,8],10)
	,0.1933,20) * LFPulse.ar(1/[2,4,8]/[1,2,3,5,13]).squared
	,1,0.01355523454321)}).play;
)



(
Ndef(\b).quant = 2.0;
Ndef(\b).fadeTime = 8.0;
Ndef(\b,{Splay.ar(
		FreeVerb.ar(
		CompanderD.ar(
			Vibrato.ar(
			CombN.ar(
				SinOsc.ar([43,44.013,44*2,44*8]*32*(1+1/[2,4,16,32,64,1.25,1.25])) * LFPulse.ar(1/8/[1,2,4,8]).squared
				,[4,5,6,7]*[1,2,4,7,6,5].scramble,0.8)
			,0.5,1,0.5)
			,1,0.25/[1,2,4,8],10)
	,0.1933,20) * LFPulse.ar(1/[2,4,8]/[1,2,4,8]).squared
	,1,0.01355523454321)}).play;
)



(
Ndef(\c).quant = 2.0;
Ndef(\c).fadeTime = 8.0;
Ndef(\c,{Splay.ar(
		FreeVerb.ar(
		CompanderD.ar(
			Vibrato.ar(
			CombN.ar(
				SinOsc.ar([43,44.013,44*2,44*8]*64*(1+1/[2,4,16,32,64,1.25,1.25])) * LFPulse.ar(1/4/[1,2,4,8]).squared
				,[4,5,6,7]/[1,2,4,7,6,5],0.8)
				,0.5,1,0.5)
			,1,0.25/[1,2,4,8].scramble,10)
	,0.1933,20) * LFPulse.ar(1/[2,4,8]/[1,2,3,4]).squared
	,1,0.01355523454321)}).play;
)
StageLimiter.activate;

(
Ndef(\tone).fadeTime = 8;
Ndef(\tone,{
	var tune1,tune2;
	tune1 = {1.5pi + LFSaw.ar(1/4/[1,2,4,8]).range(-pi,pi).round(pi/4)};
	tune2 = {1.5pi + LFSaw.ar(1/2/[1,2,4,8]).range(-pi,pi).round(pi/8)};

	Splay.ar(
		HPF.ar(
			Vibrato.ar(
				SinOsc.ar(([60,72,62]+48).midicps / tune1 / (2**(1..16)),mul:1/fib(12)) + LFSaw.ar(22000/tune2/(2**(1..16)),mul:0.02)
				,(1..8)/8,0.2)
			,10)
)});
)


(
Ndef(\rythm).quant = 2.0;
Ndef(\ryhtm).fadeTime = 8;
Ndef(\rythm,{

	Splay.ar(
		Pulse.ar(2/[1,2,3,4,5])
)});
)

(
Ndef(\abraka).quant = 2.0;
Ndef(\abraka).fadeTime = 4;
Ndef(\abraka,{Splay.ar(
	GVerb.ar(
		Ndef(\tone).ar * LFSaw.ar(1/fib(12)).squared * Ndef(\rythm).ar
		,10)
	,0.5,0.5)}).play;
)



(
Ndef(\nois).quant = 2.0;
Ndef(\nois).fadeTime = 8;
Ndef(\nois,{Splay.ar(
	CompanderD.ar(
	GVerb.ar(
		CombC.ar(
			BPF.ar(WhiteNoise.ar({ExpRand(0.01,0.95)}!8),{ExpRand(44,18000)}!8)
			,1,0.025/(1.01**(1..16)),2/fib(8))
		,100)
	,0.5,0.5,1)
)})
)

(
Ndef(\beat).quant = 2.0;
Ndef(\beat).fadeTime = 4.0;
Ndef(\beat,{Splay.ar(
	Decay.ar(Impulse.ar(8/fib(12)),{ExpRand(0.1,2)}!8);
)})
)

(
Ndef(\compose).fadeTime = 4.0;
Ndef(\compose,{Splay.ar(
	// GVerb.ar(
	Ndef(\nois).ar * Ndef(\beat).ar
		// ,10)
	,0.5,0.25)

}).play;
)(
Ndef(\kick).quant = 2.0;

Ndef(\kick,{
	var r;
	r = 4/[1,2,4];
	Splay.ar(
		CombN.ar(
			Vibrato.ar(LFPar.ar(Decay.ar(Impulse.ar(r),1/r).range(133.33,[43,44])),[4,5,6,7,8],0.2) * Decay.ar(Impulse.ar(r),1/r)
			,1,0.02+(LFNoise1.ar(1!4).lag(0.25)/10000.0),1.5)
)}).play;
)



(
Ndef(\hat).quant = 2.0;
Ndef(\hat).fadeTime = 2.0;

Ndef(\hat,{
	var r;
	r = 8/[1,2,3,8];
	Splay.ar(
		CombN.ar(
			Vibrato.ar(BPF.ar(WhiteNoise.ar(1!2),LFNoise1.ar(1!4).range(2000,12000).round(1000).lag(0.1)),[5,6,7,8],0.7) * Decay.ar(Impulse.ar(r),1/r)
			,1,0.25+LFNoise1.ar(1!4).range(0.25,1).round(0.125),4)
)}).play;
)


//this hat is amazing ^_^s.scope;

/////////


(
Tdef(\tt,{
	loop{
		var mod;
		mod = [1,2,1.5,1.25,1,1.125].at(0.rrand(5));

		Ndef(\brass).quant = 2.0;
		Ndef(\brass).fadeTime = 0.25;
		Ndef(\brass,{
			var f;
			f = [77,78] * [1,2,1.5,1.25,1,1.125].at(0.rrand(5));


			Splay.ar(
				Pluck.ar(SinOsc.ar([f,f*mod]+({ExpRand()*3}!12)),Impulse.ar(4/[1,2]),0.02,0.0002*f,4,mul:0.15)
		)}).play;


		Ndef(\hat).quant = 2.0;
		Ndef(\hat).fadeTime = 2.0;

		Ndef(\hat,{
			var r;
			r = 2.rrand(8).round(2)/[1,2,4,8];
			Splay.ar(
				CombN.ar(
					Vibrato.ar(BPF.ar(WhiteNoise.ar(1!2),LFNoise1.ar(1!4).range(2000,12000).round(1000).lag(0.1)),[5,6,7,8],0.1) * Decay.ar(Impulse.ar(r),1/r)
					,1,0.25+LFNoise1.ar(1!4).range(0.25,1).round(0.125),1)
				,1,0.5)}).play;


		l = 4;
		Ndef(\a).quant = 0.5;
		Ndef(\a).fadeTime = l;
		Ndef(\a,{
			var a,b,mod;

			a = [1,2,4,8,1.5,1.25,0.5].at(0.rrand(6));
			b = [1,2,4,8,1.5,1.25,0.5].at(0.rrand(6));

			Splay.ar(
				Vibrato.ar(
					XFade2.ar(
						SinOsc.ar( 4320 / 1 / ([a,b]*mod*pi) + LFNoise1.ar({ExpRand()*16}!16).range(-8,8).lag(0.1),mul:0.25).lag(0.001),
						LFSaw.ar( 4320 / 2 / ([a,b]*mod*pi) + LFNoise1.ar({ExpRand()*16}!16).range(-8,8).lag(0.1),mul:0.25).lag(0.001),
						SinOsc.kr(1/l/l).range(-0.5,0.5)

					)
					,{ExpRand()*4}!4,0.15)
		)}).play;



		4.wait;
	}
}).play;

)

///////////


(
Ndef(\kick).quant = 2.0;
Ndef(\kick,{
	tempo = 4;
	fk = [7777,7777];
	fb = [54.1,54];
	df = Decay.ar(Impulse.ar(tempo/[1,2]),0.0002+SinOsc.ar(1/16).range(0.00001,0.0002));
	da = Decay.ar(Impulse.ar(tempo/[1,2]),0.75);

	Splay.ar(
		SinOsc.ar([fk,fk]*df+(fb * da.linlin(0,1,0.35,1))) * da
)}).play;

)

(
Ndef(\a).quant = 2.0;
Ndef(\a,{
	var sig;
	sig = Vibrato.ar(
		(LFCub.ar(LFCub.ar([10,10.1]).range(44,99.1) * LFPulse.ar(1/[1,2,3,4])) * LFPulse.ar(4/[1,2,3,4]))	+
		(LFPar.ar(LFCub.ar(4/[1,2,3,4]).range(99,20),mul:0.72) * (Decay.ar(Impulse.ar(4/[1,2,3,4],0.5),1.75)) ) +
		(Decay.ar(Impulse.ar(4/[1,3,2,4],0.5),0.1) * WhiteNoise.ar(0.5!2)) );


	Splay.ar(
		sig
)}).play;
)


///////



(
Ndef(\b).quant = 2.0;
Ndef(\b,{
	var s;
	s = Select.kr(Stepper.kr(Impulse.kr(1/8),max:5),[1,1.5,1,1.25,1,1.125]);
	Splay.ar(
	LFSaw.ar([432,432.01] / ([1,2,0.5,4] * s * pi) + LFSaw.ar(1/[1,2,3,4]).range(4,-4),mul:0.33).lag(SinOsc.ar(2/[1,2,3,4]).range(0.00001,0.01)) * LFPulse.ar(4/[1,2,3,4])
)}).play;
)
(
Ndef(\butterfly).fadeTime = 8.0;
Ndef(\butterfly,{
	var mmod,s,lim,sl,sh;
	// butterfly effect here ...
	mmod = LFSaw.ar(1/[11,11.001]).range(0.0001,80);


	s = FreeVerb.ar(
		BBandPass.ar(
			Mix.fill(32,{|i| LFSaw.ar((i/mmod)+432/4pi,mul:1/2)})
			,LFDNoise1.ar(1/4.32!32).range(432/4,432*8) + LFSaw.ar(1111),0.012)
		,0.1933,1);

	lim = Pulse.ar((1..10)*10).range(44,2000);

	sl = LPF.ar(s,lim);
	sh = HPF.ar(s,lim);

	Splay.ar(

		CompanderD.ar(

			RLPF.ar(
				FreeVerb.ar(
					CompanderD.ar(sl,0.5,1,0.5) +
					CompanderD.ar(sh,0.25,1,0.25) *
					LFSaw.ar(1/[1,2,4,8,16,32,64]).squared * 32 +
					SinOsc.ar(SinOsc.ar((1/[1,2,4,8])).range(12000*sh,14000*sh),mul:0.5)
					,0.33,1)
				,lim.lag(0.01)*2)

			,0.5,1,0.5,0.02)



		,1,0.7).clip(-1,1)}).play;
)

s.scope;
(
Ndef(\rythm).fadeTime = 4;
Ndef(\rythm).quant = 2;

Ndef(\rythm).mold(16);
Ndef(\rythm,{
	LFSaw.ar(1/4/(1..4),0.01*(1.9**(1..16))).squared
});
)



(
Ndef(\magick1).quant = 2.0;
Ndef(\magick1).fadeTime = 2.0;
Ndef(\magick1,{
	var s,sl,sh;
	s =
	CombL.ar(
		SinOsc.ar(43.2 / 2 * [1,2,4,1.5,0.001] * ( LFTri.ar(432e-7/fib(32) ).squared.range(1,3) ** (1..32)),mul:2/fib(12)) +
		WhiteNoise.ar(0.25*SinOsc.ar(0.01/fib(12)).range(0.01,1)) * Ndef(\rythm).ar
		,1,LFNoise1.ar(1/2/(2**(1..8))).range(2,7).round(2) * 432e-6*(1.1**(1..32)),(8/(2**(1..16))),mul:2/fib(12));

	sl = CompanderD.ar(RLPF.ar(s,fib(22)) * LFSaw.ar(1/4/fib(32)).squared,0.5,1,0.5);
	sh = CompanderD.ar(RHPF.ar(s,fib(22)) * LFSaw.ar(1/4/fib(32,1,1.1)).squared,0.5,1,0.5);


	Splay.ar(
		(sl + sh)
		,0.33,1)}).play;
)

(
Ndef(\rythm).fadeTime = 4;
Ndef(\rythm).quant = 2;

Ndef(\rythm).mold(16);
Ndef(\rythm,{
	Pulse.ar(4/(1..4),0.01*(1.9**(1..16))).softclip
});
)



(
Ndef(\magick1).quant = 2.0;
Ndef(\magick1).fadeTime = 2.0;
Ndef(\magick1,{
	var s,sl,sh;
	s =
	CombL.ar(
		SinOsc.ar(43.2 / 2 * [1,2,4,1.5,0.001] * ( LFTri.ar(432e-7/fib(32) ).squared.range(1,3) ** (1..32)),mul:2/fib(12)) +
		WhiteNoise.ar(0.25*SinOsc.ar(0.01/fib(12)).range(0.01,1)) * Ndef(\rythm).ar
		,1,LFNoise1.ar(1/2/(2**(1..8))).range(2,7).round(2) * 432e-6*(1.1**(1..32)),(8/(2**(1..16))),mul:2/fib(12));

	sl = CompanderD.ar(RLPF.ar(s,fib(22)) * LFSaw.ar(1/fib(32)).squared,0.5,1,0.5);
	sh = CompanderD.ar(RHPF.ar(s,fib(22)) * LFSaw.ar(1/fib(32,1,1.1)).squared,0.5,1,0.5);


	Splay.ar(
		(sl + sh)
		,0.33,1)}).play;
)

(
Ndef(\rythm).fadeTime = 4;
Ndef(\rythm).quant = 2;

Ndef(\rythm).mold(16);
Ndef(\rythm,{
	Pulse.ar(4/(1..4),0.01*(1.9**(1..16))).softclip
});
)



(
Ndef(\magick).quant = 2.0;
Ndef(\magick).fadeTime = 2.0;
Ndef(\magick,{
	var s,sl,sh;
	s =
	CombC.ar(
		SinOsc.ar(43.2 * ( LFTri.ar(432e-7/fib(32) ).squared.range(1,3) ** (1..32)),mul:2/fib(12)) +
		WhiteNoise.ar(0.15!32) * Ndef(\rythm).ar
		,1,LFNoise1.ar(1/4!16).range(1,12).round(2) * 432e-6*(1.001**(1..32)),(8/(2**(1..16))),mul:2/fib(12));

	sl = CompanderD.ar(RLPF.ar(s,fib(22)) * LFSaw.ar(1/fib(32)).squared,0.5,1,0.5);
	sh = CompanderD.ar(RHPF.ar(s,fib(22)) * LFSaw.ar(1/fib(32,1,1.1)).squared,0.5,1,0.5);


	Splay.ar(
		(sl + sh)
		,0.33,1)}).play;
)


///what is mold and why is all this magic crashing on me?
///// ^^ mold = num of channels per ndef, it depends on server settings...

(
Tdef(\aa,{

	Ndef(\a).fadeTime = 4.0;
	Ndef(\a).quant = 2.0;

	loop{
		Ndef(\a,{
			var base1,base2,r,s,len,mod;
			base1 = 432/8pi * (1.0 + {(1/1.rrand(8).round(2))}!3);
			base2 = 432/4pi * (1.0 + {(1/1.rrand(8).round(2))}!3);

			r = [1,9/8,6/5,4/3,3/2,8/5,7/4];
			s = []++r[0]++r[1]++r[6];

			len = Select.kr(Stepper.kr(Impulse.kr(1/4/[1,2,4,8])),[1,2,1,0.5,1.5,2,4,0.5,1.5].scramble/2).lag(1/2);

			mod = 2;


			Splay.ar(
				Limiter.ar(
					SinOsc.ar(base1 + {base1.rrand(base1*10).round(base1*mod)}!3 * s.at({0.rrand(2)}!3) ,mul:0.133).tanh +
					SinOsc.ar(base2 + {base2.rrand(base2*10).round(base2*mod)}!3 * s.at({0.rrand(2)}!3) ,mul:0.133) * LFSaw.ar(1/4/[1,2,4,8].scramble).squared
					,1)
				,0.5,1,SinOsc.ar([1,2,4,8]))}).play;

		16.wait;
	}
}).play;

)

s.scope;

(
Ndef(\rythm).fadeTime = 4;
Ndef(\rythm).quant = 2;

Ndef(\rythm).mold(16);
Ndef(\rythm,{
	Pulse.ar(4/(1..4),0.01*(1.9**(1..16))).softclip
});
)

(
Ndef(\magick).quant = 2.0;
Ndef(\magick).fadeTime = 2.0;
Ndef(\magick,{
	Splay.ar(
		CompanderD.ar(
		CombN.ar(
		SinOsc.ar(43.2 * ( LFTri.ar(432e-3/fib(32) ).squared.range(1,3) ** (1..32)),mul:1/fib(12)) +
				WhiteNoise.ar(0.015!32) * Ndef(\rythm).ar
		,1,432e-5*(1.01**(1..32)),(2**(1..16)),mul:1/fib(12))
		,0.5,1,0.5).softclip
			,0.33,1)}).play;
)(
Ndef(\a).fadeTime = 2.0;
Ndef(\a).quant = 2.0;
Ndef(\a,{
	var base,saws;
	base = [60,60.13] * LFNoise0.ar(1/8).range(0.75,3).round(0.25);
	saws = LFSaw.ar(1/8/[1,2,3,5,8,13,21,34,55,89]).squared;
	Splay.ar(
		saws * LFSaw.ar(base).lag(SinOsc.kr([11,11.1]).exprange(0.00001,0.01))
)}).play;

Ndef(\a)[1] = \filter -> {|in| Pan2.ar(in,SinOsc.ar(0.1).range(-0.5,0.5))};
Ndef(\a)[2] = \filter -> {|in| MoogFF.ar(in,SinOsc.kr(1/[11,22/1.001,44,88,120]).range(60,11000))};
Ndef(\a)[3] = \filter -> {|in| GVerb.ar(in,100,SinOsc.kr(0.0011).range(2,80),SinOsc.kr(0.111).range(0.25,0.75),SinOsc.kr(0.1111).range(0.25,0.75),mul:0.75,add:in)};
)


// filter kill
Ndef(\a)[1] = nil;
Ndef(\a)[2] = nil;
Ndef(\a)[3] = nil;

// gentle stop
Ndef(\a).stop(10);

//hard stop >> free CPU
Ndef(\a).clear;



(
Tdef(\sweet,{
	loop{
		(
			var mod;
			mod = 2.rrand([8,8,8]).squared.round([8,8,8])/4;
			mod.postln;

			Ndef(\b).quant = 2.0;
			Ndef(\b).fadeTime = 1.0;
			Ndef(\b,{|mod = #[1,1,1]|
				var s;
				s = CombN.ar(
					LFSaw.ar(mod/2/[1,2,2,4]).squared *
					// Pulse.ar(4/[1,2,2,4]) *
					SinOsc.ar(43.2/8*([1,2,4,8]*(mod*[1pi,0.5pi])),mul:0.5)
					,1,0.25,4);

				s = Vibrato.ar(s,[4,5,6,7],0.2);
				s = SinOsc.ar(1/4/[1,2,4]) * s;

				Splay.ar(
					Compander.ar(s,s,0.85,1,0.25,0.01,0.01).softclip
			).clip(-1,1)}).play;

			Ndef(\b).lag(\mod,0.015);
			Ndef(\b).set(\mod,mod);
		);


		(
			mod = 2.rrand([8,8,8]).squared.round([8,8,8])/4;
			mod.postln;

			Ndef(\c).quant = 2.0;
			Ndef(\c).fadeTime = 1.0;
			Ndef(\c,{|mod = #[1,1,1]|
				var s;
				s = CombN.ar(
					LFSaw.ar(mod/2/[1,2,2,4]).squared *
					// Pulse.ar(4/[1,2,2,4]) *
					LFSaw.ar(43.2/32*([1,2,4,8]*(mod*[1pi,0.5pi])),mul:0.5)
					,1,0.25,4).lag(0.01);

				s = Vibrato.ar(s,[4,5,6,7],0.2);
				s = SinOsc.ar(1/4/[1,2,4]) * s;

				Splay.ar(
					Compander.ar(s,s,0.85,1,0.25,0.01,0.01).softclip
			).clip(-1,1)}).play;

			Ndef(\c).lag(\mod,0.01);
			Ndef(\c).set(\mod,mod);
		);

		4.wait;
	}
}).play;

)s.scope;

(
Tdef(\worker,{
	loop{


		Ndef(\meta).fadeTime = 0.1;
		Ndef(\meta,{
			var base1,base2,f1,f2,notes1,notes2;
			base1 = [432,432.1]/2;
			base2 = [432,432.1]*2;

			notes1 = [1,2,0.5,1,1.5].at(0.rrand(4)) * base1 / ([1,2,4,8].at(0.rrand(3)));
			notes2 = [1.5,1.25,1.125,1,1.5].at(0.rrand(4)) * base2 / ([1,2,4,8].at(0.rrand(3)) * pi);

			f1 = (notes1);
			f2 = (notes2);


			Splay.ar(
				SinOsc.ar(f1 + SinOsc.ar({ExpRand()/10.0}!12,{ExpRand()}!12).range(-4,4),mul:0.5) *
				SinOsc.ar(f2 + SinOsc.ar({ExpRand()/10.0}!12,{ExpRand()}!12).range(-4,4),mul:0.5)

		)});

		Ndef(\hissa,{
			Splay.ar(
				BPF.ar(WhiteNoise.ar(0.1!2),{ExpRand()*22000}!4) * LFSaw.ar([1,2,4,8,16].at(0.rrand(4))/[1,2,3,5]).squared;
			)
		});


		2.wait;
	};
}).play;

// postproduction
Ndef(\cycler,{
	var signal;
	signal = CombN.ar(
		Vibrato.ar(
			Ndef(\meta).ar
			,[4,5,6,7],0.2)
		,8,0.432/2,8) *
	Decay.ar(Impulse.ar(4/[1,2]),1) + Ndef(\hissa).ar;


	Splay.ar(
		GVerb.ar(signal,mul:0.33,add:signal)
		,0.5,0.25)
}).play;

)
(
Ndef(\rythm).fadeTime = 4;
Ndef(\rythm).quant = 2;

Ndef(\rythm).mold(16);
Ndef(\rythm,{
	LFSaw.ar(1/4/(1..4),0.01*(1.9**(1..16))).abs.softclip
});
)

(
Tdef(\tt1,{

	var pos1 = {( SinOsc.ar(432e-3/fib(23) ).range(1,2).round(1/2) ** (1..23))};
	loop{
		(
			Ndef(\magick1).quant = 2.0;
			Ndef(\magick1).fadeTime = 8.0;
			Ndef(\magick1,{
				Splay.ar(
					CompanderD.ar(
						AllpassN.ar(
							LFTri.ar(1/[4,5,6,7],mul:0.5) + LFTri.ar(0.432 * {[1,1.5,2,4,1/4,1/8].choose}!4 * pos1,mul:2/fib(12)) +
							WhiteNoise.ar(0.015!32) * Ndef(\rythm).ar
							,1,432e-5*(1.001**(1..32)),1/(1.0012**(1..16)),mul:2/fib(12))
						,0.5,1,0.5).softclip
					,0.33,1)}).play;
		);
		8.wait;
	}

}).play;
)

(
Ndef(\rythm).fadeTime = 4;
Ndef(\rythm).quant = 2;

Ndef(\rythm).mold(16);
Ndef(\rythm,{
	LFSaw.ar(1/4/(1..4),0.01*(1.9**(1..16))).squared * Decay.ar(Impulse.ar(4/[1,2,4,8]),(8/fib(16))) + LPF.ar(WhiteNoise.ar(0.025!16),440)
});
)




(
Tdef(\tt,{

	var pos1 = {( SinOsc.ar(432e-3/fib(23) ).range(1,2).round(1/2) ** (1..23))};
	loop{
		(
			Ndef(\magick).quant = 2.0;
			Ndef(\magick).fadeTime = 8.0;
			Ndef(\magick,{
				Splay.ar(
					CompanderD.ar(
						AllpassN.ar(
							LFTri.ar(1/4/[4,5,6,7],mul:0.5) + SinOsc.ar(0.432 / [1,2,0.5].choose * {[1,8,1.5,2,4,1/4,1/8].choose}!4 * ~pos1,mul:2/fib(12)) +
							WhiteNoise.ar(0.015!32) * Ndef(\rythm).ar
							,1,1/(1.01**(1..16)),32/(1.0012**(1..16)),mul:2/fib(12))
						,0.5,1,0.5).softclip
					,0.33,1)}).play;
		);
		8.wait;
	}

}).play;
)
(
Ndef(\rythm).fadeTime = 4;
Ndef(\rythm).quant = 2;

Ndef(\rythm).mold(16);
Ndef(\rythm,{
	LFSaw.ar(1/4/(1..4),0.01*(1.9**(1..16))).squared * Pulse.ar(4/[1,2,4,8])
});
)



(
var pos1;
pos1 = {( SinOsc.ar(432e-3/fib(23) ).range(1,2).round(1/2) ** (1..23))};

Tdef(\tt,{

	loop{
		(
			Ndef(\magick).quant = 2.0;
			Ndef(\magick).fadeTime = 8.0;
			Ndef(\magick,{
				Splay.ar(
					CompanderD.ar(
						AllpassN.ar(
							LFTri.ar(4/[4,5,6,7],mul:0.5) + LFTri.ar(0.432 / 2 * {[1,8,1.5,2,4,1/4,1/8].choose}!4 * pos1,mul:2/fib(12)) +
							WhiteNoise.ar(0.015!32) * Ndef(\rythm).ar
							,1,1/(1.2**(1..32)),32/(1.0012**(1..16)),mul:2/fib(12))
						,0.5,1,0.5).softclip
					,0.33,1)}).play;
		);
		8.wait;
	}

}).play;
)
(
Ndef(\1,{Splay.ar(

	CombN.ar(
		LPF.ar(
			FreeVerb.ar(
				BBandPass.ar(
					CompanderD.ar(
						SinOsc.ar(22000/(1.5**(8..16)).scramble) +
						LFSaw.ar(43.2/(1.00022**(1..32)),SinOsc.ar(4.32/(1.00011**(1..32))).range(-4pi,4pi),mul:1) * LFSaw.ar(1/4/fib(21)).squared
						,0.125,0.5,1,0.001,0.001)
					,SinOsc.ar(1*(1.01**(1..32))).range(44,4320))
				,0.133,100)
			,4320)
		,0.133/(1.01*(1..32)),4,32)
	,0.4,1)}).play;
)


s.scope;


(
Tdef(\t,{
	loop{
		(
			Ndef(\a).quant = 1;
			Ndef(\a).fadeTime = 2.0;
			Ndef(\a,{
				var d1,d2;
				d1 = Decay.ar(Impulse.ar([1,1/8,1/2,1/16]*8,[0,0.25,0.5,0.75]),{ExpRand()*2}!4);

				d2 = Decay.ar(Impulse.ar([1,2,1/2,4].scramble*1,[0,0.1125,0.25,0.75]),{ExpRand()/2}!4);

				Splay.ar(
					FreeVerb.ar(
						Vibrato.ar(
							LPF.ar(
								(SinOsc.ar([77,7777*LFNoise0.ar(1/4),88,777*LFNoise0.ar(1/4)]*d1.cubed) * d1)
								,7777) +
							RHPF.ar(
								(WhiteNoise.ar({ExpRand()*2}!4) * d2)
								,22000*{ExpRand()}!4)
							,[4,5,6,7],0.2)
						,0.33,[1,2,4,8])
			)});


			(
				var num,speed,sharpness,slope;
				num = 3.rrand(24);
				speed = rrand(1/4,16)/[12,18,22,99,0.1].scramble;
				sharpness = 0.1.rrand(0.5);
				slope = 48;

				Ndef(\filtr).quant = 1;
				Ndef(\filtr).fadeTime = 2.0;
				Ndef(\filtr,{
					Splay.ar(
						BPF.ar(
							Ndef(\a).ar
							,(1..num-1)*(22000/num-1),sharpness,SinOsc.ar({ExpRand()*speed}!16).exprange(0.001,slope)
						)
						,0.17,1)}).play;
			);
		);
		8.wait;
	}

}).play;
)






s.boot;

(
Ndef(\noisOsc).quant = 2.0;
Ndef(\noisOsc).fadeTime = 2.0;

Ndef(\noisOsc,{
	var t;
	t = 8;
	Splay.ar(
		LFPar.ar([999,999.1]/4pi,mul:0.5).distort + LPF.ar(BrownNoise.ar(0.12!2),220+SinOsc.ar(5.5).range(-55,550))
,1,0.5)}).play;


Ndef(\noisOsc)[1] = \filter -> {|in| Vibrato.ar(in,t-1,[1,7/4],0.14,0,0.1,0.1)};
// Ndef(\noisOsc)[2] = \filter -> {|in| FreeVerb.ar(in,0.533,1,add:in)};
Ndef(\noisOsc)[3] = \filter -> {|in| in * LFSaw.ar(t)};
Ndef(\noisOsc)[4] = \filter -> {|in| FreeVerb.ar(in,0.333,100,add:in)};
)


// hello there this is livecoding session

//the server dies when I evaluate the first line after the Ndef

(
Ndef(\ttt).quant = 2.0;
Ndef(\ttt).fadeTime = 2.0;
Ndef(\ttt,{|freq = 200,temp = #[4,2,1,1,1,1,1,1],echo=0.032,room = 2,eff=1,amm = 0.2|
	Splay.ar(
		CombN.ar(
			Vibrato.ar(SinOsc.ar(freq!2),temp,amm)
		,room,echo,room,eff)
)}).play;
)


Ndef(\ttt).lag(\eff,10,\room,10,\freq,0.02,\temp,10,\amm,10,\echo,10);

Ndef(\ttt).set(\freq,[432,432.1,432.1/2]*1.5pi)

Ndef(\ttt).set(\room,2)
Ndef(\ttt).set(\amm,1)
Ndef(\ttt).set(\temp,[1,2,4,8]/8)
Ndef(\ttt).set(\echo,0.133)
Ndef(\ttt).set(\eff,0.5)

(
Ndef(\g).quant = 2.0;
Ndef(\g).fadeTime = 0;
Ndef(\g,{|speed = 1,freq = 432|Select.kr(Stepper.kr(Impulse.kr(8*speed),max:7),[1/1.5,0.5,1/8,0.25,1/4,3,1.5,1.25]*freq)});
)

Ndef(\g).lag(\speed,1,\freq,5);
Ndef(\g).set(\speed,1);
Ndef(\g).set(\freq,120*2pi);

Ndef(\ttt).map(\freq,Ndef(\g));s.boot;

//////////////////////

(
t = Tuning.harmonic;
Ndef(\bass).quant = 2.0;
Ndef(\bass).fadeTime = 2.0;

Ndef(\bass,{|f=1,v=1,d=1,dd=1,room=1,vol=1,fd = -1|
	var f;
	Splay.ar(
		f = t.cents.at([1,2,7,11]) / (pi * f);
		FreeVerb.ar(
			MoogFF.ar(
				XFade2.ar(
				LFSaw.ar(f),
					SinOsc.ar(f),
					fd.lag(dd*2))
				,SinOsc.ar(f/(v.lag(dd)*16+0.1)).range(f/(d),f*(d))
		) * Decay.ar(Impulse.ar((dd*4)/[1,2,4,8]),2/dd)
			,0.33,room.lag(dd)).softclip
	)
}).play;
)

//////// animate params /////////////

(
Ndef(\bass)[1] = \set -> Pbind(
	\dur, Pseq(  [1,1,1,1,2],inf),
	\amp, Pxrand([1,1/2,1,1/4*3]*0.9,inf),
	\f, Pseq(    [4,2,1,4,1,2,8,1.5,3,6],inf),
	\v, Pseq(    [1,1,4,8,16,32,1,1,1,2]*32,inf),
	\d, Pseq(    [1,1,1,2],inf),
	\dd, Pseq(   [1,1,1,1/2,1,2,1],inf),
	\room, Pseq( [1,1,1,2,4,1,1],inf),
	\fd, Pxrand([-1,1,0,0.5,-0.5],inf)
);
)
s.scope;

(
(
Tdef(\at,{
	loop{


		Ndef(\a).fadeTime = 1.0;
		Ndef(\a,{
			var fa;
			fa = [1,2,4,8].at(0.rrand(3)) * pi;

			Splay.ar(
				Vibrato.ar(
					SinOsc.ar([432,432.1] / (fa) + SinOsc.kr({ExpRand()*2}!4).range(-2,2)  ,mul:0.233) * LFSaw.ar(1/2/[1,2,4,8],{ExpRand()*pi}!4).squared
					,[5,6,7,8],0.2)

		)}).play;

		Ndef(\a)[1] = \filter -> {|in| GVerb.ar(in,{ExpRand()*100}.round(1)+3,mul:0.8,add:in)};

		4.wait;
	}
}).play(quant:2);
);

(
Tdef(\bt,{
	loop{

		Ndef(\b).fadeTime = 3.0;
		Ndef(\b,{

			var fb;
			fb = [1.5,1.25,1.125,3].at(0.rrand(3)) * pi;

			Splay.ar(
				Vibrato.ar(
					SinOsc.ar([432,432.1] / (fb) + SinOsc.kr({ExpRand()*2}!4).range(-2,2) ,mul:0.233) * LFSaw.ar(1/2/[1,2,4,8],{ExpRand()*pi}!4).squared
					,[4,5,6,7],0.1)

		)}).play;

		Ndef(\b)[1] = \filter -> {|in| GVerb.ar(in,{ExpRand()*100}.round(1)+3,mul:0.8,add:in)};

		8.wait;
	}
}).play(quant:2);
);
)

(
Tdef(\hisst,{

	loop{
		var tempo;
		tempo = ({ExpRand()*16}.round(2))+1;

		Ndef(\hissa).fadeTime = 0.5;
		Ndef(\hissa,{Splay.ar(

			HPF.ar(
				WhiteNoise.ar(1!4) * Decay.ar(Impulse.ar(tempo/[1,2,3,5,8]),1/tempo)
				,LFNoise0.ar(tempo!4).range(44,10000),0.5)
		)}).play;
		Ndef(\hissa)[1] = \filter -> {|in| GVerb.ar(in,{ExpRand()*100}.round(1)+3,mul:0.8,add:in)};

		0.5.wait;
	}

}).play;

)

(
Ndef(\a).fadeTime = 8.0;
Ndef(\a).quant = 2.0;
Ndef(\a,{
	var m,s,a;
	m = Select.kr(Stepper.kr(Impulse.kr(1/4)),[1,2,4,8,1.5,2,4,8]);

	s = Select.kr(Stepper.kr(Impulse.kr(1/8/[1,2,4,8])),[1,2,4,8,1.5,2,4,8] * 8pi);
	a = CombN.ar(Vibrato.ar( LFPulse.ar(1/4/[1,2,4,8,16,32,64]),1/[1,2,4,8],0.125,8).range(0,4).round(1) ** LFPulse.ar(1/[1,2,4,8]).round(0.5).range(1,8) / s,1/[1,2,4,8],0.25);

	Splay.ar(
		FreeVerb.ar(
			Vibrato.ar(
				SinOsc.ar([1,1+(1/m)]*a,a.lag(0.001)/8pi) + LFSaw.ar([1,1+(1/m)]*a/2,a.lag(0.001)/8pi,mul:0.2) * Decay.ar(Impulse.ar(4/[1,2,2,4]),SinOsc.ar((1..10)/100.1).range(0,1));
				,[4,5,6,7],0.2)
			,0.33,100)
		,1,0.5)}).play;
)


(
Ndef(\pila).fadeTime = 2.0;
Ndef(\pila).quant = 2.0;

Ndef(\pila,{
	(
		CombN.ar(
			LFSaw.ar([0.5,2]*1/2) * LFSaw.ar([0.5,2]*22) * LFPulse.ar(1/[1,2]).lag(0.01)
			,0.1,LFNoise1.ar(320!2).range(1,160)/48000,32)
	).softclip * SinOsc.ar([44,44.1]*2,mul:0.45)
}).play;
)s.boot;


(
Ndef(\evlover).quant = 2.0;
Ndef(\evlover).fadeTime = 2.0;
Ndef(\evlover,{
	var mod,f;
	mod = LFNoise0.kr(1/[1,2,3,5,8,12,21,34]).range(-24,24).round(12);
	f = ([61,63,67]-24+mod).midicps + LFNoise0.ar(1).lag(1);

	Splay.ar(
		FreeVerb.ar(
			AllpassN.ar(
				LPF.ar(
					TwoPole.ar(
						XFade2.ar(
							SinOsc.ar(f/2,mul:0.7),
							SinOsc.ar(f*1.5,mul:0.7),
							SinOsc.kr(1/16)
						),
						SinOsc.ar(f/4096.0).range(f/2,f*2),
						SinOsc.ar(1/16/[1,2,3,5,8]).exprange(0.001,0.35)
					),
					SinOsc.ar(f/804.80).range(f/2,f*2)
			),0.66,0.33,4,mul:1) *
			Decay.ar(Impulse.ar(8/[1,2,3,5,8,13,21,34]),1/2)
			,0.133,2).softclip
	)
}).play;
)



(
Ndef(\hiss).fadeTime = 2.0;
Ndef(\hiss).quant = 2.0;
Ndef(\hiss,{Splay.ar(
	FreeVerb.ar(
		OnePole.ar(WhiteNoise.ar([0.2,0.2]),SinOsc.kr(1/[16,16.6]).range(-0.99,0.99)) * Decay.ar(Impulse.ar(8/[1,2,3,5,8]))
	)
)}).play;
)

(
Ndef(\beat).fadeTime = 2.0;
Ndef(\beat).quant = 2.0;
Ndef(\beat,{Splay.ar(
	OnePole.ar(SinOsc.ar([77,77.1]),SinOsc.ar(0.1).range(-0.99,0.99)) * Decay.ar(Impulse.ar(8/[1,2,3,5,8]));
)}).play;
)


s.boot;



(

Ndef(\bassline).quant = 2.0;
Ndef(\bassline,{|sp = 1, l = 0.5|
	Splay.ar(
		SinOsc.ar([60,61]) * Decay.ar(Impulse.ar((8*sp)/[1,3,5,8]),l.lag(0.5)).squared;
)}).play;

//////////////

Ndef(\bassline)[1] = \set -> Pbind(
	\dur, 1/2,
	\l,  Pseq([1,1,1,2,1/2,1,2]/2,inf),
	\sp, Prand([1,1,1,1,1/2],inf)
);

/////////////

Ndef(\hiss).quant = 2.0;
Ndef(\hiss,{|sp = 1,hpf = 200,l=0.5,echo=1|
	Splay.ar(
		FreeVerb.ar(
			BPF.ar(
				WhiteNoise.ar(1!2),
				hpf.lag(1/32)) *
			Decay.ar(Impulse.ar((8*sp)/[1,3,5,8]),l.lag(0.5)).squared;
			,echo,1)
)}).play;

////////////

Ndef(\hiss)[1] = \set -> Pbind(
	\dur, 1/4,
	\l,  Pxrand([1,1,1,2,1/2,1,2] / 4,inf),
	\sp, Prand([1,1,1,1,1,2],inf),
	\hpf,Pxrand([1/8,1/4,1/2,2,3,1,8,4,4,10] * 2000,inf),
	\echo, Pxrand([1,1,1,2,1/2,1,2]/8 ,inf),
);

//////////////

t = Tuning.harmonic;
Ndef(\bass).quant = 2.0;
Ndef(\bass,{|mod1 = 1,mod2 = 0.5|
	var f;
	Splay.ar(
		t = t.cents.at([1,2,7,11]) / (mod1.lag(0.1) * pi) * mod2;

		FreeVerb.ar(	SinOsc.ar(t,SinOsc.kr(t.lag(1)/([1,2,4,8]*8000)).range(-8pi,8pi),mul:LFSaw.kr(1/4).exprange(0.001,0.4));
			,0.133,1)
)}).play;

Ndef(\bass)[1] = \set -> Pbind(
	\dur, 4,
	\mod1, Pseq([1,1,1.5,1,1,2]*16,inf),
	\mod2, Pxrand([1,1,2,1,1,4]*4,inf),
);
)





(
Ndef(\atm,{Splay.ar(
	FreeVerb.ar(
		in:(SinOsc.ar(1/16/[2,4,8,16],LFSaw.ar([55.001,55]).range(-pi,pi)) * LFSaw.ar(4/[1,2,3,5,8,13],mul:1.5)),
		mix:(SinOsc.ar(2.1/[2,4,8,16],LFSaw.ar(1/2/[11.0001,11.0]).range(-pi,pi)) * LFSaw.ar(2/[2,4,8,16])).range(0.1,0.9),
		room:(SinOsc.ar(4.1/[2,4,8,16],LFSaw.ar(1/2/[22.0001,22.0]).range(-pi,pi)) * LFSaw.ar(4/[2,4,8,16])).range(0.01,0.5)
	).distort

)}).play;
)
(
Ndef(\high).quant = 2.0;
Ndef(\high).fadeTime = 4.0;

Ndef(\high,{
	var f;
	f = [432,432.1] * [1,2,4,0.5,0.25,0.125].scramble * 1pi;
	Splay.ar(
		RLPF.ar(
			Resonz.ar(
				LFSaw.ar(f/1.005,{ExpRand()}!8) * LFSaw.ar(1/16/[1,2,3,5,8,13]).squared;
				,SinOsc.ar(f/8).range(f/2,f*2))
			,SinOsc.ar(f/4.1).range(f/2,f*2))
)}).play;


Ndef(\high)[1] = \filter -> {|in| AllpassN.ar(CombN.ar(Vibrato.ar(in,[4,5,6,7,9,10],0.5),2,{ExpRand()}!8,4,mul:0.4,add:in),2,{ExpRand()}!8,2,mul:0.5,add:in)};

)



(
Ndef(\low).quant = 2.0;
Ndef(\low).fadeTime = 4.0;

Ndef(\low,{
	var f;
	f = [432,432.1] * [1,2,4,0.5,0.25,0.125].scramble / 4;
	Splay.ar(
		RLPF.ar(
			Resonz.ar(
				 SinOsc.ar(f,{ExpRand()}!8) * LFSaw.ar(1/8/[1,2,3,5,8,13]).squared;
				,SinOsc.ar(f/8).range(f/2,f*2))
			,SinOsc.ar(f/4.1).range(f/2,f*2))
)}).play;


Ndef(\low)[1] = \filter -> {|in| AllpassN.ar(CombN.ar(Vibrato.ar(in,[4,5,6,7,9,10],0.5),2,{ExpRand()}!8,4,mul:0.4,add:in),2,{ExpRand()}!8,2,mul:0.5,add:in)};

)



(
Ndef(\beeps).quant = 2.0;
Ndef(\beeps).fadeTime = 4.0;

Ndef(\beeps,{
	var f;
	f = [432,432.1] * 4 * [1,2,4].scramble;
	Splay.ar(
		RLPF.ar(
			Resonz.ar(
				LFSaw.ar(f/1.005,{ExpRand()}!8) * Decay.ar(Impulse.ar(1/[1,2,3,5,8,13]),0.13)
				,SinOsc.ar(f/2048).range(f/2,f*2))
			,SinOsc.ar(f/1024.1).range(f/2,f*2))
)}).play;


Ndef(\beeps)[1] = \filter -> {|in| AllpassN.ar(CombN.ar(Vibrato.ar(in,[4,5,6,7,9,10],0.5),2,{ExpRand()*10}!8,4,mul:0.4,add:in),2,{ExpRand()*10}!8,2,mul:0.5,add:in)};

)(
Ndef(\psychadelic,{
	var a;
	a = FreeVerb.ar(
		CombN.ar(
			CombN.ar(
				sin(LFSaw.ar(220*(LFSaw.ar(1/[1,2,4,8]).range(0.01,1))*2200))
				,1,0.1*((cos(1-LFSaw.ar(1/64))+1.0001) ),40).lag(0.001+LFSaw.ar(11).range(0,0.1)) * LFSaw.ar(432/[1.5pi,2pi]) * SinOsc.ar([44,45]*2) * Pulse.ar(8/[1,2,4,8])
			,0.01,0.1*((sin(1-LFSaw.ar(1/640.13))+1.0001) ),40).lag(0.01+LFSaw.ar(4/[1,2]).range(0,0.1))
		,0.199,10) * 2;

	Splay.ar(
		Compander.ar(a,a,0.4,1,0.0025,0.01,0.01)
,0.1,1).clip(-1,1)}).play;
)
s.boot;
s.scope;


// can explode (?)

(
Ndef(\abc).quant = 2.0;
Ndef(\abc).fadeTime = 2.0;

Ndef(\abc,{
	var t;
	t = 2/[1,2,3,5,8];
	Splay.ar(
		AllpassN.ar(

			Normalizer.ar(
				CombN.ar(
					RLPF.ar(
						XFade2.ar(LPF.ar(WhiteNoise.ar(1!4),LFNoise0.ar(2!4).range(200,8800)),SinOsc.ar(LFSaw.ar(t).range(44,[54.002,54.001])),Decay.ar(Impulse.ar(t),0.015*t).range(-0.5,1).squared) * Decay.ar(Impulse.ar(t),0.25)
						,54) + LFSaw.ar(16)
					,0.15,LFSaw.ar(0.25pi*[1.1,2.2,3.3,4.4]).range(0.0001,0.15).squared,12)

			).softclip * Decay.ar(Impulse.ar(t*2),0.5) * 2
			,1,0.0133,4).lag(t/100000.0)
		,SinOsc.ar(0.01).range(0.1,1),1)}).play;
)
Quarks.gui
// >> install batlib >> recompile library classes

// batlib quark, secure output
StageLimiter.activate;

(
Ndef(\qqq,{

	var mod,mod2;
	mod2 = LFSaw.ar(1/4/[1,2,4,8]).range(1,8).round(2);
	mod = SinOsc.ar(1/8/[1,2,4,8]).range(1,8).round(2) + mod2;

	Splay.ar(
	LPF.ar(
	CompanderD.ar(
	Normalizer.ar(
		AllpassN.ar(
			Pulse.ar(4/[1,2,4,8]) * SinOsc.ar([1111,1111.1/1.5,111/1.25,111/1.5]*mod/12pi)
			,TExpRand.ar(0.0001,8,Impulse.ar(1/8!8)).lag(8),TExpRand.ar(0.01,8,Impulse.ar(8!8)).lag(0.01),8)
	,1.5,0.5)
	,0.5,1,0.5)
	,8800)
)}).play;
)

s.scope;

(
Ndef(\saw).fadeTime = 4.0;
Ndef(\saw).quant = 2.0;
Ndef(\saw,{
	var lfo,steps;
	lfo = LFNoise0.ar(1/4/[1,2,4,8]).range(1,8).round([pi/1.125,pi/1.25,pi/1.5,pi/1]);
	steps = Select.kr(Stepper.kr(Impulse.kr(1/4/[1,2,4,8])),[2,4,8,1.5,8,2,4,8]);

	Splay.ar(
		FreeVerb.ar(
			Vibrato.ar(
				LFSaw.ar([432,432.1] * lfo / [1,2,4,8] / steps + LFNoise0.ar([4,5,6,7]).range(-3,3).lag(3)) * LFSaw.ar(1/4/[1,2,4,8],SinOsc.ar((_*0.1!32)+0.00001).range(-1pi,1pi),mul:0.5).squared,
				[5,6,7,8],0.2,0,0,0.2,0.1
			)
			,0.5,2,0.5)
		,1,0.5)
}).play;
)



(
Ndef(\osc).fadeTime = 10.0;
Ndef(\osc).quant = 2.0;
Ndef(\osc,{
	var lfo,steps;
	lfo = LFNoise0.ar(1/4/[1,2,4,8]).range(1,8).round([pi/1.125,pi/1.25,pi/1.5,pi/1]);
	steps = Select.kr(Stepper.kr(Impulse.kr(1/4/[1,2,4,8])),[2,4,8,1.5,2,4,8]);
	Splay.ar(
		FreeVerb.ar(
			Vibrato.ar(
				LFSaw.ar([432,432.1] * lfo / [1,2,4,8] / steps + LFNoise0.ar([4,5,6,7]).range(-3,3).lag(3)) * LFSaw.ar(1/4/[1,2,4,8],SinOsc.ar((_*0.1!32)+0.00001).range(-1pi,1pi),mul:0.5).squared,
				[5,6,7,8],0.2,0,0,0.2,0.1
			)
			,0.5,2,0.5)
		,1,0.5)
}).play;
)


Ndef(\osc).stop(10)
Ndef(\saw).stop(10)

Ndef(\osc).clear
Ndef(\saw).clear

(
Ndef(\r).fadeTime = 0.1;
Ndef(\r).quant = 2.0;

Ndef(\r,{
	var s;
	Splay.ar(
	s = Select.kr(Stepper.kr(Impulse.kr(1/4)),[2,1.5,1/2,1/4,2,1.5,1,1,1]);
	FreeVerb.ar(
		LPF.ar(
			(LFSaw.ar([77,77.01]/s,SinOsc.ar(0.11).range(-pi,pi),mul:0.3) * LFPulse.ar(4/[1,2,4,8],mul:[1,1,1/2,1/4])) +

			OnePole.ar(WhiteNoise.ar(0.05!4) * LFPulse.ar(4/[1,2]),SinOsc.ar(8/[2,4,8,16]).range(-0.9,0.9))
			,LFSaw.ar(1.01/8/[1,2,4,8]).exprange(44.1,22000))
		,0.13633,1)
)}).play;

)

Ndef(\r).stop(1)

s.freeAll;


(
Ndef(\z).quant = 2.0;
Ndef(\z).fadeTime = 1.0;
Ndef(\z,{Splay.ar(

	FreeVerb.ar(
		AllpassC.ar(
			LPF.ar(
				OnePole.ar(
					LFSaw.ar([1,2,4,8],mul:0.5) * LFSaw.ar([55,55.1,55.2,55.3]),SinOsc.ar(0.1).range(-0.9,0.9)
				)
				,SinOsc.kr(0.01).range(110,1760))
			,0.133,0.133,1)
		,0.133,1)
)}).play;
)

Ndef(\z).stop(1)

(
Ndef(\d,{Splay.ar(

			AudioIn.ar([0,1],1)

)}).play;
)

(
Ndef(\neu).quant = 2.0;
Ndef(\neu,{

	var s;
	s = Select.kr(Stepper.kr(Impulse.kr(1/16)),[1,1.5,1.25,1.125,1,1,1,1]);
	Splay.ar(
		AllpassC.ar(
			LPF.ar(
				OnePole.ar(VarSaw.ar(67.midicps/[1,2,4,8,1/2]*s,SinOsc.kr(0.01).range(-8pi,8pi),SinOsc.kr(0.1).range(0.01,0.99),mul:0.1) * LFPulse.ar(4/[1,2]),SinOsc.kr([0.1,0.11]).range(-0.5,0.5))
				,880)
			,0.033,0.033,4)
	)
}).play;
)

Ndef(\neu).stop(1)

Ndef(\t,Splay.ar(


))

Ndef(\neu).stop(1);

Ndef(\r).stop(2);
(
Ndef(\a,{Splay.ar(

	var env,f;
	~env = LFSaw.ar(1/4/fib(21)).squared;
	~f = LFNoise0.ar(1/4/fib(21)).range(0.01,12).round(pi/2).lag(0.1) /
	{TRand.ar(0.5,8,Impulse.ar(1/4/fib(21))).round(1)} +
	SinOsc.ar(1/[4,5,6,7]).range(-0.02,0.02);

	FreeVerb.ar(
		LPF.ar(
			CombN.ar(
				CompanderD.ar(
					OnePole.ar(
						LFSaw.ar(432*~f*(1.0001**(1..32)),mul:0.5/fib(12)).distort.tanh +
						LFTri.ar(43.2*(~f/1.5)*(1.001**(1..32)),mul:0.5/fib(12)).distort.tanh * ~env
						,SinOsc.ar(0.1/fib(8)).range(0.1,0.9))
					,0.5,1,0.5,SinOsc.ar(0.1/(2**(1..12))).range(0.001,0.1))

				,1,0.133/(1.001**(1..12)),8/fib(12))
			,880)
		,0.33,80)
	,0.5,1)}).play;
)


(
Ndef(\1).quant = 4.0;
Ndef(\1).quant = 2.0;
Ndef(\1,{
	Splay.ar(
		AllpassC.ar(
			SinOsc.ar([55,55.5]).tanh
			,0.1,TExpRand.ar(0.0002,0.05,Impulse.ar(4!4)).lag(1/2000))
		* Pulse.ar(4/[1,2,2,4])
)}).play;
)


/// 2nd derivation


(
Ndef(\2).quant = 4.0;
Ndef(\2).quant = 2.0;
Ndef(\2,{
	Splay.ar(
		AllpassC.ar(	(LFSaw.ar(TExpRand.ar(43.2,432,Impulse.ar(8!4)).round(432/[1,2,4,8]).lag(1/40) ,mul:0.15))
			,0.1,TExpRand.ar(0.0002,0.5,Impulse.ar(4!4)).lag(1/40))
		* Pulse.ar(4/[1,2,2,4])


).softclip}).play;
)

s.boot;


(
Ndef(\a).quant = 2.0;
Ndef(\a).fadeTime = 2.0;

Ndef(\a,{
	var mod,lfo,sig1,sig2,sig3;
	mod = Select.kr(Stepper.ar(Impulse.ar(1/8/[4,8,7,13,21,55])),[1,1,1,1.5,3,1/2,1/2,1,1.5]);
	lfo = SinOsc.kr(1/8).range(0.00001,0.2);
	sig1 = SinOsc.ar([99,99.1],LFNoise0.ar(1/2!8).lag(lfo)*8pi,mul:0.5) * Decay.ar(Impulse.ar(8/[1,2,3,5,8]),0.15);
	sig2 = VarSaw.ar([440,440*1.25]/([1,1.5,1.25,3,1,0.5,0.125]*(mod*pi))+LFNoise0.kr(4!4).lag(0.1),LFNoise0.ar(1/2!8).lag(lfo)*8pi,lfo,mul:0.25) * VarSaw.ar(1/8/[4,8,7,13,21,55],{ExpRand()*8pi}!8).squared;
	sig3 = HPF.ar(WhiteNoise.ar(0.15!4) * Decay.ar(Impulse.ar(8/[1,2,3,5,8,13]),0.15),8800);
	Splay.ar(
		sig1 + sig2 + sig3
)}).play;

Ndef(\a)[1] = \filter -> {|in| Vibrato.ar(in,6+(1/[1,2,4,8]),0.1/[1,2,4,8])};
Ndef(\a)[2] = \filter -> {|in| FreeVerb.ar(in,0.333,10,mul:0.93,add:in/2)};
Ndef(\a)[3] = \filter -> {|in| RLPF.ar(in,SinOsc.ar([77,77.1]).range(110,2000),mul:0.33,add:in)};

)// Slightly melancholic, Coded by Kof @
// Mon Sep 22 00:54:19 CEST 2014
//
//
//
// ,dPYb,                  ,dPYb,
// IP'`Yb                  IP'`Yb
// I8  8I                  I8  8I
// I8  8bgg,               I8  8'
// I8 dP" "8    ,ggggg,    I8 dP
// I8d8bggP"   dP"  "Y8ggg I8dP
// I8P' "Yb,  i8'    ,8I   I8P
// ,d8    `Yb,,d8,   ,d8'  ,d8b,_
// 88P      Y8P"Y8888P"    PI8"8888
//                         I8 `8,
//                         I8  `8,
//                         I8   8I
//                         I8   8I
//                         I8, ,8'
//                          "Y8P'


///////////// boot server //////////////////////////////////////////////////////////////////////////////

s.boot;


///////////// High freq melody //////////////////////////////////////////////////////////////////////////////

(
Ndef(\High).fadeTime = 2.0;
Ndef(\High).quant = 2.0;

t = Tuning.harmonic;

Ndef(\High,{
	var modlong,mod,melody,notes;
	Splay.ar(
	modlong = Select.kr(Stepper.kr(Impulse.kr([1/2,1/4,1/8]/16)),2*[1,2,4,2,1,2,4,8]);

	mod = Select.kr(Stepper.kr(Impulse.kr([1/2,1/4,1/8]/4)),modlong*31.4159265359/[1,2,4,2,1,2,4,8]);

	melody = Select.kr(Stepper.kr(Impulse.kr([1/2,1/4])),[1,0.5,4,0.25,1.5,4,2,1.5]);
	notes = t.cents.at([1,2,11]) / mod * melody;

	FreeVerb.ar(
		RLPF.ar(
			XFade2.ar(
				SinOsc.ar(notes,mul:0.1).cubed,
				LFSaw.ar(notes,mul:0.1).distort,
				SinOsc.kr([0.1437,0.1897]).range(-0.9,0.9)) *

			Decay.ar(Impulse.ar((mod)/[1,2,3,5,8,13,21]),[1,2,3,5,8,13,21]/(mod/32))
			,SinOsc.kr(notes/1024.012).range(notes/2,notes*2)
		) * SinOsc.kr((_*0.137!8)+0.0112).range(0.1,1);

		,0.25,5,0.8)
)}).play;
)


//////////////// Low freq melody ///////////////////////////////////////////////////////////////////////////

(
Ndef(\Low).fadeTime = 2.0;
Ndef(\Low).quant = 2.0;

t = Tuning.harmonic;

Ndef(\Low,{Splay.ar(

	var mod,melody,notes;
	mod = Select.kr(Stepper.kr(Impulse.kr([1/2,1/4,1/8]/4)),2*31.415926536/[1,2,4,2,1,2,4,8]);

	melody = Select.kr(Stepper.kr(Impulse.kr([1/2,1/4])),[1,0.5,4,0.25,1.5,4,2,1.5]);
	notes = t.cents.at([1,2,7]) / mod * melody;

	FreeVerb.ar(
		RLPF.ar(
			XFade2.ar(
				SinOsc.ar(notes,mul:0.1).cubed,
				LFTri.ar(notes,mul:0.1).distort,
				SinOsc.kr([0.01,0.013]).cubed.range(-0.9,0.9)) *

			Decay.ar(Impulse.ar((mod*4)/[1,2,3,5,8,13,21]),[1,2,3,5,8,13,21]/(mod/13))
			,SinOsc.kr(notes/512.01).range(notes/2,notes*2)
		) * SinOsc.kr((_*0.1337!8)+0.01).range(0.1,1);

		,0.1,5.5,0.8)
)}).play;
)



//////////////// Long freq melody ///////////////////////////////////////////////////////////////////////////

(
Ndef(\Long).fadeTime = 2.0;
Ndef(\Long).quant = 2.0;

t = Tuning.harmonic;

Ndef(\Long,{Splay.ar(

	var modlong,mod,melody,notes;
	modlong = Select.kr(Stepper.kr(Impulse.kr([1/2,1/4,1/8]/16)),2*[1,2,4,2,1,2,4,8]);
	mod = Select.kr(Stepper.kr(Impulse.kr([1/2,1/4,1/8,1/16]/8)),modlong*31.415926536/[1,2,4,2,1,2,4,8]);

	melody = Select.kr(Stepper.kr(Impulse.kr([1/2,1/4,1/8,1/16]/8)),[1,0.5,4,0.25,1.5,4,2,1.5]);
	notes = t.cents.at([1,2,7,11]) / mod / melody;

	FreeVerb.ar(
		RLPF.ar(
			XFade2.ar(
				LFSaw.ar(notes/1.5+SinOsc.kr(0.1).range(-2,2),mul:0.4).cubed,
				LFSaw.ar(notes*1.5+SinOsc.kr(55).range(-2,2),mul:0.4).distort,
				SinOsc.kr([0.1,0.13]).cubed.range(-0.9,0.9))
			,SinOsc.kr(notes/2048.01).range(notes/2,notes*2)
		) * SinOsc.kr((_*0.1337!16)+0.01).exprange(0.01,1);

		,0.8,SinOsc.kr(1/[1,2,4,8]).range(0.2,5.5),0.8)
)}).play;
)

Ndef(\Low).scope(2,zoom:4)

//////////////// Some hisses ///////////////////////////////////////////////////////////////////////////

(
Ndef(\Hiss).fadeTime = 2.0;
Ndef(\Hiss).quant = 2.0;

Ndef(\Hiss,{Splay.ar(
	RLPF.ar(
		XFade2.ar(
			WhiteNoise.ar(0.05!4),
			BrownNoise.ar(0.05!4),

			SinOsc.kr([0.103,0.101])),
		SinOsc.kr((_*0.0124!4)+0.01).range(220,8000)
	) *

	Decay.ar(Impulse.ar(8/[1,2,3,5,8,13,21,34,55]),[1,2,3,5,8,13,21,34,55]/13)

)}).play;
)


////////////////// And beat /////////////////////////////////////////////////////////////////////////

(
Ndef(\Beat).fadeTime = 2.0;
Ndef(\Beat).quant = 2.0;

Ndef(\Beat,{Splay.ar(
	RLPF.ar(
		XFade2.ar(
			SinOsc.ar([55,56],mul:0.4).distort,
			LFPar.ar([55.5,55.5]*2,mul:0.4),

			SinOsc.kr(1/[8,13])
	) ,SinOsc.kr((_*0.0324!4)).range(52,58))

	*

	Decay.ar(Impulse.ar(8/[1,2,3,5,8]),[1,2,3,5,8]/32)

)}).play;
)


Ndef(\Beat).stop(5);

///////////////////////////////////////////////////////////////////////////////////////////


NdefMixer(s);


///////////////////////////////////////////////////////////////////////////////////////////

(
Ndef(\pulsar).quant = 2.0;
Ndef(\pulsar).fadeTime = 2.0;
Ndef(\pulsar,{
	var z,s1;
	z = SinOsc.ar((1..100)*0.013,LFTri.ar([45,45]),0.75);
	s1 = Select.kr(Stepper.kr(Impulse.kr(1/[4,2])),[1,2,4,2,1.5,2].scramble).lag({ExpRand()/16}!4);

	s = Select.kr(Stepper.kr(Impulse.kr(8/[4,2,1])),[1,2,1,2,1,2,1,1.5]).lag({ExpRand()/4}!4);
	z = z + SinOsc.ar(SinOsc.ar({ExpRand()*100}!12).range(-4,4) + 4320*[1,2,4,8]/(s*[8pi,4pi,1.5pi])/s1*pi,mul:0.1);


	Splay.ar(

		Compander.ar(
		z,z,0.5,1,0.01
		) * LFPulse.ar(1/[1,2,4,8])
	).clip(-1,1)
}).play;

)(
Ndef(\ss).fadeTime = 2.0;
Ndef(\ss).quant = 2.0;

Ndef(\ss,{
	var b,mod;
	b = ([63-12,67-12]+24).midicps / 3pi;
	mod = SinOsc.ar(b/1024.0).range(0.00001,0.015);
	Splay.ar(

		AllpassC.ar(
		RLPF.ar(
				SinOsc.ar([b*pi/2,b*pi/3,b*pi,b*1.5]*LFNoise1.ar(8!8).lag(4).range(0.999-mod,1.01+mod),mul:0.133) * LFSaw.ar(8/[1,2,3,5,8,13]).squared

			,880) +
	Pan2.ar(
		BPF.ar(
				OnePole.ar(WhiteNoise.ar(0.4!8),SinOsc.kr([0.03,0.08]).range(0.1,0.9)) * Decay.ar(Impulse.ar(8/[1,2,3,5,8,13]),{ExpRand()*0.5}!8)
			,2200+LFNoise0.ar(2!4).range(-400,4000).lag(0.001))
		,SinOsc.kr(2.01))
			,0.00133,0.00133,1.133)
)}).play;
)

Ndef(\ss).stop(20);


NdefMixer(s);

(
Ndef(\a).quant = 2.0;
Ndef(\a).fadeTime = 2.0;
t = Tuning.harmonic;
Ndef(\a,{
	var t,p,s;
	t = t.cents.at([1,2,7,11]) / 4pi;
	p = 4/[1,2,3,5];
	s = Select.kr(Stepper.kr(Impulse.kr(1/4)),[1,1,1.5,1.25,1.125,1,2,4]);
	Splay.ar(
		FreeVerb.ar(
			AllpassC.ar(

				CompanderD.ar(
					MoogFF.ar(
						OnePole.ar(
							LFSaw.ar(t*s,OnePole.ar(SinOsc.ar(t*s.lag(1)/8),SinOsc.ar(1/16/[1,2,4,8]).range(0.1,0.9)).range(0,8pi) )
							,0.2) * Decay.ar(Impulse.ar(p),2)
						,t*s,2,0,2)
					,0.5,1,1.2) +

				OnePole.ar((WhiteNoise.ar(0.1!2) * Decay.ar(Impulse.ar(4/[1/2,1,2,4]),0.5)),SinOsc.kr(1/32).range(0.1,0.9) )+
				(SinOsc.ar([66,67.1],LFSaw.kr(4/[1,2,8,16]).exprange(0.001,pi)) * Decay.ar(Impulse.ar(4/[1,2]),0.5) )
				,0.1333,0.0333,0.2)
			,0.1,2)
)}).play;
)


(
Ndef(\a).quant = 2.0;
Ndef(\a).fadeTime = 4.0;
Ndef(\a,{
	var f;
	Splay.ar(
	f = [1,1.25,2,1.125] * 432 * [1.25,1.5,0.25,1.5,0.5] / Select.kr(Stepper.kr(Impulse.kr(1/16/[1,2,3,5,8])),[1,2,4,2,1.5,1.25,1,2,4].scramble*pi);
	LFSaw.ar([f,f+0.1]) * LFSaw.ar(1/16/[1,2,3,5,8],mul:0.5).squared * Decay.ar(Impulse.ar(8/[1,2,3,8,5]),0.75)

)}).play;
Ndef(\a)[1] = \filter -> {|in| AllpassC.ar(Resonz.ar(Vibrato.ar(in,[4,5,6,7],0.15),f,SinOsc.ar(1/16/[1,2,4,8,16]).range(0.02,3)),0.2,0.133,1)};
)

(
Ndef(\b).quant = 2.0;
Ndef(\b).fadeTime = 4.0;
Ndef(\b,{
	var f;
	Splay.ar(
	f = [1,1.25,2,1.125] * 432 * [1.25,1.5,0.25,1.5,0.5] / Select.kr(Stepper.kr(Impulse.kr(1/16/[1,2,3,5,8])),[1,2,4,2,1.5,1.25,1,2,4]*1.5pi);
	LFSaw.ar([f,f+0.1]) * LFSaw.ar(1/16/[1,2,3,5,8],mul:0.5).squared * Decay.ar(Impulse.ar(4/[1,2,3,8,5]),0.75)

)}).play;
Ndef(\b)[1] = \filter -> {|in| AllpassC.ar(Resonz.ar(Vibrato.ar(in,[4,5,6,7],0.15),f,SinOsc.ar(1/8/[1,2,4,8,16]).range(0.02,3)),0.2,0.133,1)};
)

(
Ndef(\c).quant = 2.0;
Ndef(\c).fadeTime = 4.0;
Ndef(\c,{
	var f;
	Splay.ar(
	f = [1,1.25,2,1.125] * 432 * [1.25,1.5,0.25,1.5,0.5] * Select.kr(Stepper.kr(Impulse.kr(1/16/[1,2,3,5,8])),[1,2,4,2,1.5,1.25,1,2,4]*pi);
	SinOsc.ar([f,f+0.1]) * LFSaw.ar(1/16/[1,2,3,5,8],mul:0.25).squared * Decay.ar(Impulse.ar(16/[1,2,3,8,5]),0.15)

)}).play;
Ndef(\c)[1] = \filter -> {|in| AllpassC.ar(Resonz.ar(Vibrato.ar(in,[4,5,6,7],0.15),f,SinOsc.ar(1/32/[1,2,4,8,16]).range(0.02,3)),0.2,0.133,1)};
)s.boot;

(
Ndef(\a).quant = 2.0;
Ndef(\a).fadeTime = 2.0;

Ndef(\a,{Splay.ar(
		VarSaw.ar([44,44.1,88.1,88*2,88*1.5,88.1*8]*1.5*4.0+LFNoise0.ar(8!4).lag(1).range(-8,8),0,SinOsc.ar([0.1,0.201,0.04,0.081]/4).range(0.1,0.9),mul:0.33) * LFSaw.ar(1/8/[1,2,3,5,8,13,21]).squared

)}).play;
)

Ndef(\a).stop;


(
Ndef(\zzz).fadeTime = 0.0;
Ndef(\zzz).quant = 2.0;

Ndef(\zzz,{
	var mod;
	mod = Select.kr(Stepper.kr(Impulse.kr(1/4)),[1,1,2,1.5,1.25,1.5,2,1,1,1]).lag(0.1);

	Splay.ar(
		Ringz.ar(
			Impulse.ar(1/[1,1/4,1/2]),[88,88/1.5,88/2]*mod,[2,0.5,0.14],mul:0.0133
		) +
	Pan2.ar(
		BPF.ar(
				OnePole.ar(WhiteNoise.ar(0.7!8),SinOsc.kr([0.03,0.08]).range(0.1,0.9)) * Decay.ar(Impulse.ar(8/[1,2,3,5,8,13]),{ExpRand()*1}!8)
			,2200+LFNoise0.ar(2!4).range(-400,4000).lag(0.001))
		,SinOsc.kr(2.01))

)}).play;
)

Ndef(\zzz).stop(10);
s.freeAll;
s.scope;

(
Tdef(\worker,{
	loop{


		Ndef(\meta).fadeTime = 1.0;
		Ndef(\meta,{
			var base1,base2,notes1,notes2,f1,f2;
			base1 = [432/2,432.1];
			base2 = [432,432.1/2];

			notes1 = [1,2,4,8].at(0.rrand(3)) * base1 / ([1,2,4,8].at(0.rrand(3)) * pi);
			notes2 = [1.5,1.25,1.125,0.5].at(0.rrand(3)) * base2 / ([1,2,4,8].at(0.rrand(3)) * pi);

			f1 = (notes1);
			f2 = (notes2);


			Splay.ar(
				SinOsc.ar(f1 + SinOsc.ar({ExpRand()/10.0}!12,{ExpRand()}!12).range(-4,4),mul:0.5) *
				SinOsc.ar(f2 + SinOsc.ar({ExpRand()/10.0}!12,{ExpRand()}!12).range(-4,4),mul:0.5)

		)});

		Ndef(\hissa).fadeTime = 0.5;
		Ndef(\hissa,{
			Splay.ar(
				BPF.ar(WhiteNoise.ar(0.1!2),{ExpRand()*22000}!4) * LFSaw.ar([1,2,4,8,16].at(0.rrand(4))/[1,2,3,5]).squared;
			)
		});


		4.wait;
	};
}).play;

// postproduction
Ndef(\cycler,{
	var signal;
	signal = CombN.ar(
		Vibrato.ar(
			Ndef(\meta).ar
			,[4,5,6,7],0.2)
		,8,0.432/2,8) + Ndef(\hissa).ar;


	Splay.ar(
		GVerb.ar(signal,100,mul:0.33,add:signal)
		,0.5,0.45)
}).play;

)

(
Ndef(\pila).fadeTime = 2.0;
Ndef(\pila).quant = 2.0;

Ndef(\pila,{Splay.ar(
	RLPF.ar(
		LFSaw.ar(LFSaw.ar(22.1).exprange(22.0,17777),mul:0.75) * LFSaw.ar(11).squared * LFSaw.ar(8/[8,5,3,1]).lag(0.001+SinOsc.kr(0.01).range(0,0.01))
		,LFNoise0.ar(1/[4,4]).range(22,17777).lag(1))
)}).play;

Ndef(\pila)[1] = \filter -> {|in| GVerb.ar(in,100,mul:0.15,add:in)};
)

(
Ndef(\pila).fadeTime = 2.0;
Ndef(\pila).quant = 2.0;

Ndef(\pila,{Splay.ar(
	RLPF.ar(
		SinOsc.ar(LFSaw.ar(11.33).exprange(22.0,17777),mul:0.75) * SinOsc.ar(11.32).squared * SinOsc.ar(8/[8,5,3,1]).lag(0.001+SinOsc.kr(0.01).range(0,0.01))
		,LFNoise0.ar(1/[4,4]).range(22,17777).lag(1))
)}).play;

Ndef(\pila)[1] = \filter -> {|in| Resonz.ar(in,LFNoise0.ar(1/[4,4]).range(22,17777).lag(1),mul:0.33,add:in)};
Ndef(\pila)[2] = \filter -> {|in| GVerb.ar(in,100,mul:0.33,add:in)};

)(
Ndef(\a).fadeTime = 2.0;
Ndef(\a).quant = 2.0;
Ndef(\a,{
	var mod,s;
	mod = 	CombN.ar( SinOsc.ar( (_*LFDNoise1.ar(1/16!4).range(0.01,32)!8) ,mul:0.5) , 0.2 , LFDNoise1.ar(8!2).range(0.0002,2),2	).range(-2pi,2pi);

	s = SinOsc.ar([110,220,440,880]*2,mod,0.75);

	s = BBandStop.ar(s,LFDNoise1.ar(16!16).range(33,22000),0.15,0.125) * Pulse.ar(8/[1,2,2,4]).squared;

	Splay.ar(

		CompanderD.ar(
			s,0.5,0.25,1) ;
		,1,0.5).clip(-1,1)}).play;
)


s.scope


{LFPulse.ar(1111)}.plot



(
Ndef(\sin,{
	var f1;
	f1 = Decay.ar(Impulse.ar(4/[1,2,4,8]));
	Splay.ar(
	GVerb.ar(
			(LFPulse.ar(2/[1,2,4,8]) + LPF.ar( BrownNoise.ar(0.1!2),120) ) * SinOsc.ar(f1*100,mul:0.2)
	)
)}).play;
)
s.reboot;

(
Ndef(\a).fadeTime = 2.0;
Ndef(\a).quant = 2.0;
Ndef(\a,{
	var h1,h2,l,h,t1,t2,t3,sig,pre1,pre2,tempoh;
	h2 = 432;
	h1 = 4320;

	l = 110;
	h = 33;

	tempo = 4/[1,2,3,5,8];
	tempoh = 8/[1,2,4,1];

	t1 = Decay.ar(Impulse.ar(tempo), 0.0125 + (LFNoise1.ar(2!2).round(0.25).range(0.001,0.03))).squared;
	t2 = Decay.ar(Impulse.ar(tempo), 0.0122 + (LFNoise1.ar(2!2).round(0.25).range(0.001,0.03))).squared;

	t3 = Decay.ar(Impulse.ar(tempo),1.2);

	sig = SinOsc.ar(LFPulse.ar(tempo) * LFPulse.ar(((h1+h2)/2) - ((t1 * h1) + (t2 * h2) / 2.0),LFPulse.ar(tempo/2)*t1 ).squared.range(l,h));


	pre2 = Vibrato.ar(sig * t3,h1/16.1,0.2) * SinOsc.ar(sig) + (HPF.ar(WhiteNoise.ar(1!2)*Decay.ar(Impulse.ar(tempoh),0.1),LFNoise1.kr(2!4).range(10000,22000)));
	pre1 = CombN.ar(pre2,0.15,0.125,0.15,mul:0.33,add:pre2);
	Splay.ar(
		GVerb.ar(pre1,2,mul:0.0125,add:pre1)
)}).play;
)


Ndef(\a).play;

/////////////////////////////////////
// snd generator (not playing alone)
/////////////////////////////////////

(
Ndef(\gen).fadeTime = 4.0;
Ndef(\gen,{|f=#[16]|
	Splay.ar(
	(PinkNoise.ar(0.3!8) * Decay.ar(Impulse.ar(4/[1,2,4,8]),{ExpRand()}!10)) +
		LFPulse.ar(4320/[1,2,4,8,16,64]/ (f * pi)+SinOsc.ar({ExpRand()/100}!10).range(4)).softclip
)});
)

// ctl gen freq

// ramp fading param (seconds)
Ndef(\gen).lag(\f,10);


// goto X
Ndef(\gen).set(\f,16)
Ndef(\gen).set(\f,8)
Ndef(\gen).set(\f,4)

// even arrays ^^ using '#' (literal array) in ndef (?)
Ndef(\gen).set(\f,[8,4,1.5])
Ndef(\gen).set(\f,[16,8,4,1.5,1.25])



////////////////////////////////////////
// equalizer band pass, whole range
// divided by number of pulsing filters
////////////////////////////////////////

(
var num,speed,sharpness;
num = 48;
speed = 4/[12,18,22,99,0.1];
sharpness = 0.2;

Ndef(\filtr).fadeTime = 2.0;
Ndef(\filtr,{
	Splay.ar(
	BPF.ar(
			Ndef(\gen).ar + SinOsc.ar((1..10)/100.1,mul:0.01)
			,(1..num)*(16000/num)+SinOsc.ar({ExpRand()}!48).range(-40,40),sharpness,SinOsc.ar({ExpRand()*speed}!48).exprange(0.001,8)
		)
,0.17,1)}).play;
)
// hlasi mi to tunu chybovych hlasek, napr:
// exception in GrafDef_Load: exceeded number of interconnect buffers.
// FAILURE IN SERVER /s_new SynthDef not found
// FAILURE IN SERVER /n_set Node 1064 not found
// Nerozumim?

(


Tdef(\master,{
	loop{
		(
			(
				Ndef(\enveloper).quant = 1.0;
				Ndef(\enveloper).fadeTime = 4.0;

				Ndef(\enveloper,{
					Splay.ar(
						// GVerb.ar(
							Ndef(\filtr).ar  //* //Decay.ar(Impulse.ar(8/[1,2,4,8]),{ExpRand()}!10)
						// ,20,5,add:Ndef(\gen).ar/32).softclip
						,0.5,0.5)
				}).play;
			);

			2.wait;


			//////////////////////////////// VV

			(
				Ndef(\gen).quant = 1.0;

				Ndef(\gen).fadeTime = 4.0;
				Ndef(\gen,{|f=48|
					f = rrand(1,8).round(2).squared;
					Splay.ar(
						(PinkNoise.ar(0.4!8) * Decay.ar(Impulse.ar(4/[1,2,4,8]),{ExpRand()}!10)) +
						SinOsc.ar(4320/[0.5,0.25,1,2,4,8,16,64] / (f * pi)+SinOsc.ar({ExpRand()/100}!10).range(4)).softclip
				)});
			);


			2.wait;

			Ndef(\gen).lag(\f,1);
			Ndef(\gen).set(\f,rrand(1,8).round(2).squared);

			// Ndef(\gen).set(\f,48)
			// Ndef(\gen).set(\f,8)
			// Ndef(\gen).set(\f,4)



			//////////////////////////////// VV

			(
				var num,speed,sharpness;
				num = 3.rrand(48);
				speed = 1.rrand(44)/[1,2,8,120,12,18,22,99,0.1];
				sharpness = 0.015.rrand(1);



				Ndef(\filtr).quant = 1.0;
				Ndef(\filtr).fadeTime = 4.0;
				Ndef(\filtr,{
					Splay.ar(
						BPF.ar(
							Ndef(\gen).ar + LFSaw.ar((1..10)/100.1,mul:0.133)
							,(1..num)*(22000/num)+SinOsc.ar({ExpRand()}!48).range(-40,40),sharpness,SinOsc.ar({ExpRand()*speed}!48).exprange(0.001,8.1)
						).softclip
						,0.17,1)});
			);
		);
		2.wait;
	}

}).play;

)
(
Ndef(\inp).quant = 2.0;
Ndef(\inp).fadeTime = 2.0;

Ndef(\inp,{
	var f1,f2;
	f1 = [44,44.1*2,45*3,45*1.25]*1pi+LFNoise0.kr(8!4).lag(1).range(-4,4);
	f2 = [44,44.1*1.5,45*2,45*1.5]*0.5pi+LFNoise0.kr(8!4).lag(1).range(-4,4)+LFSaw.ar(11/[1,2,3,5]).range(-5,10000).lag(0.0001);
	Splay.ar(
		Pan2.ar(
			AllpassC.ar(

				SinOsc.ar(f1.scramble.lag(1),(f2/102.40).range(-pi,pi),mul:0.233) + LFSaw.ar(f2,mul:0.233).lag(0.00001+SinOsc.ar([0.01,0.03,0.02,0.041]*1/4/[1,2,3,5,8]).range(0.00001,0.02)) * LFSaw.ar(1/4/[1,2,3,5,8]).squared
				,3,0.033,4)
			,SinOsc.ar(1.1))
)}).play;
)
(
Ndef(\zzz,{
	var t,s,env;
	t = LFSaw.ar(2/[1,2,4,8]).linlin(-1,1,0.02,SinOsc.ar(1/[1,2,4,8]).range(0.01,0.002));
	s = LFPulse.ar(2/[1,2,4,8]).linlin(-1,SinOsc.ar(2/[1,2,4,8]).abs+0.0001,1,-1);
	env =  Decay.ar(Impulse.ar(4/[1,2,4,8]),0.5);
	Splay.ar(
		AllpassN.ar(
			Resonz.ar(
				CombN.ar(s,t.linexp(0,1,1,0),t,2,1,s) * s * env;
				,[77,77.1,35,777.1]+SinOsc.kr([0.1,0.11]).range(0,33))
			,0.33,0.033,1)
)}).play;
)
(
Ndef(\waveShaper,{

	Splay.ar(
		CombC.ar(
			SinOsc.ar(432/8pi,mul:0.25)
			,0.41,TExpRand.ar(0.008,0.01,Impulse.ar(4444)).lag(SinOsc.ar((1..32)/320).range(0,0.5)),8).softclip * LFSaw.ar(1/4/[1,2,4,8])
		,1,0.7).softclip
}).play;
)
NdefMixer(s);

(
Ndef(\ss,{
	var t;
	t = 4/[1,1,2,4,8];

	Splay.ar(
	SinOsc.ar(
		(
			CombN.ar(
				LPF.ar(
					GVerb.ar(
						Impulse.ar([1,1.1]) + WhiteNoise.ar(0.01!2)
					)
					,LFNoise0.ar(1!3).range(44,99)) * 200.0
				,0.05,SinOsc.ar(t).range(0.01,0.04),8) * Decay.ar(Impulse.ar(t))
	).softclip.range(54,77)) * Decay.ar(Impulse.ar(t),1/t)
)}).play;
)
// weird melodies

(

Tdef(\tt,
	{
		Ndef(\a).quant = 2.0;
		Ndef(\a).fadeTime = 2.0;

		loop{
			Ndef(\a,{
				var p,mod;
				p = [4,8]/[1,2,3,5,8,13,21];

				mod = Select.kr(Stepper.kr(Impulse.kr(p/4)),[1,1.5,1.25,2,1.5,4,1,8]);

				Splay.ar(
					CompanderD.ar(
						CombN.ar(
							BBandPass.ar(

								8 * SinOsc.ar({ExpRand()/2}!8 + [440,880,880,880*2,880*4,880*8,880*16] / (mod*pi),{ExpRand()*3pi}!8) *
								Decay.ar(Impulse.ar(p),{ExpRand()*2}!8)

								,LFDNoise1.ar(p/2).range(35,1600.rrand(3200)),0.3.rrand(0.7))
							,1,1,10)
						,0.75,1,0.25)
					,1,0.75).clip(-1,1)}).play;

			32.wait;
		}
}).play;

)
(
Ndef(\inp).quant = 2.0;
Ndef(\inp).fadeTime = 8.0;


Ndef(\inp,{
	var s,s2,s3,f1,f2,sig,sigh,sigm,sigl;
	s3 = Select.kr(Stepper.kr(Impulse.kr(1/4/8/8/[1,2,4,8]),max:3),[1,1.5,4,1]);
	s2 = Select.kr(Stepper.kr(Impulse.kr(1/4/8/[1,2,4,8]),max:3),[1,1.5,2,1]);
	s = Select.kr(Stepper.kr(Impulse.kr(1/8/8/[1,2,4,8]),max:3),[1.5,1.25,1.5,1]);


	f1 = [44,44.1*2,45*3,45*1.25]*(s2*s3*s*pi.sqrt)+LFNoise0.kr(8!4).lag(0.5).range(-2,2);
	f2 = [44,44.1*1.5,45*2,45*1.5]*(s*16/s2*pi.sqrt)+LFNoise0.kr(8!4).lag(0.5).range(-2,2)+LFSaw.ar(11/[1,2,3,5]).range(-5,10000).lag(0.0001);

	f2 = CombN.ar(f2,0.5,0.5,8);
	sig = Pan2.ar(
		AllpassC.ar(
			SinOsc.ar(f1.scramble.lag(16),(f2/102.40).range(-pi,pi),mul:0.233) + LFSaw.ar(f2,mul:0.233).lag(0.00001+SinOsc.ar([0.01,0.03,0.02,0.041]*1/4/[1,2,3,5,8]).range(0.00001,0.02)) * LFSaw.ar(1/4/[1,2,3,5,8]).squared
			,3,0.033,20)
		,SinOsc.ar(1.1));

	sigh = HPF.ar(sig,4000+SinOsc.ar((1..10)/100.13).range(-1000,10000),0.33) ;
	sigm = BPF.ar(sig,2000+SinOsc.ar((1..10)/101.217).range(-1000,3000),0.33) ;
	sigl =	LPF.ar(sig,500+SinOsc.ar((1..10)/102.331).range(-480,1500),0.33) ;

	//////////////////////////////////
	Splay.ar(
		BBandPass.ar(
			(CompanderD.ar(sigl,0.75,1,0.25,0.06,0.06) + CompanderD.ar(sigm,0.75,1,0.25,0.022,0.022) + CompanderD.ar(sigh,0.015,1,0.015)) * 48.0
			,SinOsc.ar((1..20)/2000.0).range(5,16000),{ExpRand()*2}!20)
)}).play;

)

Ndef(\inp).stop(10)

(
~a.play;
~a.quant=2;
~a = {
	var env,fenv,sig,t,sel,tone;
	sel = Duty.kr(4,0,Dseq([1,1.25,1.125,1.5,2,4],inf));

	t = Impulse.ar(1/2,1/16*[0,2,3,4,6,8,10,12,14,16,17]);
	env = Decay.ar(t,TExpRand.ar(0.1,0.75,t));
	fenv = Decay.ar(t,TExpRand.ar(0.02,0.15,t)).exprange(0.0001,10.01+(sel*1000.0));

	sig = SinOsc.ar(50+fenv,mul:0.85) * env;
	sig = CompanderD.ar(sig,0.85,1,1/10);

	Splay.ar(sig,0.1);
};
)



(

~a={
	var sig;
	sig = Klank.ar({`[Array.fill(20,{ExpRand(44,14480)}),nil,Array.fill(20,{ExpRand(0.01,1)})]}!16,Impulse.ar(1/4,(0..15)/16),1,40,4.15/(1..32).scramble+0.2);
	sig = Mix.ar(sig);
	sig = BBandPass.ar(sig,18800/32*(1..16)+80,0.15,SinOsc.ar(4/(1..32).scramble,{ExpRand(0,2pi)}!16).exprange(0.00001,1));
	sig = CompanderD.ar(sig,1/1.2,1/2);
	sig = FreeVerb.ar(sig,0.153,1.5);
	Splay.ar(sig,0.1);

};
~a.play.quant_(4);
)


StageLimiter.activate;

(
Ndef(\a).quant = 2.0;
Ndef(\a).fadeTime = 8.0;
Ndef(\a,{
	var f;
	f = ((fib(14)).normalize*(48+[0,12,24,36,48]).midicps / 1.5pi) + SinOsc.ar(1/4/fib(5)).squared.range(-4,4);

	Splay.ar(
		AllpassN.ar(
			Vibrato.ar(
				SinOsc.ar(f,SinOsc.ar(f/8pi).range(0,2pi),mul:0.7) * LFSaw.ar(8/fib(14)).squared;
				,[4,5,6,7],0.16)
			,0.133,{ExpRand(0.01,0.13)}!32,4)
		,0.2,1)});
)


(
Ndef(\b).fadeTime = 8.0;
Ndef(\b).quant = 2.0;

Ndef(\b,{
	var step,step2,src,l,m,h;
	step2 = Select.kr(Stepper.kr(Impulse.kr(1/8/fib(12))),[0,0,12,24,36,12,24,36].scramble);

	step = Select.kr(Stepper.kr(Impulse.kr(1/4/fib(12))),[1,2,1.25,1.5,1,2,4,1,2]);
	src = Ndef(\a).ar + SinOsc.ar((48+step2).midicps*step/fib(24),mul:1);

	l = CompanderD.ar(RLPF.ar(src,432/fib(4)),0.5,1,0.5,0.2,0.2) * LFSaw.ar(1/fib(12)).squared;
	m = CompanderD.ar(BPF.ar(src,432/fib(3)),0.5,1,0.5,0.02,0.02) * LFSaw.ar(1/2/fib(12)).squared;
	h = CompanderD.ar(HPF.ar(src,432/fib(6)),0.5,1,0.5,0.01,0.01) * LFSaw.ar(1/4/fib(12)).squared;

	Splay.ar(
		CompanderD.ar(
			FreeVerb.ar(
				l + m
				,0.17,10) + h
			,0.75,1,0.5,0.01,0.01)
		,0.2,1)
}).play;
)

s.scope
s.boot;

(
t = Tuning.harmonic;
Ndef(\a).quant = 2.0;
Ndef(\a).fadeTime = 2.0;
Ndef(\a,{
	var slong,s,v,l,p,t,slong;
		slong = Select.kr(Stepper.kr(Impulse.kr(1/2/[1,2,3,5,8,13,21])),[1,1/2,1/4,2,4,1/2,1,2,1/4,1]);
		s = Select.kr(Stepper.kr(Impulse.kr(1/4/[1,2,3,5,8,13,21])),[1pi,2pi,4pi,8pi,1.5pi,1pi,2pi,1.5pi]);
		v = Select.kr(Stepper.kr(Impulse.kr(1/8/[1,2,3,5,8,13,21])),1/(1..11).scramble);
		l = Select.kr(Stepper.kr(Impulse.kr(1/[1,2,3,5,8,13,21])),1.5/(1..11).scramble);
		p = [1,2,4,8,16];

		t = t.cents.at([1,2,7,11]) / s * slong;

	Splay.ar(
		FreeVerb.ar(
			SinOsc.ar(t,l.range(-8pi,8pi).lag(8/p),mul:v.lag(0.1))
			,0.133,2).softclip
)}).play;
)//////////////////////////////////////////////////////

s.boot;

//////////////////////////////////////////////////////

(

Ndef(\a).quant = 2.0;
Ndef(\a).fadeTime = 2.0;
Ndef(\a,{Splay.ar(
	var amp,f;
	amp = SinOsc.kr((_*0.01!8)+0.01).range(0,1);

	f = [99,100,55,66,88,77];
	RLPF.ar(
		LFPulse.ar(f),
		LFSaw.ar(f/4.01).range(f/2,f*2)
	) * Decay.ar(Impulse.ar(8/[1,2,3,5,8,13]),1) * amp;
)}).play;

)


//////////////////////////////////////////////////////

(

Ndef(\b).quant = 2.0;
Ndef(\b).fadeTime = 5.0;
Ndef(\b,{Splay.ar(
	var amp,f;
	amp = SinOsc.kr((_*0.01!8)+0.01).range(0,1);

	f = [999,1000,2000,4000,8000]/4;
	MoogFF.ar(
		LFCub.ar(f,mul:0.75),
		LFSaw.ar(f/4.01).range(f/2,f*2)
	) * Decay.ar(Impulse.ar(4/[1,2,3,5,8,13]),2) * (1-amp);
)}).play;

)

//////////////////////////////////////////////////////

(

Ndef(\c).quant = 2.0;
Ndef(\c).fadeTime = 2.0;
Ndef(\c,{Splay.ar(
	var amp,f;
	amp = SinOsc.kr((_*0.01!8)+0.01).range(0,1);

	f = [999,1000,2000,4000,8000];
	RHPF.ar(
		PinkNoise.ar(2!8),
		LFSaw.ar(f/4.13).range(f/2,f*2)
	) * Decay.ar(Impulse.ar(16/[1,1,2,3,5,8,13]),0.1) * (1-amp);
)}).play;

)


//////////////////////////////////////////////////////

(

Ndef(\d).quant = 2.0;
Ndef(\d).fadeTime = 2.0;
Ndef(\d,{Splay.ar(
	var amp,f;
	amp = SinOsc.kr((_*0.01!8)+0.01).range(0,1);

	f = [200,400,800,1600,110]/2;
	MoogFF.ar(
		LFPar.ar(f,mul:0.3),
		SinOsc.ar(f/1.01).range(f/2,f*2)
	) * amp;
)}).play;


)

//////////////////////////////////////////////////////

NdefMixer(s)
s.boot;
(
Ndef(\a).fadeTime = 2.0;
Ndef(\a).quant = 2.0;
Ndef(\a,{

	var base,saws;


	base = [60,60.13];
	saws = LFSaw.ar(1/8/[1,2,3,5,8,13,21,34,55,89]).squared;
	Splay.ar(

		FreeVerb.ar(
			FreeVerb.ar(
				SinOsc.ar(SinOsc.kr([1,1/2,1/4,1/8]*pi).range(base,base+2),mul:2)
				,0.1375,1).softclip * Decay.ar(Impulse.ar(8/[1,2,3,5,8])).squared + (VarSaw.ar(SinOsc.kr([1,1/2,1/4,1/8],(8pi*saws)).range(base*2,base*2+2)) * saws) +
			(HPF.ar(WhiteNoise.ar(0.75!4),10080) * Decay.ar(Impulse.ar(8/[1,2,3,5,8,13]),0.6).squared)

			,0.1,2).softclip
)}).play;
)
s.boot;

(
t = Tuning.harmonic;

Ndef(\a).quant = 2.0;
Ndef(\a).fadeTime = 0.2;

Ndef(\a,{
	var pattern,o1,o2,o3,o4,s,f;
	Splay.ar(
	pattern = [1,2,4,8,1,1,2,4];
	o1 = Select.kr(Stepper.kr(Impulse.kr(4/[1,2,4,8])),pattern.scramble);
	o2 = Select.kr(Stepper.kr(Impulse.kr(4/[2,4,8,16])),pattern.scramble);
	o3 = Select.kr(Stepper.kr(Impulse.kr(4/[4,8,16,32])),pattern.scramble);
	o4 = Select.kr(Stepper.kr(Impulse.kr(4/[8,16,32,64])),pattern.scramble);

	s = ([]++o1++o2++o3++o4);
	f = t.cents.at([1,2,7,15]) / (o4*2) * s / o2;

	FreeVerb.ar(
		MoogFF.ar(
			XFade2.ar(
				LFSaw.ar(f,mul:2),
				SinOsc.ar(f,mul:2),
				LFNoise0.ar((1..32)/4).range(-1,1).lag(0.01)
			) * Decay.ar(Impulse.ar(8/(1..32)),(1..32)/24)
			,SinOsc.ar(f/o1).range(f/2,f*2).lag(0.02))
		,0.23,2).softclip.distort + SinOsc.ar(f/4, mul:SinOsc.kr((_*0.1!4)+0.01).exprange(0.01,0.1))
)}).play;
)



(
Ndef(\a).quant = 2.0;
Ndef(\a,{
	Splay.ar(
		CombC.ar(
			LPF.ar(
				CombL.ar(
					CombN.ar(
						SinOsc.ar(43.2*(2.0001**(1..8))) * Pulse.ar(2**TRand.ar(1,8,Impulse.ar(1/4!8)).round(1).lag(0.1/(1..8)) )
						,1/50,1/49,32)
					,1/50,1/48,4)
				,22+SinOsc.ar(2**TRand.ar(1,8,Impulse.ar(1/4!8)).round(1).lag(4/(1..8)) ).range(0,4000)) * Pulse.ar(1/(2**(1..8)))
			,1/50,1/49.9999+(WhiteNoise.kr(0.00001)),8) * LFPulse.ar(8/(2**(1..8)))
		,0.15+SinOsc.ar(1/(1..4)).range(0,0.5),0.75,0.5)}).play;
)
p=ProxySpace.push(s);
(
~kick.quant=4;
~kick={

	var env,t,sig;

	t = Impulse.ar(1/2,[0,2,4,6]++[0.5]/8);

	// basic layer, deep tone
	env = Decay2.ar(t,0.002,0.5+TExpRand.ar(0.05,0.5,Impulse.ar(4)));
	sig = SinOsc.ar(44+(env**5*100),0.5)*env;

	// little noise hit in the beginning
	env = Decay2.ar(t,0.0002,0.19,0.9,0.000001);
	sig =LPF.ar(WhiteNoise.ar(0.6!2),800+(env**2*2000))*env + sig;

	// tail, deep tone
	env = Decay2.ar(t,0.005,1.0,0.9,0.000001);
	sig = SinOsc.ar(44.1!2+(env**4.8))*env+sig;

	// makeup
	sig = CompanderD.ar(sig,0.9,1/1.45,1/2);

	Splay.ar(sig,0.1);
};
~kick.play;
);

s.scope;


(
~hat.quant=4;
~hat={

	var env,t,sig;

	t = Impulse.ar(1/4,(0..7)+0.5++[0.25,0.5,0.75]/8);


	//his in the beginning
	env = Decay2.ar(t,0.0002,0.149,0.9,0.000001);
	sig = HPF.ar(WhiteNoise.ar(0.8!2),400-(env**2*200))*env;


	//his in the beginning
	env = Decay2.ar(t,0.02,0.59,0.9,0.0001);
	sig = RHPF.ar(WhiteNoise.ar(0.1!2),12000+(env**1.51*8000))*env+sig;



	sig = CompanderD.ar(sig,0.9,1/1.25,1/2);

	Splay.ar(sig,0.1);
};
~hat.play;
)


//very cool. I've been doing this with Synths and delay because it's easier to control time-wises.reboot;
(
Ndef(\abc,{
	var oct,m,lfo,lfo2,sig;
	oct = Duty.kr([4,8,16]*4,0,Dseq(([0,-12,0,-24,12,-36]),inf));
	m = Duty.kr(4,0,Dseq(([60,65,67,64]+oct).midicps,inf));
	lfo = LFSaw.ar(2/[1,2,3,4]);
	lfo2 = lfo.exprange(0.0001,1.0001);
	lfo = lfo.exprange(250,44.01);

	sig = CompanderD.ar(
		RLPF.ar(
			SinOsc.ar(lfo!4,mul:0.9) * LFSaw.ar(2/[1,2,3,4]).range(0,1) * Decay.ar(Impulse.ar(4/[1,2,3,4],0.6))
			,1200*(SinOsc.ar(1/4/(1..32)).range(1.01,10))/(lfo2*10000.0+1)+44,SinOsc.ar(1.00001**(1..8)).range(0.01,1)) +
		(LFPulse.ar(m*(1.00001**(1..32)),mul:0.02) * (Decay.ar(Impulse.ar(8/[1,2,3,4]),1/8*[1,2,3,4])))
		,0.15,1,1/10,0.02,0.05);

	sig = Vibrato.ar(sig,[2,3,4,5,6,7],0.2);

	Splay.ar(
		CombN.ar(
			FreeVerb.ar(sig.distort,0.12,100)
			,1,(1..16),32).softclip
		,0.12,1,0.5)

}).play;
)

s.freeAll

(
~poi={
	var h,l,saw;
	var a = VarSaw.ar(55+(0.55*(32/(1..16))),mul:SinOsc.ar(4/(1..16)).exprange(0.001,0.1) ).distort;
	a = CombN.ar(CompanderD.ar(a,0.75,1/4,1/4),0.133,4,8).softclip;
	a = Mix(a).softclip * (Decay.ar(Impulse.ar(4/[2,4,8],(0..3)/4),0.24)**2);


	saw = LFSaw.ar(43.2*[1,2,4,8]*(1.00001**(1..8)),mul:0.2);
	saw = BPF.ar(saw,SinOsc.kr(8/(1..4)).range(50,12000));


	l = LPF.ar(a,250);
	h = HPF.ar(a+saw,1250);

	a = h/16+l;
	a = HPF.ar(a,15)/2;
	a = GVerb.ar(a,20);

	Splay.ar(a.flat,0.1);
};
~poi.fadeTime=5;
~poi.quant=2;
~poi.play;
)

s.scopes.reboot;
(
Ndef(\a).quant = 2.0;
Ndef(\a).fadeTime = 4.0;
Ndef(\a,{
	var oct,f,sig,oct2,mod2,f2,sig2,sig3,sig4,f3,f4,beat;

	// bass
	oct = Duty.kr(16,0,Dseq([0,1,2]*7,inf));
	f = Duty.kr(4,0,Dseq(([60,64,67,63]-24+oct).midicps,inf)).lag(1/4);

	sig = Blip.ar(f,40*LFSaw.ar(1/4/[1,2,4,8]).exprange(0.0001,1)+1,mul:0.2);
	sig = Resonz.ar(sig,SinOsc.ar(1/4/[1,2,3,5]).exprange(f*8,f));
	sig = Vibrato.ar(Mix.ar(sig).softclip!2,[4,5],0.2);
	sig = Pan2.ar(sig,SinOsc.ar(3).range(-0.3,0.3));
	sig = FreeVerb2.ar(sig[0],sig[1],0.23,4) * 1.5;
	sig = Compander.ar(sig,0.75,1,1/10);

	// melodies
	oct2 = Duty.kr(16,0,Dseq([1,0,2,-2,-1,-3]*12,inf));
	mod2 = Duty.kr(8,0,Dseq([64,67,65],inf));
	f2 = Duty.kr([1/4,1,1/2],0,Dseq(([60,mod2,67]+oct).midicps,inf));

	sig2 = SinOsc.ar(f2*(1..8),mul:0.2/(1..8)) * Decay.ar(Impulse.ar(4/[1,2,4,8]),4/(1..4));
	sig2 = Resonz.ar(sig2,SinOsc.ar(1/16/(1..8)).exprange(f2*8,f2/2));
	sig2 = LPF.ar(sig2,220+SinOsc.ar(1/12/(1..8)).range(0,4400)) * 1.5;
	sig2 = HPF.ar(sig2,22+SinOsc.ar(1/32/(1..8)).range(0,4400));
	sig2 = Vibrato.ar(Mix.ar(sig2).softclip!2,[5,6],0.2);
	sig2 = Pan2.ar(sig2,SinOsc.ar(2).range(-0.3,0.3));
	sig2 = CombN.ar(sig2,4,[4.02,4.03],32);
	sig2 = FreeVerb2.ar(sig2[0],sig2[1],0.43,4);

	// hats
	sig3 = PinkNoise.ar(4!8);
	sig3 = BPF.ar(sig3,TExpRand.ar(8000,20000,Impulse.ar(8/fib(8))),SinOsc.ar(1/4/(1..8)).range(0.004,0.1));
	sig3 = sig3 * Decay.ar(Impulse.ar(8/fib(8)),[0.1,0.5,0.4,1]);
	sig3 = Pan2.ar(sig3,SinOsc.ar([8,7]).range(-0.6,0.6));
	sig3 = Compander.ar(sig3,0.5,1,1/10);
	sig3 = FreeVerb2.ar(sig3[0],sig3[1],0.13,4);

	// kicks
	beat = 4/[1,1.5,8];
	f4 = [51,61,40]+LFSaw.ar(beat).exprange(1800.1,1);
	sig4 = SinOsc.ar(f4,LFSaw.ar(beat).exprange(-8pi,0),mul:0.5);
	sig4 = RLPF.ar(sig4,[50,60,40],0.5);
	sig4 = sig4 * Decay.ar(Impulse.ar(beat),[0.1,0.5,2]);
	sig4 = Pan2.ar(sig4,SinOsc.ar([1,1.1]).range(-0.2,0.2));
	sig4 = Vibrato.ar(Mix.ar(sig4).softclip,[2,4],0.4);
	sig4 = Compander.ar(sig4,0.9,1,1/10);
	sig4 = FreeVerb2.ar(sig4[0],sig4[1],0.23,4);


	// play all, pulse as gates
	Splay.ar(
		Limiter.ar((
			sig +
			sig2 +
			(sig3 * LFPulse.ar(1/32)) +
			(sig4 * LFPulse.ar(1/16)) +
			0
		) / 2,0.4,0.01).softclip
	)
}).play;
)

Ndef(\a).clear;


s.reboot;
(
Ndef(\a,{
	var oct,f,sig;
	oct = Duty.kr(16,0,Dseq([0,1,2]*7,inf));
	f = Duty.kr(4,0,Dseq(([60,64,67,63]-36+oct).midicps,inf)).lag(1/4);
	sig = Blip.ar(f,40*LFSaw.ar(1/4/[1,2,4,8]).exprange(0.0001,1)+1,mul:0.2);

	sig = Resonz.ar(sig,SinOsc.ar(1/4/[1,2]).exprange(f*8,f));
	sig = Vibrato.ar(Mix.ar(sig).softclip!2,[4,5],0.2);


	Splay.ar(
		Compander.ar(
			FreeVerb2.ar(
				sig[0],sig[1]
				,0.23,40) * 2.0
			,0.5,1,1/10)
	)
}).play;
)

Ndef(\a).clear;



(

~a.play;
~a={
	var sigs,mod,mod2;

	mod=m.kr(0,2)*10;
	mod2=m.kr(0,3).range(1.0000001,1.05);

	sigs=[
		LFSaw.ar(43.2*mod*(mod2**(1..8)) ),
		LFPulse.ar(43.2*2*mod*(mod2**(1..8))),
		LFCub.ar(43.2*4*mod*(mod2**(1..8))),
		SinOsc.ar(43.2*8*mod*(mod2**(1..8))),
		VarSaw.ar(43.2*1.5*mod*(mod2**(1..8))),
		LFSaw.ar(43.2*3*mod*(mod2**(1..8))),
		LFSaw.ar(43.2*6*mod*(mod2**(1..8))),
		LFSaw.ar(43.2*9*mod*(mod2**(1..8)))
	];


	sigs=Select.ar(~n,sigs);
	sigs=BBandPass.ar(sigs,LFSaw.ar(m.kr(0,4)*16+1/4).range(22000*m.kr(0,5),22));
	sigs=FreeVerb.ar(sigs,m.kr(0,3),100);


	Splay.ar(sigs,0.1,m.kr(0,1));

}
)
(
~a={

	var noty,sig;

	noty=[60-24,60-12,60,65,67,72,64,72+12].midicps;

	sig=SinOsc.ar(Select.kr(~n,noty));
	Splay.ar(sig);

}
)

~a.play;
// variations by kof 2014

s.boot;

(
Tdef(\seed,{
	loop{

		Ndef(\hard1).fadeTime = 1.1;

		Ndef(\hard2).fadeTime = 1.0;

		Ndef(\hard1,{
			var times,inp,lfos,freq,mod,line;
			times = [1,4,4,8].scramble;
			imp = Impulse.kr(times);
			lfos = SinOsc.kr({ExpRand()}!times.size).range(0,1);
			freq = Select.kr(Stepper.kr(Impulse.kr(times)),{[60,60,62,63,65,65,67,69].scramble}!4).lag(0.004).midicps;
			mod = Select.kr(Stepper.kr(Impulse.kr(times)),{[1,8,2,1/4,32,1/4,4,1/2].scramble}!4).lag(0.008);
			line = Pluck.ar(LFCub.ar(freq * mod,{ExpRand()}!times.size,lfos),imp);

			Splay.ar(line,1,0.5);
		}).play;


		Ndef(\hard2,{
			var times,inp,lfos,freq,mod,line;
			times = [8,4,4,1].scramble;
			imp = Impulse.kr(times);
			lfos = SinOsc.kr({ExpRand()}!times.size).range(0,1);
			freq = Select.kr(Stepper.kr(Impulse.kr(times)),{[60,60,62,63,65,65,67,69].scramble}!4).lag(0.002).midicps;
			mod = Select.kr(Stepper.kr(Impulse.kr(times)),{(2*[1,1/8,1/2,2,1/16,4,1/4,2]).scramble}!4).lag(0.004);
			line = Pluck.ar(LFCub.ar(freq * mod,{ExpRand()}!times.size,mul:lfos),imp,decaytime: 3.0);

			Splay.ar(line,1,0.5);
		}).play;
		8.0.wait;
		"Generating new melody".postln;
	}
}).play;
)

p = ProxySpace.push(s);

(
~s = {Duty.kr(1/8,0,Dseq((0..3),inf))};
~mod = {Duty.kr(Dseq([2,1,1/2,2,1/4,1,1]*4,inf),0,Dseq([1,1.5,2,1.25,4,0.75,1.5],inf))};


~s.quant = 2;
~mod.quant = 2;

~a.quant = 2;

~a={

	var sigs,sel,fad;


	sigs=[
		LFPulse.ar(432/1.5*~mod*(1.0002**(1..8))/4),
		LFSaw.ar(432/2*~mod*(1.0003**(1..8))/5),
		Blip.ar(432/5*~mod*(1.00023**(1..8)),2,2),
		LFSaw.ar(432/3*~mod*(1.0001**(1..8))),
	];


	fad = LFSaw.ar(1/fib(12)).range(0,3);
	sel = Select.ar(~s,sigs);
	sel = sel + (SinOsc.ar(44+Pulse.ar(4).exprange(250.01,0.01)) * Pulse.ar(4));
	sel = Vibrato.ar(sel,[4,5,6,7],0.3);
	sel = Resonz.ar(sel,LFSaw.ar(4/[1,2,4]++(1/4/[1,8])).exprange(14000.01,22));
	sel = CompanderD.ar(sel,0.5,1,1/10);
	sel = FreeVerb.ar(sel,0.1,0.5);

	Splay.ar(sel,0.1);

};

~a.play;
)

s.boot;

(

    (
        Ndef(\mod).quant = 2.0;
        Ndef(\mod,{Splay.kr(Select.kr(Stepper.kr(Impulse.kr(1/4)),[1,0.5,2,1,1,1.5,1.25,2,4,1,1]) )});
    );

    SynthDef(\base2,{|freq = 0, amp = 0.5,dur = 1|
                     var sig,env,fenv;
                     env = EnvGen.ar(Env([0,1,0],[0.02,dur],[-3,3]),doneAction:2);
                     fenv = EnvGen.ar(Env([freq,freq*Ndef(\mod).kr,99*Ndef(\mod).kr],[0.02,dur/8],[3,-3]));

                     sig = LFSaw.ar(fenv+(1.001**(1..8))) * env;
                     sig =
                     AllpassC.ar(
                         BBandPass.ar(
                             Vibrato.ar(
                                 sig
                                 ,[4,5,6,7].scramble,0.02)
                             ,SinOsc.ar(fenv/fib(12),{ExpRand(0,2pi)}!8).range(fenv*Ndef(\mod).kr,freq)
                         )
                         ,0.012,1,2);

                     Out.ar(0,Splay.ar(sig,0.5,amp));
                    }).add;
)

(
    Pdef(\two,{
        Ppar([
            Pbind(
                \instrument, \base2,
                \dur, Pseq([1/2,1,1,1]/4, inf),
                \freq, Pxrand([72,60+[12,-24].choose,65,61+[24,-24].choose].midicps, inf),
                \amp, Pwhite(0.4,0.8),
            ),
            Pbind(
                \instrument, \base2,
                \dur, Prand([1/2,1]*8, inf),
                \freq, Pxrand(([61,60,72,63]-24).midicps, inf),
                \amp, Pwhite(0.1,0.4)
            ),
            Pbind(
                \instrument, \base2,
                \dur, Prand([1/2,1]*8, inf),
                \freq, Pxrand(([61,60,72,69]-24).midicps, inf),
                \amp, Pwhite(0.1,0.4)
            )
        ])
    }).play(quant:2);
)

s.boot;

(
Ndef(\a).fadeTime = 4;
Ndef(\a).quant = 2;

Ndef(\a,{
	var octave,tune,base,d1,d2,f,detune,sig;
	octave = Duty.kr(32,0,Dseq([1.5,2,1,1.25]*12,inf));
	tune = Duty.kr(16,0,Dseq([1,2,1.5,1.25,0.75],inf));
	base = Duty.kr(4,0,Dseq(([39,34,42,35]+octave).midicps/(tune*pi),inf));
	d1 = Duty.kr(1/4,0,Dseq([1,2,1,4,1,2,1,1.5],inf));
	d2 = Duty.kr(4,0,Dseq([1,2,1,4,1,2,1,1.5],inf));
	f = base * (d1*2) * d2;

	detune = SinOsc.ar(1/[4,5,6,7]).range(-2,2);


	sig = LFSaw.ar(f+detune,mul:0.15) * Decay.ar(Impulse.ar(8/fib(8)),(1..8)/7);
	sig = Resonz.ar(sig,LFTri.ar(1/44/fib(8)).range(f*4,f/4));
	sig = sig + (HPF.ar(PinkNoise.ar(0.005!4),(1..12)*220)) * LFSaw.ar(1/4/fib(12)).range(0,1);
	sig = sig + (SinOsc.ar(f*(1..8)*d2-detune,mul:0.005/(1..8)));
	sig = CompanderD.ar(sig,SinOsc.ar(1/4/(1..8)).range(0.25,0.75),1,1/6,0.002,0.02);


	sig = AllpassN.ar(sig.distort!4,0.25*d1.lag(1),0.25,4);

	sig = Vibrato.ar(sig,[4,5,6,7],0.2);
	sig = FreeVerb.ar(sig,0.133,2);



	Splay.ar(
		sig.distort.softclip
)}).play;
)




s.boot;

(
Ndef(\a).fadeTime = 4;
Ndef(\a).quant = 2;

Ndef(\a,{
	var octave,tune,base,d1,d2,f;
	octave = Duty.kr(32,0,Dseq([0,2,1]*12,inf));
	tune = Duty.kr(16,0,Dseq([1,2,1.5,1.25,0.75],inf));
	base = Duty.kr(4,0,Dseq(([39,34,42,35]+octave).midicps/(tune*pi),inf));
	d1 = Duty.kr(1/4,0,Dseq([1,2,1,4,1,2,1,1.5],inf));
	d2 = Duty.kr(4,0,Dseq([1,2,1,4,1,2,1,1.5],inf));
	f = base * (d1*2) * d2;

	detune = SinOsc.ar([4,5,6,7]).range(-2,2);


	sig = LFSaw.ar(f+detune,mul:0.15) * Decay.ar(Impulse.ar(4/fib(8)),(1..8)/6);
	sig = Resonz.ar(sig,LFTri.ar(1/44/fib(8)).range(f*4,f/4));
	sig = AllpassN.ar(sig.distort!4,0.25,0.25,32);
	sig = CompanderD.ar(sig,0.5,1,1/6,0.002,0.02);
	sig = Vibrato.ar(sig,[4,5,6,7],0.2);
	sig = FreeVerb.ar(sig,0.133,2);

	Splay.ar(
		sig.distort.softclip
)}).play;
)


///it's like you were born in the 80s or smth ^^
(
~m.quant=4;
~m={LFSaw.ar(1/4).range(0,7)};
~a.map(\sel,~m);

~m2.quant=4;
~m2={LFNoise0.kr(1).range(0,2).round(1/2)};
~a.map(\freq,~m2);

~a.fadeTime=4;
~a.quant=2;
~a.play;


)

(
~a[0]={|len=1,freq=1,sel=0|
	var sigs = [
		LFSaw.ar(432/8*freq*(1.001*(1..8))),
		WhiteNoise.ar(1!2),
		LFSaw.ar(432/4*freq*(1.0001*(1..8))),
		BrownNoise.ar(1!2),
		LFSaw.ar(432*freq*(1.00001*(1..8))),
		GrayNoise.ar(1!2),
		LFSaw.ar(43.2*freq*(1.00001*(1..8)))
	];

	sigs = Select.ar(sel,sigs) * Decay.ar(Impulse.ar(4,0.5));

	Splay.ar(sigs)
};
~a.mold(2);

);

(

~a[10]=\filter->{|in| BBandPass.ar(in,LFSaw.ar(4).exprange(888,22.22))};
~a[12]=nil;//\filter->{|in| Resonz.ar(in,LFTri.ar(1/4/[1,2,4,8]).exprange(888,33),2,1.5)};
~a[14]=nil;//\filter->{|in| LPF.ar(in,LFTri.ar(1/16).exprange(250.01,12500))};
~a[16]=\filter->{|in| CompanderD.ar(in,0.95,1,1/10)};
~a[18]=\filter->{|in| Limiter.ar(in,1)};
~a[20]=\filter->{|in| FreeVerb.ar(in,0.1,1)};

);







(
~a.quant=2;
~a={
	var harm = Harmonics.new(32);
	var sig = LFSaw.ar((harm.formant(1,40)*2200).scramble/2pi,mul:0.5);
	sig = SelectX.ar(LFSaw.ar(1/16/4).range(0,32),sig);
	sig = MoogFF.ar(sig,LFSaw.ar(1/8/[1,2,4]).exprange(0.00001,1)**2 * 3000+22);
	sig = GVerb.ar(sig)/4+sig;

	Splay.ar(sig,0.1);

};
~a.mold(2);
~a.play;
)(
Ndef(\a,{
	Splay.ar(
		Limiter.ar(CombN.ar(Pulse.ar((1.0001**(1..8))*10) * LFSaw.ar(1/8/(1..32)).range(0,1),
			1/80,1/70,10) ,1) / 2  ,0.3,1) }).play;
)
(
~human={
	var sig,env,fenv,tenv,imp,mod1,mod2;
	mod1 = Duty.kr(4,0,Dseq([1,1,2,1,4,2,4],inf)).lag(1/10);
	mod2 = Duty.kr(4,0,Dseq([1,1.5,1.25,1.125,2,4],inf)).lag(1/10);
	imp = Impulse.ar(1/4,(0..7)++[0.5,0.25]/8);
	imp = TDelay.ar(imp,TExpRand.ar(0.001,0.125,imp));
	env = EnvGen.ar(Env.perc(0.01,2),imp);
	fenv = EnvGen.ar(Env.perc(0.0005,0.025,LFDNoise1.ar(1/[7,8,3,2]).exprange(150.01,350)),imp);
	tenv = EnvGen.ar(Env.perc(0.5,0.0025),imp);

	sig = SinOsc.ar([50,75,50,100]+fenv) * env + (LFSaw.ar(43.2*(mod1*0.5pi)) + SinOsc.ar(4320/(mod2*pi)) * tenv / 8) / 2;
	sig = Vibrato.ar(sig,[4,5,6,7]/4,0.2);
	sig = Limiter.ar(sig.softclip.distort,1,0.01);
	sig = BPF.ar(sig,LFDNoise1.ar(1/4/[7,8,3,2]).exprange(150.01,15000)) + LPF.ar(sig,150);
	sig = CompanderD.ar(sig,0.75,1/2,1/2);

	Splay.ar(sig.flat,0);

};
~human.quant=2;
~human.fadeTime=2;
~human.play;
)


(
~a = {

	var sig;
	sig = Pluck.ar(
		LFSaw.ar(43.2*(1.00001**(1..8))*(Pulse.ar(4)*0.5+1)),Impulse.ar(6/[1,2]),0.01+TExpRand.ar(0.0001,0.1,Impulse.ar(1/2)).lag(1),0.01+TExpRand.ar(0.0001,0.05,Impulse.ar(1/4)).round(0.0025),0.55);

	sig = LPF.ar(sig,4000) + Resonz.ar(WhiteNoise.ar(0.75),LFSaw.ar(1/4/[1,2]).exprange([440.01,880],1.01));
	sig = sig + (SinOsc.ar(4320*[2,8,0.25,1.5,0.5],mul:0.5) * Decay.ar(Impulse.ar(1/16,[1,2,4,8].normalize),2));
	sig = sig + (SinOsc.ar(43.2 * 3,mul:0.5)* Decay.ar(Impulse.ar(1),1));
	sig = CompanderD.ar(sig,0.9,1,0.1);
	sig = FreeVerb.ar(sig,0.133,200);
	sig = Limiter.ar(sig,1);
	Splay.ar(sig,0.1);
};
~a.play;
)


// cool ^^s.boot;
(
Ndef(\a).quant = 2.0;
Ndef(\a,{
	var mod1,mod2,mod3,f,att,env,sig;
	mod1 = Duty.ar(4,0,Dseq([-2,2,0,6,12],inf));
	mod2 = Duty.ar(4,0,Dseq([0,0,2,12,0],inf));
	mod3 = Duty.ar(1/8,0,Dseq([0,-12,0,0,0,0],inf));

	f = Duty.ar(1/4,0,Dseq(([60+mod1+mod3,69+mod2+mod3]).midicps,inf));
	att = SinOsc.ar(1/32).range(0.01,0.04);

	sig = Limiter.ar(
		SinOsc.ar(f.lag(1/120),mul:0.3) +
		LFSaw.ar(f.lag(1/320) * 1.5,mul:0.1) +
		LFSaw.ar(f.lag(1/320) * 0.5,mul:0.1) * 0.75
	);

	env = LFSaw.ar(4).squared;


	FreeVerb.ar(
		CombN.ar(
			RLPF.ar(
				CompanderD.ar(sig,0.01+SinOsc.ar(4/(1..16)).range(0.0001,0.9),1,1/10,att,0.2) *
				sig
				,f)
			,0.05*(1.0001**(1..16)),4,32)
		,0.133,2)

}).play;
Ndef(\a).mold(2);
);
////////////////////////////////////
(
Ndef(\kick).quant = 2.0;
Ndef(\kick,{
	var speed,sig,cmp;
	speed = 4;

	sig = LPF.ar(
		Ringz.ar(
			Impulse.ar(speed / [1,2]),
			TExpRand.ar(44.0,55.0,Impulse.ar(4)),
			TExpRand.ar(0.15001,1.5,Impulse.ar(4)))
		, 500 );
	cmp = CompanderD.ar(sig,0.15,1,0.26, clampTime: 0.004, relaxTime: 0.08);

	Splay.ar(
		cmp * 3
		,0.5,0.75,0.5)
}).play;
)


/////aiiii bonito ^^

s.boot;

(
Ndef(\a).fadeTime = 2.0;
Ndef(\a).quant = 2.0;

Ndef(\a,{


	var a,b,f,f2,hh,sint,hh;

	a = Duty.ar(4,0,Dseq([2,-2,2,5,0,0,0,0],inf));
	b = Duty.ar(4,0,Dseq([0,-2,0,-4],inf));
	f = Duty.kr(Dseq([1/4,1,1].normalize/8,inf),0,Dseq(([60+a,69+b,35+a,57+b]+12).midicps,inf));

	f2 = Duty.kr(4,0,Dseq(([60,65,58,69]).midicps/2pi,inf));

	hh = Duty.kr(Dseq([1/4,1,1].normalize/2,inf),0,Dseq([1,1,1,2],inf));

	sint = SinOsc.ar(f2-12.midicps,mul:0.1) * LFSaw.ar(SinOsc.ar(1/4/[11,22,33,44]).range(0.01,1)*5+111) * SinOsc.ar(1/4/[1,2,3,4]).range(0,1);

	sig =
	Vibrato.ar(
		(
			LFTri.ar(f + SinOsc.ar(1/[11,12,13,14]).range(-4,4) ,mul:0.4) * Decay.ar(Impulse.ar(4),1.5) +
			SinOsc.ar(f * 2 + SinOsc.ar(1/[11,12,13,14]).range(-2,2) ,mul:0.14) * Decay.ar(Impulse.ar(2),1.5) +
			(LFSaw.ar(f * (1..8) + SinOsc.ar(2/[11,12,13,14]).range(-2,2) ,mul:0.2/(1..8)) * Decay.ar(Impulse.ar(2),0.05*(1..8)))

		).softclip +
		RLPF.ar(LFSaw.ar(f2*2,mul:0.5),f2*pi*LFTri.ar(1/(1..11)).range(0.5,1.5))
		,[4,5,6,7],0.2) +
	((BrownNoise.ar(0.25!2) * SinOsc.ar(hh/4).range(0,1)) * LFPulse.ar(hh));


	Splay.ar(
		LPF.ar(
			CompanderD.ar(
				CombN.ar(
					BBandPass.ar(
						sig
						,22000/(1..8),4,SinOsc.ar(1/4/(1..8).scramble).range(0,2))
					*
					LFSaw.ar(1/4/[1,2,4],mul:0.4).squared +
					sint
					,1/32/(1..8),(1..8)*2,(1..8)*4)
				,0.25,1,1/3,0.02,0.02) +
			LFSaw.ar(f2*8pi,mul:0.002)

			,16000) * 2 + (sig / 2)
		,0.25,1,0.5)}).play
)

s.scope;



(
~monday={
	var env = Decay.ar(Impulse.ar(2),1.5);
	var sig = GrayNoise.ar(0.5!4) + SinOsc.ar(44*[1,2,4,8]*pi);


	sig = Vibrato.ar(sig,[4,5,6,7],0.2);
	sig = CombN.ar(sig,0.01*(1..8),0.01*(1..8),8);
	sig = Normalizer.ar(sig,0.5);
	sig = BBandPass.ar(sig,LFTri.ar(1/8/[1,2,4,8]).exprange(16000.0001,33),0.5);
	sig = HPF.ar(sig,150);
	sig = GVerb.ar(sig)/1.75+sig/1.25;
	sig = CompanderD.ar(sig,0.75,1/2,1/4);

	env = Mix.fill(2,env);
	sig = sig + (SinOsc.ar(50*(env**10*0.001+1),mul:0.95) * env);
	sig = sig + (SinOsc.ar(150*(env**10*0.001+1),mul:0.5) * env);

	sig = CompanderD.ar(sig,0.75,1/1.5,1/1.5) / 2;


	Splay.ar(sig.flat,0.1,0.25);

};
~monday.quant=2;
~monday.play;
)

//jesus christ 


(
~a={
	var m = Duty.kr(4,0,Dseq([1,2,4,8,1.2,1.25,1.125,1],inf));
	var mod = Duty.kr(1/4,0,Dseq([1,2],inf)).lag(1/20)*8/(m*0.5pi);
	var sig = LFSaw.ar(50*mod,mul:0.5).distort;


	sig = MoogFF.ar(sig,LFSaw.ar(1/4/[1,2,4,8]).exprange(22,4000));
	sig = sig + (PinkNoise.ar(0.5!2) * Decay.ar(Impulse.ar(1/4,(0..3)/16)));

	sig = sig.distort + (SinOsc.ar(50!2)*LFPulse.ar(1/4,0,0.25));


	sig = GVerb.ar(sig)/4+sig/2;

	sig= CompanderD.ar(sig,1/2,1/2,1/2);

	sig = sig / 2;

	Splay.ar(sig.flat,0.1,0.5);

};
~a.quant=2;
~a.play;
)


s.reboot;


// hm.. I have no f**cking idea how that works, sometimes it sounds as johny cash))

{f=LocalIn.ar([0,1]).tanh;LocalOut.ar(GVerb.ar(BPF.ar(f+SinOsc.ar([88,88.01]),LFSaw.ar([11,22,33,44]).range(44,22000))));}.play;

//..some explanation is sndcard lag.. mine is 9 millis..that creates sound, it may not at all in higher sndcard lag

s.scope;

// these are measured frequencies from the glass hit by spoon on baudline, it sounds almost exactly the same )

(
~glass={
	var trig = Dust.ar(1);
	var mod = 1;
	var sig = DynKlank.ar(`[
		[1589.7,3997,1589,6452,7177,6908,12039],
		nil,
		[1,1,0.1,0.1,0.1,0.1,0.1]],
	TDelay.ar(trig,TExpRand.ar(0.001,0.05,trig)*(1..3)),mod,0,1);

	sig = FreeVerb.ar(sig,0.3,0.5);
	Splay.ar(sig,0.1,0.7);
};

~glass.play;
)

p=ProxySpace.push(s);

//wow, cool. Do you miss doing a more analog performace, sort of what we did in Bratislava? ^^

s.boot;

(
    Ndef(\abc).quant = 2.0;
    Ndef(\abc,{|note=60,oct=0,mod1,mod2,oct1,oct2|
               Splay.ar(
                   FreeVerb.ar(
                           Vibrato.ar(
                               LPF.ar(
                                   LFSaw.ar( (mod1+mod2).midicps.lag(1) * oct1 * (1.01**(1..8)), mul:0.25) +
                                   LFSaw.ar((note+oct).midicps * oct2 * (1.001**(1..8)),mul:0.25) * LFSaw.ar(1/8/[1,2,4,8]).squared
                                   ,((note+oct).midicps + (mod1+mod2).midicps * (1.01**(1..8))))
                               [4,5,6,7],0.2) + LFSaw.ar((note+oct-24).midicps * 1.5 * oct2 * (1.00001**(1..8)),mul:0.12) +
                       (SinOsc.ar(99+((1/oct1+1/oct2)*9)) * Decay.ar(Impulse.ar(4/[1,2,4]),0.1,mul:0.4)) +
                       HPF.ar((WhiteNoise.ar(0.2!4) * Pulse.ar(4/fib(8),mul:0.4)),SinOsc.ar(0.01**(1..8)).range(444,4444))
                       ,0.133,2)
               ,0.2,1)}).play;

    Ndef(\abc)[1] = \set -> Ppar([
        Pbind(
            \dur, Pseq([1/4], inf),
            \note, Pseq([60,65,69],inf),
            \oct, Pseq([[0,12,-12],[0,-12,12],[24,0,0]],inf)
        ),
        Pbind(
            \dur, Pseq([1/4,1/4,1/2], inf),
            \mod1, Pseq([60,67,61]-24,inf),
            \mod2, Pseq([[0,12,-12],[0,-36,12],[24,0,-36]],inf)
        ),
        Pbind(
            \dur, Pseq([1/4,1/4]*16, inf),
            \oct1, Pseq([1,1.5,1.25,0.5,0.75,1.25,2,1],inf)
        ),
        Pbind(
            \dur, Pseq([1/4,1/4]*32, inf),
            \oct2, Pseq([1,1.5,1.25,0.5,0.75,1.25,2,1].reverse,inf)
        )
    ])
);
)


s.boot;

(
    Ndef(\abc).quant = 2.0;
    Ndef(\abc,{|note=60,oct=0,mod1,mod2,oct1,oct2|
               Splay.ar(
                   FreeVerb.ar(
                       CompanderD.ar(
                           Vibrato.ar(
                               CombN.ar(
                                   LFTri.ar((mod1+mod2).midicps * oct1 * (1.001**(1..8)), mul:0.5).distort +
                                   LFSaw.ar((note+oct).midicps * oct2 * (1.0001**(1..8)),mul:0.25).distort
                                   ,0.02,4,8) *
                               LFSaw.ar(1/2/fib(8)).squared
                               ,[4,5,6,7],1/(1..8)) +
                           LFSaw.ar((note+36).midicps / (oct1*oct2).lag(1/fib(8)) * (1.001**(1..8)),mul:0.5).tanh.distort +
                           (SinOsc.ar([44,45]) * Pulse.ar(4/[1,2,2,4],mul:0.35)) +
                           HPF.ar((WhiteNoise.ar(0.2!4) * Pulse.ar(4/fib(8),mul:0.4)),SinOsc.ar(1.1**(1..8)).range(444,4444))
                           ,0.5,1,0.5)
                       ,0.33,2)
                   ,0.5,1)}).play;

    Ndef(\abc)[1] = \set -> Ppar([
        Pbind(
            \dur, Pseq([1/4], inf),
            \note, Pseq([60,65,69,61,61,60-12,60,60+12], inf),
            \oct, Pseq([[0,12,-12].scramble,[0,-12,12].scramble,[24,0,0].scramble].scramble,inf)
        ),
        Pbind(
            \dur, Pseq([1/4,1/4], inf),
            \mod1, Pseq([60,60-12,61],inf),
            \mod2, Pseq([[0,12,-12].scramble,[0,-0,12].scramble,[24,0,0].scramble].scramble,inf)
        ),
        Pbind(
            \dur, Pseq([1/4,1/4]*16, inf),
            \oct1, Pseq([1,1.5,1.25,0.5,0.75,1.25,2,1],inf)
        ),
        Pbind(
            \dur, Pseq([1/4,1/4]*32, inf),
            \oct2, Pseq([1.5,1.25,0.5,0.75,1.25,2,1].reverse,inf)
        )
    ])
);
)


s.boot;

(
    Ndef(\abc).quant = 2.0;
    Ndef(\abc,{|note=60,oct=0,mod1,mod2,oct1,oct2|
               Splay.ar(
                   FreeVerb.ar(
                       CombN.ar(
                           Vibrato.ar(
                           LFTri.ar( (mod1+mod2).midicps * oct1 + (1.01**(1..8)), mul:0.75) +
                           LFSaw.ar((note+oct).midicps * oct2 + (1.001**(1..8)),mul:0.5) * LFSaw.ar(1/4/fib(5)).squared
                               [4,5,6,7],0.2)
                           ,0.02,4,8) +
                       (SinOsc.ar(99*(1/oct1+oct2)) * Pulse.ar(4/[1,2,4],mul:0.2)) +
                       (WhiteNoise.ar(0.1!4) * Pulse.ar(2/[1,2,4],mul:0.1))
                       ,0.33,100)
               )}).play;

    Ndef(\abc)[1] = \set -> Ppar([
        Pbind(
            \dur, Pseq([1/4], inf),
            \note, Pseq([60,61,72],inf),
            \oct, Pseq([[0,12,-12],[0,-12,12],[24,0,0]],inf)
        ),
        Pbind(
            \dur, Pseq([1/4,1/4,1/2], inf),
            \mod1, Pseq([60,67,61]-24,inf),
            \mod2, Pseq([[0,12,-12],[0,-36,12],[24,0,-36]],inf)
        ),
        Pbind(
            \dur, Pseq([1/4,1/4,1/2]*16, inf),
            \oct1, Pseq([1,1.5,1.25,0.5,0.75,1.25,2,1],inf)
        ),
        Pbind(
            \dur, Pseq([1/4,1/4,1/2]*32, inf),
            \oct2, Pseq([1,1.5,1.25,0.5,0.75,1.25,2,1],inf)
        )
    ])
);
)


// <3
s.reboot();
s.freeAll;

(
  Ndef(\d).play;
  Ndef(\d).fadeTime = 0.02;
  Ndef(\d).quant = 2.0;
  Ndef(\d).play;
)

(
  var f = {|freq| Splay.ar(LPF.ar(SinOsc.ar(freq * MouseX.kr(0.5,4).round(1/8) * (1.001**(1..24)),mul:1.1/(1..24)),SinOsc.kr(1/(1..24)).range(44,8800)) ) };
  Ndef(\d)[0] = f;
)


(
  Ndef(\d)[1] = \set -> Pdef(\aa,
                             {Pbind(
                               \dur,Pseq([1/8],inf),
                               \freq,Prand([60,60-12,60-24,72].midicps,inf) +.x Pseq(#[0,1,2,7,11].midicps,inf)
                             )}
                            ).quant_(2);
  Pdef(\aa).play;
)

Ndef(\d)[2] = \filter -> {|in| AllpassC.ar(Pulse.ar(4)*in,MouseY.kr(0.002,0.2),MouseY.kr(0.002,0.2,1),8)};


// ^^ control with mouse

(

    ////////////////////////////////////////////////////////////////////////

    ~base.quant=2;
    ~base={Duty.kr(16,0,Dseq(60+[-12,12,-24,24,0,0],inf))};

    ~mel.quant=2;
    ~mel={Duty.kr(Dseq([4,2],inf),0,Dseq([2,1.5,2,1.25,2,1.125,1,4],inf))};

    ~sel.quant=2;
    ~sel={Duty.kr(1/2,0,Dseq([-12,12,1,-24],inf))};

    ///////////////////////////////////////////////////////////////////////
    
    ~neue.quant=2;
    ~neue={
        var imp = Decay.ar(Impulse.ar(2/[2,4,8,6],(0..7)/8),0.75);
        var imp2 = Decay.ar(Impulse.ar(1/8,(0..7)++[0.5,0.25]+0.5/8),0.25);
        var imp3 = Decay.ar(Impulse.ar(1/2,(0..7)++[0.5,0.25]/8),3.75);

        var sig;
        var notes = (~base.ar+[0,~sel.ar]).midicps*4/(~mel.ar*pi);
        notes = Select.kr(LFSaw.kr(4/[2,4]).range(0,notes.size+0.01),notes);
        sig = LFSaw.ar(notes*(1.00001**(1..8))*(imp3**0.004+1),mul:2);

        //sig = CombN.ar(sig,1,1,4);

        sig = Resonz.ar(sig,150+(imp3*10000)) * imp3;

        sig = HPF.ar(sig,75);

        sig = sig + (SinOsc.ar(50!2+(imp**8*500),mul:0.95) * imp);

        sig = LPF.ar(sig,250);

        sig = sig + (PinkNoise.ar(imp2));

        sig = CompanderD.ar(sig,0.9,1/3,3);

        sig = Mix(sig)/2;

        sig = GVerb.ar(BPF.ar(sig,SinOsc.kr(1/8/[1,2]).range(110,12200)),100,10)/3 + (LPF.ar(sig,SinOsc.kr(1/[4,8]).range(100,1200))/3);

        Splay.ar(sig.flat,1).softclip;

    };

    ///////////////////////////////////////////////////////////////////////
    ~neue.play;
)


//i think you should get sick more often. and give me whatever you got as well. goddammit <3
// lol, I am fine now, thanks))
///////////////////////////////////////////////////
///  VIM rulezz  ////////  and this sound sucks ///
///////////////////////////////////////////////////


(
Ndef(\abrakadabra).fadeTime = 2.0;
Ndef(\abrakadabra).quant = 2.0;
Ndef(\abrakadabra,{
	var mod;
	mod = 0.25;
	Splay.ar(
		FreeVerb.ar(
			CombN.ar(
				SinOsc.ar(
					SinOsc.ar([4,5,6,7]).range(-18,18) +
					4320/mod/(2.0001**(1..12).scramble),mul:0.2).distort.distort *
				LFSaw.ar(1/(2**(1..12))).squared
				* Decay.ar(Impulse.ar(8/fib(12)),{ExpRand(0.2,1)}!12)
				,0.01,4,32)
			,0.133,10)
		,0.5,1)

}).play;
)

//what's VIM?



(

~a={
	var sig;
	sig = Klank.ar({`[Array.fill(20,{ExpRand(44,14480)}),nil,Array.fill(20,{ExpRand(0.01,1)})]}!16,SelectX.ar(LFTri.ar(1/32).range(0.0,16.1),LPF.ar(PinkNoise.ar(0.001!16),22000/(1..16).scramble)));
	sig = Mix.ar(sig);
	sig = BBandPass.ar(sig,18800/32*(1..16)+80,0.15,SinOsc.ar(1/4/(1..32).scramble,{ExpRand(0,2pi)}!16).exprange(0.00001,1));
	sig = CompanderD.ar(sig,1/1.2,1/2);
	sig = FreeVerb.ar(sig,0.153,1.5);
	Splay.ar(sig,0.1);

};
~a.play.quant_(4);
)
(
~a.quant=2;
~a={
	var sig,env,env2,env3,t,nois,noisEnv;

	t = Mix.ar(Impulse.ar(1/8,(0..3)/4));
	t = TDelay.ar(t,(1..30)*0.0125);//TExpRand.ar(0.0125,0.0125,t));

	nois = DynKlank.ar(`[[116,257,397,631,771,2641,2922,3553],nil,[1,1,0.2,0.2,0.2,1,1,0.7]],PinkNoise.ar(0.014!2),1);
	nois = Normalizer.ar(nois,0.8) + PinkNoise.ar(0.1!2);
	noisEnv = EnvGen.ar(Env.new([0,1,0],[0.0001,0.66],[3,-3]),t);

	nois = nois * noisEnv;

	sig = DynKlank.ar(`[[116,257,397,631,771,2641,2922,3553]],t) * 0.1 + LFSaw.ar([44]) + nois;

	env = EnvGen.ar(Env.new([18000,90,1800],[0.04,0.082],[-1,1]),t);
	env2 = EnvGen.ar(Env.new([0.85,0.858,0.0042],[0.028,2]),t);
	env3 = EnvGen.ar(Env.new([0,1,0.015,0.1],[0.00028,0.58,0.5]),t);

	sig = CombN.ar(sig,env2,env2,32);
	sig = LPF.ar(sig,18000);

	sig = CompanderD.ar(sig,0.9,1/1.25,1/10);
	sig = FreeVerb.ar(sig,0.153,10.5);
	sig = BPF.ar(sig,env,0.8) * env3;

	Splay.ar(sig,0.1);
};
~a.play;
)

(
~b.quant=2;
~b={

	var sig,fenv,t,nois,nois2,noisEnv;

	t = Mix.ar(Impulse.ar(1/8,(0..3)/4));
	t = TDelay.ar(t,(1..30)*0.0125);

	nois = DynKlank.ar(`[[116,257,397,631,771,2641,2922,3553],nil,[1,1,0.2,0.2,0.2,1,1,0.7]],PinkNoise.ar(0.014!2),1,0,0.06) +
	LFSaw.ar(44!2,mul:0.4);

	nois = nois + DynKlank.ar(`[[116,257,397,631,771,2641,2922,3553],nil,[1,1,0.2,0.2,0.2,1,1,0.7]],PinkNoise.ar(0.014!2),1,0,0.08);
	// nois = Normalizer.ar(nois,0.4);
	noisEnv = EnvGen.ar(Env.new([0,1,0.001],[0.0001,1.16],[1,-5]),t);
	nois = nois * noisEnv;


	nois2 = WhiteNoise.ar(0.4!2);
	noisEnv = EnvGen.ar(Env.new([0,1,0],[0.01,0.0156],[3,-3]),t);

	fenv = EnvGen.ar(Env.new([12000,100,400],[0.01,0.136],[1,-3]),t);
	nois2 = GVerb.ar(nois2,2,0.7,0.1,drylevel:0.01,taillevel:6);
	nois2 = BPF.ar(nois2,fenv,0.15);
	nois2 = CompanderD.ar(nois2,0.5,1/1.5,1/10);

	nois = nois2 * noisEnv + nois;


	Splay.ar(nois,0.1);

};
~b.play;
)
(
Ndef(\harm).quant = 2.0;
Ndef(\harm).fadeTime = 4.0;

Ndef(\harm,{
	var mod,set,n;
	mod = Select.kr(Stepper.kr(Impulse.kr(2/[1,2,4,8,16]),max:5),[1,2,4,1/2,8,1/4]).lag(0.0002);
	set = [50,55,68];
	n =  set.scramble.midicps/mod;
	Splay.ar(
	AllpassC.ar(
			Pluck.ar(LFCub.ar((LFNoise0.kr(4.8!4).range(-10,10).lag(1) + set.midicps)/24),Impulse.ar([1,2,4]),mul:0.31) +
			Pluck.ar(SinOsc.ar(LFNoise0.kr(4.8!4).range(-10,10).lag(1) + n) * SinOsc.ar(n),Impulse.ar(16/[1,2,4,8].scramble),mul:0.4,decaytime:1.25,delaytime:0.25),decaytime:1.25,delaytime:0.25,mul:SinOsc.kr((_*0.01!8)+0.01).range(0.3,0.7))
)}).play;
)

s.reboot;

(
Ndef(\a).fadeTime = 2.0;
Ndef(\a).quant = 2.0;

Ndef(\a,{
	var scale1,scale2,mul1,mul2,mul3,note1,note2;
	scale1 = [38,48,72,55,48,57,70,67,67,74,70,72,65,70,67];
	scale2 = [63,65,57,72,70,67,75,74,89,60,55,48,70,70,63];

	mul1 = Select.kr(Stepper.kr(Impulse.kr(2/[1,2,4,8]),max:6),[1,1,0.5,1,0.5,1,0.5].scramble).lag((_*0.0011!16));
	mul2 = Select.kr(Stepper.kr(Impulse.kr(4/[1,2,4,8]),max:6),[1,0.5,2,0.5,0.5,1,2]).lag((_*0.001!16));
	mul3 = Select.kr(Stepper.kr(Impulse.kr(8/[1,2,4,8]),max:6),[1,0.5,2,1,0.5,1,1]).lag((_*0.001!16));

	note1 = Select.kr(Stepper.kr(Impulse.kr(1/[1,2,4,8,16,32].scramble),max:scale1.size),scale1.scramble.midicps * (mul1 * mul2)).lag((_*0.001!16));
	note2 = Select.kr(Stepper.kr(Impulse.kr(1/2/[1,2,4,8,16,32].scramble),max:scale2.size),scale2.scramble.midicps * (mul1 * mul3)).lag((_*0.001!16));

	Splay.ar(
		Limiter.ar(
			(0.5 * Pluck.ar(VarSaw.ar((_*0.1!16)+note1,{ExpRand()*10.0}!16), Impulse.ar(2*[1,2,4,8]),decaytime:0.8, delaytime:0.3 )) +
			(0.25 * Pluck.ar(VarSaw.ar((_*0.1!16)+(note1*mul3),{ExpRand()*10.0}!16), Impulse.ar(1/2*[1,2,4,8]),decaytime:2, delaytime:0.31 )) +
			(0.15 * Pluck.ar(VarSaw.ar((_*0.1!16)+(note2*mul2),{ExpRand()*10.0}!16), Impulse.ar(1/4*[1,2,4,8]),decaytime:2, delaytime:0.32 ))
		)
)}).play;
)

Ndef(\a).stop(1);
p = ProxySpace.push(s);
Ndef.defaultReshaping = \elastic;


(
~a.fadeTime = 5;
~a.play;
~a.quant = 2;


~modulate.quant=2;
~modulate = {Duty.kr(4*(1..8),0,Dseq([0,-12,-24,-12,12],inf))};

~a[0]={
	var sig;

	sig = SinOsc.ar(([60,67,64,69,65,60-12+7,60-24+4]+~modulate).midiratio * (pi) * (1..12) * (1.0001**(1..12)),SinOsc.ar(8/[11,22,44]).range(-pi,pi),mul:1/(1..12));
	sig = sig * LFSaw.ar(1/(1..8)).range(0,1) * 2;
	sig = sig + (LFSaw.ar([44,88] * Decay2.ar(Impulse.ar(4/[1,2]),0.002,0.18,5,1),0.1) * Decay2.ar(Impulse.ar(4/[1,2]),0.2,1));
	sig = sig + (HPF.ar(WhiteNoise.ar(0.005!4),TExpRand.ar(440,16000,Impulse.ar(1/2!4))) * Pulse.ar([1/4,1/8,1],[1,2,6,8].normalize));
	sig = CompanderD.ar(sig,0.5,1,1/10);

	Splay.ar(sig,0.2,1);
};



~a[10]=\filter->{|in| BBandPass.ar(in,SinOsc.ar(1/12/(1..8)).range(44,8000)) };
~a[12]=\filter->{|in| Resonz.ar(in,SinOsc.ar(1/4/(1..8)).range(44,8000)) * 1.5};
~a[14]=\filter->{|in| Vibrato.ar(in,[4,5,6,7],0.2)};
~a[16]=\filter->{|in| FreeVerb.ar(in,SinOsc.ar(1/5/(1..8)).range(0.01,0.3),1)};

)

(
~mod = {Duty.kr(4,0,Dseq([1,1.25,1.5,1.125,2,4],inf))};
~one={
	var sig,t,l;
	l = 3;
	t = Impulse.ar(4/fib(8));

	sig = Spring.ar(ToggleFF.ar(t),10,0.1);
	sig = Spring.ar(sig,10.0/1.5,0.01);
	sig = Spring.ar(sig,10.0/2,0.01);
	sig = Spring.ar(sig,0.93/3,0.1);

	sig = CombL.ar(t, 0.21, LinLin.ar(sig, -10, 10, 1/[400,200,100,800,1600,3200]/~mod.kr, 1/200/~mod.kr), l);

	sig = Resonz.ar(sig,43.2)*32;
	sig = LPF.ar(sig,1000)*4;
	sig = FreeVerb.ar(sig,0.2,0.5);

	Splay.ar(sig,0.1);
};

~one.play;
);s.boot;
(
(
	SynthDef(\a,{|freq = 220, micro = 1.0001, bordel = 0, dur = 1|
		var sig,ramp,
		env = EnvGen.ar(Env.new([0,1,0],[{ExpRand(0.015,0.1)*dur}!4,{ExpRand(0.2,3)*dur}],[-3,{ExpRand(1,3)}!4]),doneAction:2);

		sig = SinOsc.ar(freq/(micro**(1..12)),mul:{ExpRand(0.02,0.5)}!4);

		ramp = Line.kr(0,1,dur).squared;
		sig = sig + (sig.lag(0.02) * ramp * LFSaw.ar(freq*(micro**(1..4))));
		sig = LPF.ar(sig,SinOsc.ar(freq/1000,{ExpRand(0,2pi)}).range(45,4400));
		sig = FreeVerb.ar(sig,0.3,10);

		Out.ar(0,Splay.ar(sig*env));
	}).store; //use add insted if store. "add" save it to memory, store save it on disk
);
)
/////////////////////////////////////////////////////////////////////////////////////////
(
(
	Pdef(\voice1).stop;
	Pdef(\voice1,Pbind(
		\instrument, \a,
		\dur, Pseq([1,2]/4,inf),
		\freq, Pxrand(([60,72,67,63]+24).midicps,inf),
		\bordel, Pwhite(0.0001,0.1,inf),
		\micro, 2.0001
	)).play;
);
)
(
(
	Pdef(\voice2).stop;
	Pdef(\voice2,Pbind(
		\instrument, \a,
		\dur, Pseq([2,8,2,4],inf),
		\freq, Pxrand(([60,72,67,63]-12).midicps,inf),
		\bordel, Pwhite(0.0001,0.1,inf),
		\micro, 1.0001
	)).play;
);


)


//u so wild kof. ugh

//in order to use env with dur u need to use "sustain" in defining the env

s.boot;
p=ProxySpace.push(s);

(
~a.quant=2;
~a.fadeTime=2;
    ~a={
    var mel = Duty.kr(8,0,Dseq([1,1.5,1.25,1.125,1.75,0.75,0.5],inf));
    var cut = LFTri.ar(1/8/fib(4,2,3)).pow(4).range(120,1200);

    var trig = Impulse.kr(1/8,(0..3)++[0.5,1.5,2.5,3.5]/4);
    var env = Linen.kr(trig,8,1,0.175);
    var sig = VarSaw.ar(43.20*([1,1.5,4,2]*(pi/mel))*(1.0001**(1..8)),mul:0.0475) * env;
    sig = RLPF.ar(sig,LFTri.ar(1/4/fib(8,1,3)).range(cut,250)*(env.pow(1.2)*2+1),0.25);

    trig = Impulse.kr(1/4,(0..3)++3.5/4);
    env = Linen.kr(trig,0.0025,1,1.75);
    sig = SinOsc.ar(43.2*(env.pow(8)*2+1))*env+sig;

    trig = Impulse.kr(1/8,(0..3)+0.5++[0.5,2.5]/4);
    env = Linen.kr(trig,0.005,1,0.75);
    sig = BPF.ar(PinkNoise.ar(0.2!2),(env.pow(12)*1000+800))*env+sig;

    sig = CompanderD.ar(sig,0.9,1/1.5,1/10);
    sig = FreeVerb.ar(sig,0.133,100.5);
    Splay.ar(sig,0.3);
};
~a.play;
)


//very cool ^^

(
~osmosis={
	var l,m,h;
	var cl,cm,ch;

	var modular = LFSaw.ar(11/(1..7)).range(0,11);
	var a = LFTri.ar(2200/(1..8)+modular,mul:0.04);
	a = a + SinOsc.ar(55*[1,2,1.5]+(modular.lag(0.01)/10),mul:0.8);

	a = a * Decay.kr(Impulse.kr(2/[1,2,8,4],(1..8)/8),0.6/[1,2,4,8]);

	l = LPF.ar(a,110*modular.lag(0.2));
	m = BPF.ar(a,220*modular.lag(0.4),0.15)*2;
	h = HPF.ar(a,1800*modular.lag(0.2));


	///// compressor party
	cl = LFSaw.kr(1/4/(1..8),0.5).exprange(1.0001,1/TExpRand.kr(0.2501,3,Impulse.kr(1!2)).lag(1) );
	cm = LFSaw.kr(1/2/(1..8),0.5).exprange(1.0001,1/TExpRand.kr(0.2501,3,Impulse.kr(1/2!2)).lag(2));
	ch = LFSaw.kr(1/3/(1..8),0.5).exprange(1.0001,1/TExpRand.kr(0.2501,3,Impulse.kr(1/4!2)).lag(4));

	l = CompanderD.ar(l,0.75,cl,1/4);
	m = CompanderD.ar(m,0.75,cm,1/4);
	h = CompanderD.ar(h,0.75,ch,1/4);
	/////


	a = (l+m+h);

	a = GVerb.ar(a,10,2)/3.5+a/1.5;

	a = a.softclip;

	Splay.ar(a,0.5,1);

};

~osmosis.play;
)

(
~xoxxxo.quant=2;
~xoxxxo.play;
~xoxxxo={
	var t,env,t2,env2,sig,fenv,fenv2;
	var tempo = 1/2;
	t = Impulse.ar(tempo/2,1/8*((0..7)++[7.25,7.5]+LFNoise0.ar(1!4,0.0025)));
	t2 = Impulse.ar(tempo,1/4*((0..3)+0.5+LFNoise0.ar(1!4,0.0025)));

	env = Decay.ar(t,0.5);
	env2 = Decay.ar(t2,0.9);

	fenv = Decay.ar(t,0.002+LFNoise0.ar(1,0.002)).sqrt.distort;
	fenv2 = Decay.ar(t2,0.32).sqrt.distort;


	sig = SinOsc.ar(48*(fenv+1*2))*env;
	sig = sig + HPF.ar((WhiteNoise.ar(0.4!2) * env2),12000/((fenv2+1)));


	sig = CompanderD.ar(sig,0.95,1/LFSaw.ar(2/[1,2]).range(1.5,0.1),1/2)*2;


	Splay.ar(sig,0);

};

)

(
~xoxxxo.quant=2;
~xoxxxo.play;
~xoxxxo={
	var t,env,t2,env2,sig,fenv,fenv2;
	var tempo = 1/2;
	t = Impulse.ar(tempo,1/4*(0..3));
	t2 = Impulse.ar(tempo,1/4*((0..3)+0.5));

	env = Decay.ar(t,0.75);
	env2 = Decay.ar(t2,0.75);

	fenv = Decay.ar(t,0.05).sqrt.distort;
	fenv2 = Decay.ar(t2,0.32).sqrt.distort;


	sig = SinOsc.ar(50*(fenv+1*2))*env;
	sig = sig + HPF.ar((WhiteNoise.ar(0.4!2) * env2),18000-((fenv2+1)*4000));

	sig = CompanderD.ar(sig,0.95,1/LFSaw.ar(16/[1,2]).range(1,4),1/6);

	Splay.ar(sig,0);

};

)
s.boot();
(
Ndef(\a).fadeTime = 8.0;
Ndef(\a,{Splay.ar(
	SinOsc.ar(43.07*3pi*(1.001**(1..32)),mul:1/(1..32))
	,1,1,0.5)}).play;
)


(
~mod.quant=4;
~mod.mold(4);
~mod={Duty.kr([4,8,16,32],0,Dseq(powerset([1,1.25,1.5,2,4,3]).scramble.flat.pyramid.scramble,inf))};


~md.quant=4;
~md.mold(4);
~md={Duty.kr([4,8,16,32]*2,0,Dseq(powerset([1,1.25,1.125,1.5,2,0.75,0.5]).scramble.flat.pyramid.scramble,inf))};


~md3.quant=4;
~md3.mold(4);
~md3={Duty.kr([4,8,16,32]*4,0,Dseq(powerset([1,1.25,1.125,1.5,0.75,0.5]).scramble.flat.pyramid.scramble,inf))};


~mod2.quant=4;
~mod2.mold(1);
~mod2={Duty.kr(4,0,Dseq(powerset([2,1.5,1,4,0.5,1.5]).scramble.flat.pyramid,inf))};

)

(

~a.play;
~a.quant = 4;

~a = {
	var sig,t,env,mel;

	t = Impulse.ar(1/4,1/8*[0,1,2,3,5,4,6,7,7.25,7.5,7.75]+TExpRand.ar(0.00001,0.005,Impulse.ar(1)));
	env = Decay.ar(t,1.45);
	sig = SinOsc.ar(43.2 * (env.sqrt*1.5+1),mul:0.25 ) * env;

	t = Impulse.ar(1/4,1/8*([0,1,2,3,4,5,6,7,7.25,7.5]+0.5));
	env = Decay.ar(t,0.25);

	sig = BPF.ar(BrownNoise.ar(0.4!2) * env,TExpRand.ar(8000,18000,t)-(1+env.sqrt*4000)) + sig;


	t = Impulse.ar(1/2,1/8*([0,1,2,3,0,2,6]+TExpRand.ar(0.00001,0.05,Impulse.ar(1))));
	env = Decay.ar(t,1.25+TExpRand.ar(0.5,(1..3),t));
	mel = 43.202*2*((~mod2)*[1pi,0.5pi,2pi,0.25pi])/~mod;
	sig = RLPF.ar(LFSaw.ar(mel*(1.00001**(1..11))+SinOsc.ar(1/4/fib(11)).range(0,1.5),mul:0.64*TExpRand.ar(0.25,1,t)) * env,mel*(env.sqrt)) + sig;


	t = Impulse.ar(1/4,1/8*([0,2,4,6]));
	env = Decay.ar(t,3.75+TExpRand.ar(0.5,(1..4),t));
	mel = 43.2021*2*((~mod2)*[0.5pi,1pi])/~md;
	sig = RLPF.ar(LFSaw.ar(mel*(1.0001**(1..11))+SinOsc.ar(1/fib(11,1,3)),mul:0.54*TExpRand.ar(0.25,1,t)) * env,mel*(env.sqrt)) + sig;

	t = Impulse.ar(1,1/8*([0,2,4,6]+4));
	env = Decay.ar(t,0.95+TExpRand.ar(0.5,(1..4),t));
	mel = 43.20213*1*((~mod2)*[1pi,2pi])/~md3;
	sig = RLPF.ar(LFSaw.ar(mel*(1.000001**(1..11))+SinOsc.ar(1/fib(11,1,2)),mul:0.44*TExpRand.ar(0.25,1,t)) * env,mel*(env.sqrt)) + sig;



	sig = Vibrato.ar(sig,[4,5,6,7],0.04);
	// sig = CombN.ar(sig,0.025,4,8);
	sig = CompanderD.ar(sig,0.85,1/1.5,1/10);
	sig = FreeVerb.ar(sig,0.13,0.5);

	Splay.ar(sig,0.45,1);
};
)

(
~mod.quant=4;
~mod.mold(4);
~mod={Duty.kr([4,8,16,32],0,Dseq(powerset([1,1.25,1.5,2,4,3]).scramble.flat.pyramid.scramble,inf))};


~md.quant=4;
~md.mold(4);
~md={Duty.kr([4,8,16,32]*2,0,Dseq(powerset([1,1.25,1.125,1.5,2,0.5]).scramble.flat.pyramid.scramble,inf))};


~mod2.quant=4;
~mod2.mold(1);
~mod2={Duty.kr(4,0,Dseq(powerset([2,1.5,1]).scramble.flat.pyramid,inf))};


)

(

~a.play;
~a.quant = 4;

~a = {
	var sig,t,env,mel;

	t = Impulse.ar(1/4,1/8*[0,1,2,3,5,4,6,7,7.25,7.5,7.75]+TExpRand.ar(0.00001,0.005,Impulse.ar(1)));
	env = Decay.ar(t,1.45);
	sig = SinOsc.ar(50 * (env.sqrt*1.5+1),mul:0.5 ) * env;

	t = Impulse.ar(1/4,1/8*([0,1,2,3,4,5,6,7,7.25,7.5]+0.5));
	env = Decay.ar(t,0.25);

	sig = RHPF.ar(GrayNoise.ar(0.4!2) * env,TExpRand.ar(12000,18000,t)-(1+env.sqrt*4000)) + sig;


	t = Impulse.ar(1/2,1/8*([0,1,2,3,0,2,6,7]+TExpRand.ar(0.00001,0.05,Impulse.ar(1))));
	env = Decay.ar(t,1.5+TExpRand.ar(0.5,(1..3),t));
	mel = 43.202*2*((~mod2)*[1pi,0.5pi,2pi,0.25pi])/~mod;
	sig = RLPF.ar(LFSaw.ar(mel*(1.00001**(1..11))+SinOsc.ar(1/4/fib(11)).range(0,1.5),mul:0.64*TExpRand.ar(0.25,1,t)) * env,mel*(env.sqrt+1)) + sig;


	t = Impulse.ar(1/4,1/8*([0,2,4,6]));
	env = Decay.ar(t,3.75+TExpRand.ar(0.5,(1..4),t));
	mel = 43.2021*2*((~mod2)*[0.5pi,1pi])/~md;
	sig = RLPF.ar(LFSaw.ar(mel*(1.0001**(1..11))+SinOsc.ar(1/fib(11,1,3)),mul:0.84*TExpRand.ar(0.25,1,t)) * env,mel*(env.sqrt+1)) + sig;

	sig = Vibrato.ar(sig,[4,5,6,7],0.04);
	sig = CombN.ar(sig,0.025,4,8);
	sig = FreeVerb.ar(sig,0.13,0.5);
	sig = CompanderD.ar(sig,0.85,1/1.5,1/10);

	Splay.ar(sig,0.05,1);
};
)

(
~a={
	var f = Duty.kr(4,0,Dseq([60,63,65,64].midicps,inf)).lag(1/2);
	var t = Impulse.ar(1/8,(0..7)/8++((0..3)/4));
	var env = Decay.ar(t,4);
	var sig2 = 0;
	var sig = 0;

	f = f * Duty.kr(16,0,Dseq([1,2,1.5,1.25],inf));

	sig = SinOsc.ar(50+(env+0.0001**30.01*250+1));

	sig2 = (SinOsc.ar(f.lag(1/8)/([1.5,1.25,1,2])*(1.001**(1..8)),pi).lag(SinOsc.kr(1/4/(1..8)).exprange(0.00001,0.001))*LFTri.ar(1/4/[1,2,4,8],pi).exprange(0.01,0.2) ) / 4;

	sig2 = sig2 + (SinOsc.ar(f.lag(1/4)/([1.5,1.25,1,2])*(1.0001**(1..8))*20+SinOsc.kr(1/[1,2,4,8]).range(-10,10),pi).lag(SinOsc.kr(1/4/(1..8)).exprange(0.00001,0.001))*LFTri.ar(1/4/[1,2,4,8],pi).exprange(0.01,0.2) ) / 8;


	sig2 = Vibrato.ar(sig2,[4,5,6,7],0.3).distort;
	sig2 = CombN.ar(sig2,0.02,4,32);

	sig = sig2 + (sig * env);

	sig = HPF.ar(sig,40);
	sig = LPF.ar(sig,1500);


	t = Impulse.ar(1/8,(0..7)++[0.25,0.5]+0.5/8);
	env = Decay.ar(t,[0.25,1]);
	sig2 = BPF.ar(WhiteNoise.ar(0.25!7).distort,LFDNoise0.kr(2!4).range(1400,20000));
	sig2 = CombN.ar(sig2,0.015,0.018,32);
	sig2 = BPF.ar(sig2.distort,LFDNoise1.kr(20!4).range(1400,20000)) + sig2 / 10;

	sig = sig2 * env + sig;


	sig = CompanderD.ar(sig,0.75,1/2,1/8).softclip;
	sig = Limiter.ar(sig,0.9);
	sig = GVerb.ar(sig)/5+sig/3;

	Splay.ar(sig,0.1);
};
~a.play;
~a.quant=4;

~barrel={
	var sig2;
	var sig = PinkNoise.ar(0.1!4);
	var t = Impulse.ar(1/8,(0..3)/4);
	var times = TExpRand.ar(1.01,8,t);
	var slopes = TExpRand.kr(0.33,2,t);
	var freq = TExpRand.kr(20.01,12000,t);


	var env1 = EnvGen.ar(Env([20000,freq,4],[1.2,1.2]*times,[3,-3]*slopes),t);
	var env2 = EnvGen.ar(Env([0.01,1,0.001],[1.2,1.2]*times,[3,-3]*slopes),t);
	var env3 = EnvGen.ar(Env([0,1,0],[1.2,1.2]*times,[3,-3]*slopes),t);


	sig = BBandPass.ar(sig,env1,env2,env3);

	sig2 = DynKlank.ar(`[Array.fill(12,{TExpRand.ar(55.01,140,t).round(44/pi).lag(1/8)}),nil,Array.fill(4,{TExpRand.ar(1.001,4,t)})],sig/20.0);
	sig2 = Limiter.ar(sig2,0.75);

	sig2 = GVerb.ar(sig2)/5+sig/2;
	sig2 = HPF.ar(sig2,200);
	sig2 = LPF.ar(sig2,14000);
	sig2 = CompanderD.ar(sig2,0.5,1/1.5,1/2)/2;

	Splay.ar(sig2,0.1,0.75);
};
~barrel.quant=2;
~barrel.play;


)


s.scope
///////////////////////////////////////////////////////////////////// 1

p = ProxySpace.push(s);

///////////////////////////////////////////////////////////////////// 2
(
  ~mod = {Duty.kr(1/8,0,Dseq([1,2,1,4,1,0.5,1,0.25],inf))};
  ~mod.quant = 2;

  ~m = {Duty.kr(4,0,Dseq([1,2,1.5,1.25,4,0.5],inf))};
  ~m.quant = 2;
);
///////////////////////////////////////////////////////////////////// 3

(
(
  ~a.quant = 2;
  ~a.fadeTime = 16.0;
  ~a = {
    var freqs = ([60,67,48,65]).midicps;
    var sig = LFSaw.ar(freqs * ~mod * ~m * (1.000001**(1..8)));
    sig = sig * Decay.ar(Impulse.ar(4/fib(8)),0.75);
    sig = Resonz.ar(sig,freqs * ~m.ar.lag(1/8) * ~mod + LFSaw.ar(1*(1.0001**(1..8))).range(-8,8));
    sig = LPF.ar(sig,freqs * ~m * (~mod+1));

    Splay.ar(sig,0.6,0.95,0.5);
  }
);

(
  ~b.quant = 2.0;
  ~b.fadeTime = 2.0;
  ~b = {
    var sig = WhiteNoise.ar(1!2);
    sig = RHPF.ar(sig,LFSaw.ar(8/fib(12,1,3)).exprange(600,16000),0.2);
    sig = sig * Decay.ar(Impulse.ar(8/fib(12,1,3)),0.5);

    Splay.ar(sig,0.3,0.15);
  }
);

(
  ~c = {
    var sig = SinOsc.ar(66!2 + ( 250 * Decay.ar(Impulse.ar(2/[1,2]),0.145)));
    sig = Resonz.ar(sig+LFSaw.ar(66,mul:0.4),66.2+SinOsc.ar(1/4/fib(4)).range(-20,20) );
    sig = sig * Decay.ar(Impulse.ar(2/[1,2]),1.5);
    Splay.ar(sig,0.2,0.4);
  };
  ~c.quant = 2.0;
  ~c.fadeTime = 8.0;
);


(
  ~eff = {
    var sig = ~a + ~b + ~c;
    var sigL = LPF.ar(sig,150*SinOsc.ar(1/4.01).range(0.5,3));
    var sigM = BPF.ar(sig,450*SinOsc.ar(1/8.014).range(0.5,2),4);
    var sigH = HPF.ar(sig,1000*SinOsc.ar(1/16.013).range(0.5,10));

    sigL = CompanderD.ar(sigL,0.75,1,1/3,0.2,0.2,LFTri.ar(1/12.14).range(0.5,1.5));
    sigM = CompanderD.ar(sigM,0.75,1,1/2,0.02,0.02,LFTri.ar(1/13.14).range(0.5,1.5));
    sigH = CompanderD.ar(sigH,0.75,1,1/3,0.01,0.01,LFTri.ar(1/14.14).range(0.5,1.5));

    sig = sigL + sigM + sigH;

    sig = Limiter.ar(sig,0.95,0.02);
    sig = FreeVerb.ar(sig,0.133,2);

    Splay.ar(sig,0.2,1,SinOsc.ar(1/8).range(-0.2,0.2))
  };
);

///// run it
~eff.play;
)


(
  ~a.play;
  ~a.quant=2;
  ~a={
    var sig,m;
    m = {LFTri.ar(222/(1..8))*25};

    sig = SinOsc.ar(16000/(1..16),mul:0.05);
    sig = sig * LFPulse.ar(TExpRand.ar(1/4!16,16,Impulse.ar(4)));
    sig = CompanderD.ar(sig,0.5,1,1/10);
    sig = CombN.ar(sig,1,8,8);
    sig = FreeVerb.ar(sig,0.31,2);

    Splay.ar(sig);

  };

)


s.boot;

(
Ndef(\a).quant = 2.0;
Ndef(\a).fadeTime = 2.0;

Ndef(\a,{
	var tempo,m,sig;
	/////////////
	tempo = 4;
	/////////////
	m = Duty.kr(tempo*fib(4),0,Dseq([1,2,1.5,2,0.5,1.25,4,8]*pi,inf));

	sig = SinOsc.ar(43.2/[1,2,3,8]*m*(1.00001**(1..8))) * LFSaw.ar(tempo/2/fib(12)).exprange(0.0001,1) * Pulse.ar(tempo/fib(4)).softclip;

	sig = Vibrato.ar(sig,[4,5,6,7],0.2);
	sig = RLPF.ar(sig,LFSaw.ar(tempo/fib(4)).range(2000.01,44.01));
	sig = CombN.ar(sig,1,1,4) + SinOsc.ar(m*43.2 * Pulse.ar(tempo/fib(4)),mul:0.05);
	sig = Splay.ar(sig);
	sig = Resonz.ar(sig,LFTri.ar(tempo/fib(4)).range(22,20000));
	sig = CompanderD.ar(Normalizer.ar(sig,0.1),0.5,1,1/6);
	sig = Limiter.ar(sig,0.1);
	sig = FreeVerb2.ar(sig[0],sig[1],0.13,100);


	sig

}).play;
)



(
Ndef(\p).fadeTime = 5.0;

Ndef(\p,{|spread = 22|Splay.ar(VarSaw.ar(VarSaw.kr(33).exprange(11,4440).lag({ExpRand()}!8) + {ExpRand()*spread}!16,{ExpRand()*spread}!16),1,0.1)}).play;

Ndef(\aaa,{VarSaw.kr(11).exprange(44,9999).lag({ExpRand()!8})});

Ndef(\p).map(\spread,Ndef(\aaa));
)


s.scope;


(
~selector={Duty.kr(Dseq([3/4,1/4],inf),0,Dseq([0,1],inf))};
~selector.quant=2;


~long={Duty.kr(4,0,Dseq([1,1.25,1.5,1.125,2,0.5,0.75].pyramid,inf))};
~long.quant=2;

~sh={Duty.kr(1/8,0,Dseq(~long.kr*[1,2,4,8,16,32].pyramid,inf))};
~sh.quant=2;
)



(
~a.play;
~a.quant=2;
~a={
	var sig,env,env2,env3,pat,pat2,len,pit,kick,hat;

	pat = Select.kr(~selector,[[2,2],[4,2]]) * 2;


	len = [1,2,3,4].normalize*1.25;
	pit = Select.kr(~selector,[1,2]) * ~sh.kr;

	env = Decay.ar(Impulse.ar(pat),len);
	sig = OnePole.ar(LFPulse.ar(43.2+(env+1) * pit),1*(1-env)) * env;


	env2 =  Decay.ar(Impulse.ar(1,1/8*[0,2,4,6,7]),[1,1/2]*2);
	kick = SinOsc.ar(43.7*(env2.linexp(0,1,0.001,1)*3+1)) * env2;

	env3 =  Decay.ar(Impulse.ar(2,1/8*[0,2,4,6,7]),[1,1/2]*0.1);
	hat = HPF.ar(WhiteNoise.ar(0.4!2),TExpRand.ar(4000,8000,Impulse.ar(4!2))) * env3;

	sig =  kick + (sig/4) + hat;
	sig = CompanderD.ar(sig,0.75,1/2,1/10);

	sig = FreeVerb.ar(sig,0.15,1.5);


	Splay.ar(sig,0.2);
};
)

s.scope;
s.boot;


(
Ndef(\a,{
	var speed,sig,cmp;
	speed = 8;

	sig = LPF.ar(
		Ringz.ar(
			Impulse.ar(speed / [1,2]),
			TExpRand.ar(44.0,55.0,Impulse.ar(4)),
			TExpRand.ar(0.15001,1.5,Impulse.ar(4)))
		, 500 );
	cmp = CompanderD.ar(sig,0.15,1,0.26, clampTime: 0.004, relaxTime: 0.08);

	Splay.ar(
		cmp * 3
		,0.5,1,0.5)
}).play;
)


//reading bytebeat files tested unix only


s.boot;

(
var path;
path = "/tmp/last.dat";

f = File(path, "rb") ;
t = [] ; a = f.getInt8 ; while {a.notNil}{t = t.add(a); a = f.getInt8} ;
b = Buffer.loadCollection(s, t, 1, {f.close}) ;

Ndef(\a).fadeTime = 2.0;
Ndef(\a).quant = 2.0;

Ndef(\a,{Splay.ar(
	var pattern,long,s;
	pattern = [1,1,2,3,5,11,21];
	long = Select.kr(Stepper.kr(Impulse.kr(1/8/pattern)),[1,1,2,0.5,1,4,1,2,4,8]/2);
	s = Select.kr(Stepper.kr(Impulse.kr(1/pattern)),[1,1,2,0.5,1.5,4,1,2,4,8]/long);

	FreeVerb.ar(
		BPF.ar(
			PlayBuf.ar(1, b,loop:-1,rate:s).softclip * Decay.ar(Impulse.ar(8/[1,1,2,3,5,11,21]),0.25)
			,SinOsc.kr((_*0.01!4)+0.1).range(44,16000))
		,0.05133,0.1) + ((SinOsc.ar([66,77,88,99],mul:0.5) * Decay.ar(Impulse.ar(4/[1,1,2,3,5,11,21]),0.5)))
)}).play;
)

(
fork{
var paths = PathName("/home/kof/annex/kof/").files;
	paths.do({arg item;
		var filename = item.fullPath;
		("rendering"+filename).warn;
		s.prepareForRecord((filename++".aiff"));
		(filename).loadPath;
		SystemClock.sched(0, {s.record;});
		SystemClock.sched(60,{s.stopRecording;});
		SystemClock.sched(61,{s.freeAll;});
		62.wait;
	});
}
)



/*
(x[0].pathOnly++x[0].fileName).postln
s.prepareForRecord(("/home/kof/recordings/"++filename++".aiff"));
("/home/kof/annex/kof/"++filename).loadPath;
s.record;
*/



s.boot;


(
var tempo = 64.0;
var fade = 1.0;
var arr1 = [1/3,1/6,1/12,1/24,1/48];
var arr2 = [1,1/16,1/32,1/64];


Tdef(\tt,{
	var i = 0;
	loop{
		tempo = [1,2,4,0.5,0.25].wrapAt(i)*64;
		i = i + 1;


		Ndef(\a).fadeTime = fade;
		Ndef(\b).fadeTime = fade;
		Ndef(\c).fadeTime = fade;

		Ndef(\sin).fadeTime = fade;


		Ndef(\a,{Splay.ar((Pulse.ar(arr1*tempo) * VarSaw.ar(22000*{ExpRand()}!8)))}).play;
		Ndef(\b,{Splay.ar((Pulse.ar(arr1*tempo) * BPF.ar(WhiteNoise.ar({ExpRand()}!8),SinOsc.kr(1.0).exprange(44,22000))))}).play;
		Ndef(\c,{Splay.ar((Pulse.ar(arr2*tempo) * SinOsc.ar({WhiteNoise.ar(1.0).range(44,77)}!8)))}).play;

		Ndef(\d,{Splay.ar(Pulse.ar(arr1*tempo) * SinOsc.ar(Saw.ar(arr1*tempo).exprange(44,4444*{ExpRand()}!8)))}).play;


		Ndef(\sin,{Splay.ar(SinOsc.ar(({LFNoise0.ar(tempo).exprange(2000,2200)}!10)+1*{ExpRand()}!10),1,0.1)}).play;

		Ndef(\d,{ Splay.ar(BPF.ar(WhiteNoise.ar(SinOsc.kr(10*{TRand.kr(1.0,1.5)}!8).range(0.001,0.5)),SinOsc.kr(1).range(44,22000))) }).play;

		"bang!".postln;
		5.0.wait;
	}
}).play;
)

NdefMixer(s);

p = ProxySpace.push(s);

(
  Tdef(\aa,
       {
         var z1 = 0;
         var z2 = 0;
         var z3 = 0;
         loop{
           z1 = z1 + [-4,12,-12,7].choose; if(z1>60,{z1=0}); if(z1<(-60),{z1=0}); ~a.set(\a,z1);
           z2 = z2 + [-4,12,-12,7].choose; if(z2>60,{z2=0}); if(z2<(-60),{z2=0}); ~b.set(\a,z2);
           z3 = z3 + [-4,12,-12,7].choose; if(z3>60,{z3=0}); if(z3<(-60),{z3=0}); ~c.set(\a,z3);


           ([2,4].choose).wait;
         }
       }).play;


  ~a.quant = 2;
  ~b.quant = 2;
  ~c.quant = 2;


  ~a = {arg a=0; Splay.ar(SinOsc.ar( [60+a,65+a,67+a].midicps,mul:0.33)* Decay.ar(Impulse.ar(4/[1,2,4]),0.5))};
  ~b = {arg a=0; Splay.ar(SinOsc.ar( [60+a,65+a,67+a].midicps,mul:0.33)* Decay.ar(Impulse.ar(4/[4,2,1]),1.75))};
  ~c = {arg a=0; Splay.ar(SinOsc.ar( [60+a,65+a,67+a].midicps,mul:0.33)* Decay.ar(Impulse.ar(4/[1,2,3]),0.95))};

  ~mix = {
    Splay.ar(
      FreeVerb.ar(
        CombN.ar(
          CompanderD.ar(
            ~a+~b+~c
            ,0.5,1,1/10,0.02)
          ,1,1,4)
        ,0.13,10)
    )
  };
  ~mix.play;
)



s.boot;

(
Ndef(\a).fadeTime = 4.0;
Ndef(\a).quant = 2.0;
Ndef(\a,{
	var m,sig;
	m = Duty.kr([4,8,16,32,64],0,Dseq([1,1.5,2,1.25,0.5],inf));
	sig = LFSaw.ar(43.2*[1,1.5,4,6,4*1.5]*(m*pi)+LFTri.ar(4.32/(1..8)).range(-4.32/4,4.32/4),mul:0.5);

	//sig = sig + SinOsc.ar(43.2*(2**(1..8)),mul:0.5);

	sig = sig * LFSaw.ar(4/(2**(1..64))).exprange(0.0001,1);
	sig = BBandPass.ar(sig,LFTri.ar(1/4/(1..16)).exprange(22.01,19000).round(43.2/pi),0.75);
	sig = Resonz.ar(sig,LFTri.ar(1/5/(1..16)).range(22,6200).round(43.2/pi)) ;
	sig = LPF.ar(sig,800+SinOsc.ar(1/11/(1..8)).range(1,300));
	sig = CompanderD.ar(sig,0.5,1,1/10);
	sig = Mix.ar(sig);
	sig = PitchShift.ar(sig,m);
	sig = CombN.ar(sig,3,4.01,32);
	sig = sig.tanh;
	sig = FreeVerb2.ar(sig.distort,sig.distort,0.133,100);

	Splay.ar(Limiter.ar(sig,0.95,0.02),0.5,1,0.5);

}).play;
Ndef(\a).mold(2);
)


//what's mold? it doesn't work for me
// ERROR: Message 'mold' not understood
//alex

// ^^ different version?
// mold can change number of outputting channels per Ndef, even after its creation

//crap. i want that.

(
~bass.fadeTime=2;
~bass={
	var mod = Duty.kr(4,0,Dseq(0.5pi/[1,1.5,1.25,1.75,1.125,2],inf));
	var sig = LFSaw.ar((1..10)/(1000.0/(mod**4))+55*mod,mul:0.8);
	sig = Resonz.ar(sig,43.5+SinOsc.ar(8/fib(10)).range(-20,100),LFSaw.ar(8/fib(10)).range(0.01,20));
	sig = sig * Decay.ar(Impulse.ar(1/2,(1..16)/16),LFSaw.ar(1/4/fib(10)).range(0.15,0.75));
	sig = Mix(sig);
	sig = Limiter.ar(sig).softclip;
	sig = GVerb.ar(sig,[2,3,40,80])/2 + (sig/2);
	sig = CompanderD.ar(BPF.ar(sig,1000*(mod**2)/(1..10)),0.9,1/2,1/2);

	Splay.ar(sig.flat,0.5,0.5);

};
~bass.quant=2;
~bass.play;
)
(
Ndef(\bass,{

	var mod,mod2,melod,voices,sig;

	mod = Duty.kr(Dseq([1,2]*8,inf),0,Dseq([1,0,1,2,1,4,1,-2]*12,inf));
	mod2 = Duty.kr(Dseq([1,2]*16,inf),0,Dseq([1,1.5],inf));
	melod = Duty.kr(Dseq([1,2]/8,inf),0,Dseq([60,67]+mod,inf));
	voices = Duty.kr([1,2]*2,0,Dseq(2**(1..6),inf)).lag(0.3);

	sig = Blip.ar(melod*mod2,voices,mul:0.5+(voices/1024));

	Splay.ar(

		FreeVerb.ar(
			CompanderD.ar(
				HPF.ar(
					sig
					,melod/2)
				,0.5,1,0.25,0.003,0.02) +

			CompanderD.ar(
				LPF.ar(
					sig
					,melod*2)
				,0.25,1,0.25,0.012,0.02)
			,0.133
			,20).softclip

		,0.5,1,0.5)}).play;
)


////<3
// 01
// Nathaniel Virgo
{LocalOut.ar(a=CombN.ar(BPF.ar(LocalIn.ar(2)*7.5+Saw.ar([32,33],0.2),2**LFNoise0.kr(4/3,4)*300,0.1).distort,2,2,40));a}.play//#supercollider

// 02
// LFSaw
{Splay.ar(Ringz.ar(Impulse.ar([2, 1, 4], [0.1, 0.11, 0.12]), [0.1, 0.1, 0.5])) * EnvGen.kr(Env([1, 1, 0], [120, 10]), doneAction: 2)}.play

// 03
// Tim Walters
play{({|k|({|i|y=SinOsc;y.ar(i*k*k,y.ar(i*k**i/[4,5])*Decay.kr(Dust.kr(1/4**i),y.ar(0.1)+1*k+i,k*999))}!8).product}!16).sum}//#supercollider

// 04
// Nathaniel Virgo
b=Buffer.read(s,"sounds/a11wlk01.wav");play{t=Impulse.kr(5);PlayBuf.ar(1,b,1,t,Demand.kr(t,0,Dseq(1e3*[103,41,162,15,141,52,124,190],4)))!2}

// 05
// Batuhan Bozkurt
play{f=LocalIn.ar(2).tanh;k=Latch.kr(f[0].abs,Impulse.kr(1/4));LocalOut.ar(f+CombC.ar(Blip.ar([4,6],100*k+50,0.9),1,k*0.3,50*f));f}//44.1kHz

// 06
// Batuhan Bozkurt (refactored by Charles Celeste Hutchins)
f={|t|Pbind(\note,Pseq([-1,1,6,8,9,1,-1,8,6,1,9,8]+5,319),\dur,t)};Ptpar([0,f.(1/6),12,f.(0.1672)],1).play//#supercollider reich RT @earslap

// 07
// Thor Magnusson
play{x=SinOsc;y=LFNoise0;a=y.ar(8);(x.ar(Pulse.ar(1)*24)+x.ar(90+(a*90))+MoogFF.ar(Saw.ar(y.ar(4,333,666)),a*XLine.ar(1,39,99,99,0,2)))!2/3}

// 08
// Charlie Hoistman
Ptpar(({|i|[i*8,Pbind(\scale,[0,2,4,7,9],\degree,Pseq(32.fib.fold(0,10),4)+(2*i+i)-10,\dur,1+2**i%2/6)]}!4).flat).play // #supercollider

// 09
// MCLD
{LocalOut.ar(a=DynKlank.ar(`[LocalIn.ar.clip2(LFPulse.kr([1,2,1/8]).sum/2)**100*100],Impulse.ar(10)));HPF.ar(a).clip2}.play//

// 10
// Julian Rohrhuber
/*eclecticity*/ Ndef(\x, { SinOsc.ar(BrownNoise.ar(30!2, 200), Ndef(\x).ar * LFNoise1.kr(1!2,1,1)) }).play;

// 11
// Micromoog
play{VarSaw.ar((Hasher.ar(Latch.ar(SinOsc.ar((1..4)!2),Impulse.ar([5/2,5])))*300+300).round(60),0,LFNoise2.ar(2,1/3,1/2))/5}//#supercollider

// 12
// Jose Padovani
play{x=165;b=SinOsc;p=Trig.ar(Saw.ar(x),1);y=b.ar(p*x);z=b.ar(p);(GVerb.ar(GrainIn.ar(2,y,y/2,z,p*z,-1),9))/9}//basso gettato #SuperCollider

// 13
// Batuhan Bozkurt
play{LeakDC.ar(BRF.ar(Saw.ar(8,Decay2.kr(x=Duty.kr(1/8,0,Drand([0,Drand((0.4,0.5..1))],inf)),0.01,0.3))**1.5,x*20+[45.1,45],0.1)).tanh}//#sc

// 14
// Nathaniel Virgo
Ndef('x',{x=Ndef('x').ar+0.01;a=BPF.ar(x,6**Latch.ar(x,Dust.ar(x))*200,0.1).sin;9.do{a=AllpassN.ar(a,0.2,{0.2.rand}!2,9)};a+a.mean}).play;

// 15
// Jason Dixon
{x=Array.fill(5,{[0.00001,0.03].asSpec.map(LFNoise2.kr(3))});Splay.ar(Friction.ar(LFTri.ar(50),friction:x,mass:x*30000))}.play

// 16
// Batuhan Bozkurt
play{AllpassC.ar(SinOsc.ar(55).tanh,0.4,TExpRand.ar(2e-4, 0.4,Impulse.ar(8)).round([2e-3,4e-3]),2)};// #supercollider with bass please...

// 17
// redFrik
{RHPF.ar(GbmanN.ar([2300,1150]),LFSaw.ar(Pulse.ar(4,[1,2]/8,1,LFPulse.ar(1/8)/5+1))+2)}.play //punk (loud!)

// 18
// Nathaniel Virgo
play{p=PinkNoise.ar(1!2);BRF.ar(p+Blip.ar(p+2,400),150,2,0.1)+LPF.ar(FreeVerb2.ar(*LPF.ar(p+0.2*Dust.ar(0.1),60)++[1,1,0.2,1e4]).tanh,2000)}

// 19
// MCLD
{a=[0.02,0.1,1,2,3,4]; k=LFPar.kr(a+0.5).sum; f=Latch.kr(k,Impulse.kr(a)); Splay.ar(SinOsc.ar(f*100+300)/5)}.play // #supercollider

// 20
// Sciss
play{2.collect{RecordBuf.ar(Limiter.ar(HPF.ar(Convolution2.ar(k=Crackle.ar(l=Line.kr(1,2,90)),b=LocalBuf(2048),Dust.kr(4)),8)+k)*(2-l),b)}}

// 21
// Andrea Valle
{13.do{|i|k="SuperCollider"[i].ascii;20.do{|u|{MoogFF.ar(Saw.ar((k/4).midicps)*EnvGen.ar(Env.perc),u+k*9,k/30)}.play;(k*0.001).wait}}}.fork

// 22
// MCLD
play{a=Duty.kr(0.1,0,Dseq(fib(32).wrap(20,55).midicps,inf));HPF.ar(LeakDC.ar(Splay.ar(LFCub.ar([-1,a,a/3,-2])))*9).clip2/9};//#supercollider



// This SuperCollider source code (c) the authors, published under Creative Commons BY-NC-SA 3.0.
(
~a.play;
~s = {Duty.kr(1/4,0,Dseq([0,1,2,3,0,0,0,0],inf))};

~oct = {Duty.kr(8,0,Dseq([0,12,24,36],inf))};

~m = {Duty.kr(1,0,Dseq([60,65,64,65,67,63,72]-~oct,inf))};

~m.quant=2;

~s.quant=2;
~a.quant=2;
~a.fadeTime = 0.01;
)

(
~a={
	var sigs,sel,env,f,l;

	l = [0.25,0.5,0.5,0.25];

	f = ~m.midicps;

	env = Decay.ar(Impulse.ar(8),Select.kr(~s,l));

	sigs = [
		SinOsc.ar(43.2*(env.exprange(10.0001,1.01))),
		Blip.ar(f*1.5,TExpRand.ar(10,100,Impulse.ar(1!4))),
		Pluck.ar(Saw.ar(f*(1-env)),Impulse.ar(4),0.5,0.5),
		HPF.ar(WhiteNoise.ar(0.7!2),TExpRand.ar(1000,16000,Impulse.ar(1!4)))
	];

	sel = Select.ar(~s,sigs) + LFSaw.ar(f*(1..8),mul:0.5);
	sel = BBandPass.ar(sel,LFSaw.ar(4/[1,2,4,8]).exprange(16000.01/(1..8),44)) + (sel*env);
	sel = CompanderD.ar(sel,0.75,1,1/10);
	sel = FreeVerb.ar(sel,0.2,0.5);

	Splay.ar(sel);

};
)

s.boot;
p=ProxySpace.push(s.boot);

(
    ~schizzo={

        var t = Impulse.kr(2,(0..3)/4);
        var env = Linen.kr(t,0.002,1,0.535);
        var sig = LFSaw.ar(50*(env.pow(4)*0.01+1))*env;
        
        sig=[
            RLPF.ar(sig,400*(env.pow(3)*8+1)),
            RHPF.ar(sig,400*(env.pow(3)*8+1)),
            BPF.ar(sig,400*(env.pow(3)*8+1)),
            Resonz.ar(sig,400*env.pow(3)*8+1),
            CombN.ar(sig+LFSaw.ar(5000,mul:0.2),0.04,0.04,8),
            CombC.ar(sig,0.02,0.04,32),
            CombL.ar(sig+WhiteNoise.ar(0.2),0.4,0.04,32),
        ];

        sig = Select.ar(TRand.kr(0,sig.size()+0.01,Impulse.kr(8)),sig);
        
        sig = CombN.ar(sig,1,1,4);

        Splay.ar(sig,0.1);
    };
    ~schizzo.play;
)

s.boot;

(
Ndef(\saw).fadeTime = 2.0;
Ndef(\saw,{|mod|
	Splay.ar(
		CompanderD.ar(
			FreeVerb.ar(
				BBandPass.ar(
					CombN.ar(
						SinOsc.ar((1.50001**(1..32))*(1..32)*43.2*(0.5pi*mod).lag(0.1/(1..32)),0,1/(1..32) *
							Decay.ar(Impulse.ar(8/[1,2,4,8]),0.05*(1..32)))
						,0.2*(1..32),4/(1..32),32/(1..32)) * 12.8
					,SinOsc.ar(1/4/fib(8,9,21)).range(44,2200/(1..32)),
					SinOsc.ar(4/fib(2,3,12)).range(1,1/16/(1..32))).softclip
				,0.75,(1..32)) * 16 * LFSaw.ar(1/4/(1..32)).squared
			,0.9,1,0.1)
		,0.5,1,0.5);
}).play;

Ndef(\saw)[1] = \set -> Pmono(\aa,
	\dur, Pseq(4/fib(12),inf),
	\mod, Pseq([1,1.5,2,1.25,0.5,0.25,2,1/2+1,1/4+1,1/8+1],inf)
);


)

s.boot;

(
Ndef(\saw).fadeTime = 2.0;
Ndef(\saw,{
	Splay.ar(
		BBandPass.ar(
			CombN.ar(
				SinOsc.ar((1..32)*8pi,0,1/(1..32)) * LFSaw.ar(8/(1.50001**(1..32))).squared
				,0.02*(1..32),4/(1..32),32/(1..32)) * 64
			,SinOsc.ar(4/(1..32)).range(22*(1..32),22000/(1..32)),1/8/(1..32)).softclip
		,0.5,1,0.5)
}).play;
)
(

/////////// UNCOMMENT HERE //////////////////////////

c = Collective(\kof,\livecoding,[\alex,"25.164.56.183",\joach,"25.0.209.252"]).start;
//c = Collective(\alex,\livecoding,[\kof,"25.164.28.14",\joach,"25.0.209.252"]).start;
//c = Collective(\joach,\livecoding,[\alex,"25.164.56.183",\kof,"25.164.28.14"]).start;



// d.close;
x = Participation(c).start;
d = Document.new("livecoding.scd","//welcome to shared session\n\n");

x.addResponder('/shared', { |r,t,msg|
	msg.postln;
	// if(msg[0]!=="kof"){
	d.insertText(msg[3]+"",msg[1].asInt);
// };

});



(
d.textChangedAction = {|one,two,three,four,five|
	// [two,three,four].postln;


	/////////// UNCOMMENT HERE //////////////////////////

	c.sendToEach(\shared,two,three,four);
	// c.sendToName(\kof,"isc",\shared,two,three,four);
	// c.sendToName(\alex,"isc",two,three,four);
	// c.sendToName(\joach,"isc",two,three,four);

};
);

d.onClose = { x.stop };

)



c.sendToName(\kof,"aisc",[\shared,1,"a",'a']);


(
~q={
	var f,sig;
	f=(LFSaw.ar(500.01) @ LFSaw.ar(1/100/(1..12),mul:1)).rho - 0.5;
	sig = LFPulse.ar(f.linlin(-1,1,33.5,2200.5/(1..32))) * LFTri.ar(1/4*(fib(12))).range(1,0);
	sig = BBandPass.ar(sig,LFNoise0.ar(1/fib(12)).exprange(44.01,4000).lag(1*fib(12)),0.2,5);
	sig = Resonz.ar(sig,LFNoise0.ar(4/fib(12)).exprange(44.01,4000).lag(1/4*fib(12)),0.2,4);
	sig = FreeVerb.ar(sig,0.33,0.5);

	Splay.ar(sig,0.1,0.8);
};
~q.play;
)

s.scope;

~s = {SinOsc.ar(1/16).range(0.01,9.01)};
~s.quant =2;
(
~a.fadeTime = 2;
~a={
	var sig,f,s;

	sig=SinOsc.ar(((60+[0,5,7,11,-12,-24,-48,-36,4,-7,-14]).scramble.midicps)*(1.00001**(1..9)));
	sig = sig * LFTri.ar(1/fib(12)).range(1,0);
	sig = LPF.ar(sig,LFSaw.ar(4/fib(8)).exprange(1000.01,44.01));
	sig = sig + HPF.ar(BrownNoise.ar({Rand(0.001,0.5)}!8),{Rand(440,12000)}!8);

	sig = SelectX.ar(~s,sig);

	sig = CompanderD.ar(sig,0.9,1,0.01);
	sig= Limiter.ar(sig,0.5,0.01);

	Splay.ar(sig,0.1);
};

~a[50]=\filter->{|in| FreeVerb.ar(in,0.2,100)};

~a.play;
~a.quant=2;

)

s.scope;
s.boot;
/////////////////////////////////////////////
/////// BEAT  -> kick + hiss   //////////////
/////////////////////////////////////////////
(
	SynthDef(\kick,{|dur,amp,freq|
		var env,fenv,sig;
		env = EnvGen.ar(Env([0,amp,0],[0.015,dur],[1,3]),doneAction:2);
		fenv = EnvGen.ar(Env([freq,55,44],[0.01,dur],[-3,3]));
		sig = SinOsc.ar(fenv*(1.001**(1..24)),mul:1) + LFSaw.ar(fenv*1.5,mul:0.2*env) * env;

		Out.ar(0,Splay.ar(sig,0.2,0.5));
	}).add;

	SynthDef(\hiss,{|dur,amp,freq|
		var env,fenv,sig;
		env = EnvGen.ar(Env([0,amp,0],[0.02,{ExpRand(0.01,0.1)}!8],[-3,3]),doneAction:2);
		sig = HPF.ar(WhiteNoise.ar(1*(1.001**(1..8))),{ExpRand(freq/2,freq)}!2) * env;

		Out.ar(0,Splay.ar(sig,0.2,0.4));
	}).add;

	Pdef(\beat,{
		Ppar([
			Pbind(
				\instrument, \kick,
				\dur, Pseq([Pn(1/8,8),Pn(1/2,4),Rest(1/2)],inf),
				\amp, Pwhite(0.75,1,inf),
				\freq, Pkey(\dur).linexp(1/8,1,12000,1200)   //what are this?
			),
			Pbind(
				\instrument, \hiss,
				\dur, Pxrand([Pn(1/8,2),Pn(1/4,2),Pn(1/16,8),Rest(1/2)],inf),
				\amp, Pwhite(0.5,0.6,inf),
				\freq, Pkey(\dur).linexp(0.0001,1,444.01,12000)
			),
		])
	}).play(quant:2);

);
/////////////////////////////////////////////
/////// MELODIES  ///////////////////////////
/////////////////////////////////////////////

(
Ndef(\melod).fadeTime = 2.0;
Ndef(\melod).quant = 2.0;
Ndef(\melod,{|note = 60, mod=1|
	Splay.ar(
		LFCub.ar(note.midicps*4pi*mod+SinOsc.ar(2/(1..8)).range(-2,2),mul:0.6/(1..8)) *
		LFSaw.ar(1/4).squared
	)
}).play;

Ndef(\melod)[1] = \set -> Ppar([
	Pbind(\dur,4,\mod,Pseq([1,1.5,1.25,0.5,0.75],inf)),
	Pbind(\dur,1/4,\note,Pseq([60,60-12]-24,inf))
]);
);

(

Ndef(\melod1).fadeTime = 2.0;
Ndef(\melod1).quant = 2.0;
Ndef(\melod1,{|note = 60, mod=1|
	Splay.ar(
		LFSaw.ar(note.midicps*0.5pi*mod+SinOsc.ar(1/(1..8)).range(-2,2),mul:0.7/(1..8)) *
		LFSaw.ar(1/8).squared
	)
}).play;

Ndef(\melod1)[1] = \set -> Ppar([
	Pbind(\dur,8,\mod,Pxrand([1,1.5,1.25,0.5,0.75],inf)),
	Pbind(\dur,8,\note,Pseq([36,60],inf))
]);
);


//////a_<3 <3 <3


~a.play;
(
~a.quant = 2.0;
~a.fadeTime = 5;
~a = {
    var sig;
    sig=Decay.ar(Impulse.ar(2/fib(14)),(1..8)/4) * SinOsc.ar(43.2 * [1,1.25,1.25,4*1.25,0.5,0.25].scramble * 1pi,mul:0.00015);
    sig = CompanderD.ar(sig,0.5,1,1/10);
    sig = CombN.ar(sig,1,1,32);
    sig = FreeVerb.ar(sig);
    Splay.ar(sig);
};
)
// Slightly melancholic, Coded by Kof @
// Mon Sep 22 00:54:19 CEST 2014
//
//
//
// ,dPYb,                  ,dPYb,
// IP'`Yb                  IP'`Yb
// I8  8I                  I8  8I
// I8  8bgg,               I8  8'
// I8 dP" "8    ,ggggg,    I8 dP
// I8d8bggP"   dP"  "Y8ggg I8dP
// I8P' "Yb,  i8'    ,8I   I8P
// ,d8    `Yb,,d8,   ,d8'  ,d8b,_
// 88P      Y8P"Y8888P"    PI8"8888
//                         I8 `8,
//                         I8  `8,
//                         I8   8I
//                         I8   8I
//                         I8, ,8'
//                          "Y8P'


///////////// boot server //////////////////////////////////////////////////////////////////////////////

s.boot;


///////////// High freq melody //////////////////////////////////////////////////////////////////////////////

(
Ndef(\High).fadeTime = 2.0;
Ndef(\High).quant = 2.0;

t = Tuning.harmonic;

Ndef(\High,{
	var modlong,mod,melody,notes;
	modlong = Select.kr(Stepper.kr(Impulse.kr([1/2,1/4,1/8]/16)),2*[1,2,4,2,1,2,4,8]);

	mod = Select.kr(Stepper.kr(Impulse.kr([1/2,1/4,1/8]/4)),modlong*31.4159265359/[1,2,4,2,1,2,4,8]);

	melody = Select.kr(Stepper.kr(Impulse.kr([1/2,1/4])),[1,0.5,4,0.25,1.5,4,2,1.5]);
	notes = t.cents.at([1,2,11]) / mod * melody;

	Splay.ar(
		FreeVerb.ar(
			RLPF.ar(
				XFade2.ar(
					SinOsc.ar(notes,mul:0.1).cubed,
					LFSaw.ar(notes,mul:0.1).distort,
					SinOsc.kr([0.1437,0.1897]).range(-0.9,0.9)) *

				Decay.ar(Impulse.ar((mod)/[1,2,3,5,8,13,21]),[1,2,3,5,8,13,21]/(mod/32))
				,SinOsc.kr(notes/1024.012).range(notes/2,notes*2)
			) * SinOsc.kr((_*0.137!8)+0.0112).range(0.1,1);

			,0.25,5,0.8)
)}).play;
)


//////////////// Low freq melody ///////////////////////////////////////////////////////////////////////////

(
Ndef(\Low).fadeTime = 2.0;
Ndef(\Low).quant = 2.0;

t = Tuning.harmonic;

Ndef(\Low,{

	var mod,melody,notes;
	mod = Select.kr(Stepper.kr(Impulse.kr([1/2,1/4,1/8]/4)),2*31.415926536/[1,2,4,2,1,2,4,8]);

	melody = Select.kr(Stepper.kr(Impulse.kr([1/2,1/4])),[1,0.5,4,0.25,1.5,4,2,1.5]);
	notes = t.cents.at([1,2,7]) / mod * melody;

	Splay.ar(
		FreeVerb.ar(
			RLPF.ar(
				XFade2.ar(
					SinOsc.ar(notes,mul:0.1).cubed,
					LFTri.ar(notes,mul:0.1).distort,
					SinOsc.kr([0.01,0.013]).cubed.range(-0.9,0.9)) *

				Decay.ar(Impulse.ar((mod*4)/[1,2,3,5,8,13,21]),[1,2,3,5,8,13,21]/(mod/13))
				,SinOsc.kr(notes/512.01).range(notes/2,notes*2)
			) * SinOsc.kr((_*0.1337!8)+0.01).range(0.1,1);

			,0.1,5.5,0.8)
)}).play;
)



//////////////// Long freq melody ///////////////////////////////////////////////////////////////////////////

(
Ndef(\Long).fadeTime = 2.0;
Ndef(\Long).quant = 2.0;

t = Tuning.harmonic;

Ndef(\Long,{

	var modlong,mod,melody,notes;
	modlong = Select.kr(Stepper.kr(Impulse.kr([1/2,1/4,1/8]/16)),2*[1,2,4,2,1,2,4,8]);
	mod = Select.kr(Stepper.kr(Impulse.kr([1/2,1/4,1/8,1/16]/8)),modlong*31.415926536/[1,2,4,2,1,2,4,8]);

	melody = Select.kr(Stepper.kr(Impulse.kr([1/2,1/4,1/8,1/16]/8)),[1,0.5,4,0.25,1.5,4,2,1.5]);
	notes = t.cents.at([1,2,7,11]) / mod / melody;

	Splay.ar(
		FreeVerb.ar(
			RLPF.ar(
				XFade2.ar(
					LFSaw.ar(notes/1.5+SinOsc.kr(0.1).range(-2,2),mul:0.4).cubed,
					LFSaw.ar(notes*1.5+SinOsc.kr(55).range(-2,2),mul:0.4).distort,
					SinOsc.kr([0.1,0.13]).cubed.range(-0.9,0.9))
				,SinOsc.kr(notes/2048.01).range(notes/2,notes*2)
			) * SinOsc.kr((_*0.1337!16)+0.01).exprange(0.01,1);

			,0.8,SinOsc.kr(1/[1,2,4,8]).range(0.2,5.5),0.8)
)}).play;
)

Ndef(\Low).scope(2,zoom:4)

//////////////// Some hisses ///////////////////////////////////////////////////////////////////////////

(
Ndef(\Hiss).fadeTime = 2.0;
Ndef(\Hiss).quant = 2.0;

Ndef(\Hiss,{Splay.ar(
	RLPF.ar(
		XFade2.ar(
			WhiteNoise.ar(0.05!4),
			BrownNoise.ar(0.05!4),

			SinOsc.kr([0.103,0.101])),
		SinOsc.kr((_*0.0124!4)+0.01).range(220,8000)
	) *

	Decay.ar(Impulse.ar(8/[1,2,3,5,8,13,21,34,55]),[1,2,3,5,8,13,21,34,55]/13)

)}).play;
)


////////////////// And beat /////////////////////////////////////////////////////////////////////////

(
Ndef(\Beat).fadeTime = 2.0;
Ndef(\Beat).quant = 2.0;

Ndef(\Beat,{Splay.ar(
	RLPF.ar(
		XFade2.ar(
			SinOsc.ar([55,56],mul:0.4).distort,
			LFPar.ar([55.5,55.5]*2,mul:0.4),

			SinOsc.kr(1/[8,13])
	) ,SinOsc.kr((_*0.0324!4)).range(52,58))

	*

	Decay.ar(Impulse.ar(8/[1,2,3,5,8]),[1,2,3,5,8]/32)

)}).play;
)


Ndef(\Beat).stop(5);

///////////////////////////////////////////////////////////////////////////////////////////


NdefMixer(s);


///////////////////////////////////////////////////////////////////////////////////////////
s.reboot();
s.freeAll();

(

Ndef(\tones).quant = 2.0;
Ndef(\tones).fadeTime = 8.0;
Ndef(\tones,{|m1,m2,m3,m4|
	Splay.ar(
		SinOsc.ar(432/([m1,m2,m3,m4]*4pi)*(2**(1..4)) * ([m1,m2,m3,m4]) * (1.00001**(1..12)),mul:0.2).distort +
		LFSaw.ar(432/([m1,m2,m3,m4]*2pi)*(1.5**(1..4)) * ([m1,m2,m3,m4]) * (1.000001**(1..12)),mul:0.1).distort *
		LFSaw.ar(1/4/[1,2,4,8]).squared
		,0.2,1)});

Ndef(\tones)[1] = \set -> Ppar([
	Pbind(
		\dur,4,
		\m1, Pseq([1,1.5,1.25,2,0.75,0.5,2],inf)
	),
	Pbind(
		\dur,8,
		\m2, Pseq([1,1.5,1.25,2,0.75,0.5,2],inf)
	),
	Pbind(
		\dur,16,
		\m3, Pseq([1,1.5,1.25,2,0.75,0.5,2],inf)
	),
	Pbind(
		\dur,32,
		\m4, Pseq([1,1.5,1.25,2,0.75,0.5,2],inf)
	)
]);

Ndef(\s).quant = 2;
Ndef(\s).fadeTime = 2;
Ndef(\s,{

	~d = Decay.ar(Impulse.ar(4/fib(8)),{ExpRand(0.2,0.4)}!8);

	Splay.ar(
		LFSaw.ar(43.2*(1.00001**(1..8))+(~d.cubed*8000),mul:0.2) * ~d +
		Ndef(\tones).ar;

		,0.2,1)}).play;

Ndef(\s)[1] = \filter -> {|in|
	FreeVerb.ar(
		CompanderD.ar(
			in
			,0.5,1,0.5)
		,0.13,100)
};
)


///this produces no sound on my comp. is this a song for dogs?
// sonds ok on mine >> any errors? ..it should play

//Ndef('s')
/**** ERROR: SynthDef system_link_audio_2 not found
FAILURE IN SERVER /s_new SynthDef not found*/

// j_on mine comp it doesnt play too


(
~kick.quant=1;
~kick={

	var env,t,sig;

	t = Impulse.ar(1/8,[0,1,2,3]/4);

	env = EnvGen.ar(Env([0,1,0],[1.5,1.75],[3,-4]),t);
	sig = Pulse.ar([1,2,3,1.5].octcps*(1/[1,2,4,8]+1)*pi/4+((env**5.51*PinkNoise.ar(80))+1)*(1.000015**(1..11)),mul:0.15)*env;

	t = Impulse.ar(1/[4,2],[0,0.5,1,1.5,2,2.5,3]/4);
	env = EnvGen.ar(Env([0,1,0],[0.005,0.75],[3,-4]),t);
	sig = SinOsc.ar([44,55] * (env**4+1)) * env * ToggleFF.ar(Impulse.ar(1/[2,4])) + sig;

	t = Impulse.ar(1/4,[0,1,2,3,3.5]+0.5/4);
	env = EnvGen.ar(Env([0,1,0],[0.005,0.15],[3,-4]),t);
	sig = RHPF.ar(WhiteNoise.ar(0.06!2), (env**4000+1000) ) * env + sig;


	t = Impulse.ar(1/48,[0,1,2,3]+0.5/4);
	env = EnvGen.ar(Env([0,1,0],[3.5,0.5],[3,-4]),t);
	sig = RHPF.ar(LFSaw.ar(6.octcps*pi/[1,1.25,1.5,1.125]+SinOsc.ar(11).range(-4,4),mul:0.1), (env.pow(4)+1)*2000 ) * env + sig;


	sig = LPF.ar(sig,44*(8*(1..12))*(LFSaw.ar(1/4/fib(12)).pow(3)+1))+(sig);
	sig = CompanderD.ar(sig,0.5,1/1.45,1/2);
	sig = FreeVerb.ar(sig,0.3,3);

	Splay.ar(sig,0.1);
};
~kick.play;
);

p=ProxySpace.push(s.boot);

(
(
~m.quant=2;
~m={LFTri.ar(1/64).range(0,7)};


~freqMod.quant=2;
~freqMod={LFNoise0.kr(1/8!3,1.5,6).round(2).lag(1/8)};
);

(
~a.quant=2;
~a.fadeTime=2;
~a.play;
~a={
	var sig,notes,base;

	notes=(37+7+(_*7!11)-[0,12,24]).midicps.scramble;

	base = notes/~freqMod*(1.00001**(1..11));

	sig = Blip.ar(base,LFSaw.ar(1).range(80,1),mul:0.3);
	sig = (SinOsc.ar(base/~freqMod*4,mul:0.5)*LFSaw.ar(1).exprange(0.0001,1)) +sig;

	sig=  SelectX.ar(~m,sig);

	Splay.ar(sig);


};
);

(
~a[10]=\filter->{|in|Vibrato.ar(in,[4,5,6],0.2)};
~a[12]=nil;//\filter->{|in|BBandPass.ar(in,LFTri.ar(1).range(432.01,44),0.25,16)};
~a[14]=\filter->{|in|CompanderD.ar(in,0.5,1,1/25,0.02,0.2,1.5)};
~a[16]=\filter->{|in|Limiter.ar(in,1)};
~a[16]=\filter->{|in|AllpassN.ar(in,0.25,0.25,1)};
~a[18]=\filter->{|in|FreeVerb2.ar(in.distort,in.distort,0.13,100)};


);
)



(
~z.play;
~sq.quant=2;
~mel.quant=2;
~mel={Duty.kr(4,0,Dseq([12,24,12-7,24-7,-12],inf))};
~sq={Duty.kr(Dseq([1/4,1/8].normalize,inf)/[2,1,1/2]/2,0,Dseq(([60,24,72,36,63,24,67,72,60,24,72,36,63,24,65,60-7]+~mel.kr).midicps,inf))};
)

(
~z.quant=2;
~z.fadeTime=2;
~z={
	var sig,freq,amp,gens;

	sig = SinOsc.ar(~sq.kr/[1/1.5,2,1],mul:0.4/[5,2,1]);
	sig = sig * SinOsc.ar(1/4/[1,2,4]).range(0,1);
	sig = BBandPass.ar(sig,SinOsc.ar(1/4/[1,2,3,4]).range(4440,22)) + (sig/2);
	sig = Limiter.ar(sig,0.9);
	sig = CompanderD.ar(sig,0.75,1,1/10) * 2;
	sig = Vibrato.ar(sig,[4,5,6,7],0.2);
	sig = CombN.ar(sig,1/2,1/2,2);
	sig = FreeVerb.ar(sig,0.09,1);
	Splay.ar(sig,0);
};
)

s.reboot;

(


Ndef(\abs).fadeTime = 4.0;
Ndef(\abs).quant = 2.0;
Ndef(\abs,{
	var freq,mod,mmod,tempo;
	freq = Select.kr(Stepper.kr(Impulse.kr(1/16),max:7),43.2*2*[1,0.75,1.5,1,1,1,1]);
	mod = Select.kr(Stepper.kr(Impulse.kr(1/8),max:3),[1,1.25,1.5,0.5]);
	mmod = Select.kr(Stepper.kr(Impulse.kr(1/4)),[0.5,1,1.5,1,1,1,1,1,1]);
	tempo = 1/8/fib(8);

	Splay.ar(
		GVerb.ar(
			CombN.ar(
				RLPF.ar(
					Vibrato.ar(
						SinOsc.ar([freq,freq*mmod]*(mod.lag(0.5)*0.5pi)*(1.001**(1..10)*(1..10)),SinOsc.ar(4/(1..10)).range(-2pi,2pi),mul:1/(1..10)),
						[4,5,6,7,8],0.2)
					,LFSaw.ar(tempo).squared.range(22,3660))

				,(0.09/(1..10)),1,4)
			,roomsize:50)
		,0.5,0.2,0.5)}).play;

)



(
~na.quant=4;
~na.fadeTime=0.02;
~na={
	var imp,sig,separate,note;
	var mod = Duty.kr([2,4],0,Dseq([0,12,3,5,7,-12],inf)) + (TRand.kr(0.001,36.0,Impulse.kr(1/8/(1..12))).round(12)+TRand.kr([-48,-12],13,Impulse.kr(1/4!2)).round([7,12])) + SinOsc.kr(4,SinOsc.kr(1/(1..12),mul:8pi),mul:0.02);

	var env2 = Decay.ar(Impulse.ar(2),1.5);
	var sig2 = GrayNoise.ar(0.05!4) + SinOsc.ar(44*[1,2,4,8]*pi);

	note = ([36,24]+[0,12,0,24,0,36,0,12,0,-12,0,1]+mod).midicps;

	sig = [
		LFPar.ar(note),
		LFSaw.ar(note,mul:0.2),
		SinOsc.ar(note),
		LFPulse.ar(note,mul:0.2),
		VarSaw.ar(note)
	];

	sig = SelectX.ar(SinOsc.ar(1/4/(1..16)).range(0,sig.size+0.01),sig);

	imp = Decay2.ar(Impulse.ar(1/[4,2],(1..16)/16),LFSaw.ar(1/4/(1..16)).range(0.1,0.75),[0.15,1,0.1,0.01,2]);

	sig = sig * imp;

	sig = Mix(sig)/4;

	separate = Notch.ar(sig,LFSaw.ar(1/(1..12)).range(400,12000)/12*(1..12),SinOsc.ar(4/(1..12)).exprange(0.001,2));

	separate = CompanderD.ar(separate,0.75,1/2,1/4);

	sig = MoogFF.ar(separate,SinOsc.ar(1/[6,7]/(1..12)).range(22,14000)) + (separate/2);


	sig = Mix(sig)/4;

	sig = Vibrato.ar(sig,[4,5,6,7],0.2);


	sig2 = Vibrato.ar(sig2,[4,5,6,7],0.2);
	sig2 = CombN.ar(sig2,0.01*(1..8),0.01*(1..8),8);
	sig2 = Normalizer.ar(sig2,0.5);
	sig2 = BBandPass.ar(sig2,LFTri.ar(1/8/[1,2,4,8]).exprange(16000.0001,33),0.5);
	sig2 = HPF.ar(sig2,150);
	// sig2 = GVerb.ar(sig2)/1.75+sig2/1.25;
	sig2 = CompanderD.ar(sig2,0.75,1/2,1/4);

	env2 = Mix.fill(2,env2);
	sig2 = sig2 + (SinOsc.ar(50*(env2**10*0.001+1),mul:0.95) * env2);
	sig2 = sig2 + (SinOsc.ar(150*(env2**10*0.001+1),mul:0.5) * env2);


	sig2 = CompanderD.ar(sig2,0.75,1/1.5,1/1.5) / 2;
	// sig = PitchShift.ar(sig,0.1,env2.range(0.91,1));

	sig = GVerb.ar(sig/2+(sig2/3),[10,200]) + (sig/3+(sig2));

	sig = Pan2.ar(sig.flat,SinOsc.ar([4,7.9]))/8;


	Splay.ar(sig.flat,0.5);
};
~na.play;
)


s.boot;
(
  Ndef(\a).quant = 1;
  Ndef(\a,{
	var a,b,f,lfo,mm;
    a = Duty.ar(4,0,Dseq([0,4,7,0],inf));
    b = Duty.ar(8,0,Dseq([0,12,24,36]-60,inf)).lag(1/32);

    mm = Duty.ar(1,0,Dseq([0.5,8,1,1,1,1,1,1],inf));

    f = (80+a+b).midicps;
    lfo = SinOsc.ar(1/4/(1..8)).range(0.01,1);
    Splay.ar(

      FreeVerb.ar(
        Resonz.ar(
          CompanderD.ar(
            VarSaw.ar(f*(1.0001**(1..8)),0,lfo,mul:0.5) +
            (VarSaw.ar(f*3,0,1-lfo,mul:0.4) * LFSaw.ar(1/4).squared)
            * Decay.ar(Impulse.ar(4/[1,2,4]),[1,0.5,0.25]) +
            LFPar.ar(432*(1.001**(1..8))*mm,SinOsc.ar(1*(1.001**(1..16))).range(-8pi,8pi),mul:0.5/(1..16))
            ,0.75,1,1/5,0.002,0.02) + LFPulse.ar(f.lag(0.2)/51,mul:0.03).lag(0.1)
          ,SinOsc.ar(1/4/(12..22)).exprange(22.01,17200*SinOsc.ar(1/4.32).range(0.1,1)),0.5) * 2
        ,0.45,10,0.0025)
      ,0.5,1,0.5)}).play;

)
(
Ndef(\a,{
	var slope,speed,cnt,am,sh,s,f;
	slope = 1.0025;
	speed = 1/4;
	cnt = 12;
	am = 22000;

	sh = (1..(cnt)).normalize*am;
	f = SinOsc.ar(speed*(slope**(1..(cnt)))).range(sh,am/cnt+sh);


	s = SinOsc.ar(f,mul:0.2) * SinOsc.ar(1/32/(1..cnt)).range(0,1);

	//s = Mix.ar(s);

	Splay.ar(
		Resonz.ar(
			FreeVerb.ar(s,0.02,0.02)
			,f)
)}).play;
)

s.scope;


(
~fader={
	var sig,t,env,sel,mod;

	mod = Duty.kr([8,4],0,Dseq(1+(1/[1,2,1.5,1,2,1.25,4,0.5]),inf));

	t = Impulse.ar(1/2,(0..3)++[0.5,0.25]/4);

	env = EnvGen.ar(Env([0,1,0],[TExpRand.ar(0.002,0.025,t),TExpRand.ar(0.25,2,t)],[3,-3]),t);

	sig = [
		RLPF.ar(WhiteNoise.ar(TExpRand.ar(0.1,0.6,t)),LFSaw.ar(1/8).range(20,12000)),
		SinOsc.ar(TExpRand.ar(33,55,t)*(env**TExpRand.ar(2,8,t)*mod+1)),
		HPF.ar(PinkNoise.ar(TExpRand.ar(0.1,0.6,t)),LFSaw.ar(1/8).range(200,12000)),
		MoogFF.ar(SinOsc.ar(([1.25,2,1.5,4]/mod*4pi)*[4,8]*(1.00001**(1..8)+1)),SinOsc.ar(1/fib(8)).range(22,12000)),
		MoogFF.ar(LFSaw.ar(([1.25,2,1.5,4]/mod*1.5pi)*[4,8]*(1.001**(1..8)+1)),SinOsc.ar(1/fib(8)).range(12000,22)),
	];

	sel = EnvGen.ar(Env([0,1,2,3.1,4],[TExpRand.ar(0.002,0.025,t),TExpRand.ar(0.2,0.25,t),TExpRand.ar(0.4,1.5,t),TExpRand.ar(0.2,0.4,t)],[8,2,-30]),t);

	sig = SelectX.ar(sel,sig) * env;


	sig = CompanderD.ar(sig,0.75,1/1.5,1/4);

	sig = GVerb.ar(sig)/4+sig/2;

	sig = CompanderD.ar(sig,0.75,1/1.25,1/4);


	Splay.ar(sig,0.1);

};
~fader.play;
)

s.boot;
s.freeAll;

//////////////////// defs ////////////////////////////////////////////////

(
    Ndef(\mod).quant = 2.0;
    Ndef(\mod,{Splay.kr(Select.kr(Stepper.kr(Impulse.kr(1/4/(1..8))),1+[0.5,0.75,0.25,1/2,1/4,-0.25,-0.5,1,1].scramble * 0.25pi) )});


    SynthDef(\kick,{|amp = 0.2,freq = 8000|
                    var sig,env1,env2;
                    env1 = EnvGen.ar(Env.new([0,1,0],[{ExpRand(0.01,0.12)}!2,{ExpRand()}!2],[-3,3]),doneAction:2);
                    env2 = EnvGen.ar(Env.new([freq,432/8pi,432/2pi],[0.015,0.02],[-3,3]));
                    sig = Vibrato.ar(SinOsc.ar(env2+([0.01,0]) + LFSaw.ar(env2*1.5)) * env1,[4,5,6,7],0.02);

                    Out.ar(0,Splay.ar(sig,1,amp));


                   }).add;

    SynthDef(\hiss,{|amp = 0.2,freq = 800|
                    var sig,env1,env2;
                    env1 = EnvGen.ar(Env.new([0,1,0],[0.02,{ExpRand(0.2,0.4)}!2],[-3,3]),doneAction:2);
                    sig = Vibrato.ar(HPF.ar(WhiteNoise.ar(amp!2),freq) * env1,[4,5,6,7]+1,0.02);

                    Out.ar(0,Splay.ar(sig,1,amp));


                   }).add;


    SynthDef(\tone,{|freq = 432, amp = 0.2, dur = 1, modd = 1|
                    var env1,env2,env3,sig;
                    env1 = EnvGen.ar(Env.new([0,1,0],[0.02,dur/8],[-3,3]));
                    env2 = EnvGen.ar(Env.new([0,1,0],[dur/16,dur],[3,-3]));
                    env3 = EnvGen.ar(Env.new([0,1,0],[dur,dur*2],[-1,3]),doneAction:2);
                    sig = SinOsc.ar(freq*Ndef(\mod).kr+((1.0001*(1..8))/1.0) ) * env1;
                    sig = LFSaw.ar(freq*Ndef(\mod).kr*(2)+((1.01*(1..8))/4.0) ) * env2 + sig;
                    sig = LFTri.ar(freq*Ndef(\mod).kr/2+((1.01*(1..8))/1.0) ) * env3 + sig + BrownNoise.ar(0.01*modd);


                    Out.ar(0,Splay.ar(sig,0.5,amp));
                   }).add;

    SynthDef(\tone2,{|freq = 432, amp = 0.2, dur = 1, modd = 1|
                    var env1,env2,env3,sig;
                    env1 = EnvGen.ar(Env.new([0,1,0],[0.02,dur/8],[-3,3]));
                    env2 = EnvGen.ar(Env.new([0,1,0],[dur/16,dur],[3,-3]));
                    env3 = EnvGen.ar(Env.new([0,1,0],[dur,dur*2],[-1,3]),doneAction:2);
                    sig = LFSaw.ar(freq*Ndef(\mod).kr+((1.01*(1..8))/1.0) ) * env1;
                    sig = SinOsc.ar(freq*Ndef(\mod).kr*(2)+((1.0001*(1..8))/4.0) ) * env2 + sig;
                    sig = LFTri.ar(freq*Ndef(\mod).kr/2+((1.00001*(1..8))/1.0) ) * env3 + sig + BrownNoise.ar(0.01*modd);


                    Out.ar(0,Splay.ar(sig,0.5,amp));
                   }).add;


)


///////////// binds //////////////////////////////////////////////////////


(

    Pdef(\melod,{
        var a = 0;
        Ppar([
            Pbind(
                \instrument, \tone2,
                \dur, Pseq([1,1,1/2]*1/8,inf),
                \freq, Pseq(([60,72,67]-12).midicps,inf),
                \amp, Pwhite(0.001,0.055,inf)
            ),
            Pbind(
                \instrument, \tone,
                \dur, Pseq([1,1,1/2,1/4,2,4,8],inf),
                \freq, Pseq(([60,65,69]-24).midicps,inf),
                \amp, Pwhite(0.001,0.2,inf)
            ),
            Pbind(
                \instrument, \tone,
                \dur, 16,
                \freq, Pseq(([60,65,69]-12).midicps,inf),
                \modd, Pxrand([1,2,4,1/2,1/4],inf)
            ),
            Pbind(
                \instrument, \tone2,
                \dur, 8,
                \freq, Pxrand(([60,65,69]+24).midicps,inf),
                \modd, Pxrand([1,2,4,1/2,1/4],inf)
            ),
            Pbind(
                \instrument, \tone,
                \dur, 32,
                \freq, Pxrand(([60,65,69]-36).midicps,inf),
                \modd, Pxrand([1,2,4,1/2,1/4],inf)

            )])
    }).play(quant:2);


    Pdef(\beat,{
        Ppar([
            Pbind(
                \instrument, \kick,
                \freq, Pseq([1,1,2,4]*8000,inf),
                \dur, Pseq([1,1,1,1/2,1/2]/4,inf),
                \amp, Pwhite(0.1,0.4,inf)
            ),
            Pbind(
                \instrument, \hiss,
                \freq, Pwhite(4000,12000,inf),
                \dur, Pseq([1,1,1,1/2,1/2]/8,inf),
                \amp, Pwhite(0.1,0.7,inf)
            )])
        }).play(quant:2);
    )


//already done for Ikaria ^^ sweet!


~a.play;

(
  ~mod.quant=1;
  ~b.quant=1;
  ~c.quant=1;
)

(
  ~b={Duty.kr(1/4,0,Dseq([0,2,0,2,0,2,1,2],inf))};
  ~c={Duty.kr(1/8,0,Dseq([2,3,2,3,0],inf))};
  ~mod={Duty.kr(4,0,Dseq([1,2,1.5,1,1.75],inf))};
)

(
  ~a.fadeTime =0;
  ~a.quant= 2;
  ~a={
    var sig = [
      SinOsc.ar(43.2*(1.06**(1..12))),
      VarSaw.ar(4320*~mod*(1.02**(1..8)),mul:0.12),
      HPF.ar(WhiteNoise.ar(0.1!2),TRand.ar(8000,16000,Impulse.ar(1/4))),
      SinOsc.ar(43.2*(1.25**(1..8))) * LFTri.ar(1/4/fib(8)).exprange(0.0001,1.0),
    ];

    sig = Select.ar(~b,sig*0.5) + Select.ar(~c,sig*0.5);
    Splay.ar(sig,0.1);
  };

  ~a[50]=\filter->{|in|BBandPass.ar(in,LFTri.ar(1/16*([1,1.01]),{Rand(0,2pi)}!4).exprange(1600.01,22))*0.25+(in*0.75)};
  ~a[52]=\filter->{|in|CompanderD.ar(in,0.9,1,1/10)};
  ~a[54]=\filter->{|in|FreeVerb.ar(in,0.1,100)};
)

(
~b.play;
~s = {Duty.kr(1/8,0,Dseq([1,2,0,0,0,0,3,3,3,4,0,0,0,0],inf))};

~s.quant=2;
~b.quant =2;
)

(
~b={
	var sigs,sel,env,f,l;

	sigs = [
		SinOsc.ar(43.2),
		HPF.ar(WhiteNoise.ar(0.7!2),TExpRand.ar(1000,16000,Impulse.ar(1!4))),
		Blip.ar(1986,{TExpRand.ar(10,100,Impulse.ar(4!4))} ),
		RLPF.ar(WhiteNoise.ar(0.7!2),TExpRand.ar(1000,16000,Impulse.ar(1!4))),
		Pluck.ar(Pulse.ar(4000),Impulse.ar(4),0.5,0.5)
	];

	sel = Select.ar(~s,sigs);
	sel = CompanderD.ar(sel,0.9,1,1/10);
	sel = FreeVerb.ar(sel,0.12,2.5);

	Splay.ar(sel);

};
)


///uuuuu hello ^^  
(
Ndef(\tick).quant = 2.0;
Ndef(\tick,{
	var oct,mid,base,a,env,tone;
	oct = Duty.kr([16,8,4],0,Dseq([0,-12,-24,0,12,24,-36],inf));
	mid = Duty.kr([1,1/2,1/4],0,Dseq([65,64],inf));
	base = Duty.kr(4,0,Dseq([1,2,4,1,2,1.5,1,2,1.25],inf));
	base = base * ([60,mid,67]-oct).midicps;

	a = Impulse.ar(1/2,(1..16).scramble/16);
	env = Decay.ar(a,(1..16)/SinOsc.ar(0.1/(1..8)).range(4,16));
	tone = SinOsc.ar(base*(2**(1..8))/16pi,mul:0.2);
	tone = tone + (LFSaw.ar((base/16.1pi)*(2**(1..8)),mul:0.2) * LFSaw.ar(1/4/(1..16)).exprange(0.001,1));

	tone = Vibrato.ar(tone,[4,3,5,6,7,8],0.2);
	tone = CombN.ar(tone,1,(1..16),32);
	tone = tone * env.exprange(0.0001,1);
	tone = tone + (MoogFF.ar(SinOsc.ar(base.lag(1)/8pi,mul:0.04),SinOsc.ar(8/(1..8)).range(base/32pi,base/4pi)) * LFSaw.ar(1/8/fib(12)).range(0,1));
	tone = CompanderD.ar(tone,0.75,1,1/10,0.02,0.2);
	tone = FreeVerb2.ar(tone.distort,tone.distort,0.133,2);

	Splay.ar(tone,0.1,0.95,0.5);


}).play;
)

// mult 8 (1st 0)
(
    x = { {|i| SinOsc.ar(200*i)}!8 };
    x.plot(1e-2);
    {Splay.ar(x,1,0.2)}.play;
)

// harmonic 8 (pow)
(
    x = { {|i| SinOsc.ar(200*(2**(i)))}!8 };
    x.plot(1e-2);
    {Splay.ar(x,1,0.2)}.play;
)

// fibonacci 8
(
    x = { {|i| SinOsc.ar(200*fib(8).at(i))}!8 };
    x.plot(1e-2);
    {Splay.ar(x,1,0.2)}.play;
)

// fibonacci 8 (pow, floating)
(
    x = { {|i| SinOsc.ar(200*(1.1**fib(8).at(i)))}!8 };
    x.plot(1e-2);
    {Splay.ar(x,1,0.2)}.play;
)


//...
// Weierstrass function (kills cpu, recursion)
(
    x = { {|i| SinOsc.ar(200 * 2**i*cos(3**i*pi*x) )}!2 };
    x.plot(1e-2);
    {Splay.ar(x,1,0.2)}.play;
)



p = ProxySpace.push(s);

~mod.quant = 2;
~mod = {Duty.kr(2,0,Dseq([1,1.5,2,1.25,0.5,0.75,4,8,0.5],inf)).lag(1/4)};

~a.play;
~a.quant = 2;
(
~a = {
	var sig;
	sig= BBandPass.ar(SinOsc.ar(43.2*~mod*(2.01**(1..8))),SinOsc.ar(1/128*(1..32)).range(33,16000),0.1,4);
	sig = sig + (HPF.ar(WhiteNoise.ar(0.3!2),10000)*Pulse.ar(1/16,1/16*(1..8)));
	sig = CombN.ar(sig,0.25,0.25,8);
	sig = sig * Decay.ar(Impulse.ar(4/[1,2,4,8],[1,2,4,8]/8));
	sig = sig + ((SinOsc.ar(44 * (Pulse.ar(1,[0,1/8,1/8*2,1/8*4])+1.0),mul:[0.1,0.3,0.15])) * Decay.ar(Pulse.ar(1/2,[0,1/8,1/8*2,1/8*4]),0.15)) ;
	sig = CompanderD.ar(sig,0.5,1,1/10,0.01,0.05);
	sig = FreeVerb.ar(sig,0.133,10);
	sig = RLPF.ar(sig,440+LFTri.ar(0.1).range(0,18000)) * 2;

	Splay.ar(sig);

};

~a.mold(2);
)

(
    ~a={
        var sig,f; 
        

        f = Duty.kr(Dseq((1/[4,2,1/2,1/4,1,4,1]).normalize*16,inf),0,Dseq([1,2,1,4,1,2,1]/2,inf)).lag(1);
        f = Duty.kr(Dseq((1/[4,2,1/2,1/4,1,4,1]).normalize*4,inf),0,Dseq([1,2,1.5,3,1.25,2,1.125]*(f*pi),inf)).lag(1/8);

        sig = SinOsc.ar(440/f,mul:0.1);

        sig = sig + LFSaw.ar(440/f*(1.00001**(1..12)),mul:0.2);
        sig = sig * Decay.ar(Impulse.ar(4/fib(12)),2*fib(12));

        f = LFDNoise1.ar(4/fib(12)).range(140,14000);
        sig = MoogFF.ar(sig,LFSaw.ar(4/fib(12)).exprange(f,44));
        sig = Resonz.ar(sig,f) * 2;

        sig = CompanderD.ar(sig,0.5,1/3,1/2);


        sig = GVerb.ar(sig)/7+sig;

        sig = LPF.ar(sig,1400);

        Splay.ar(sig,0.1);
    };
    ~a.quant=2;
    ~a.play;
)


(
~togl.play;
~togl.quant=2;
~togl={
	var sig,t;
	t = Impulse.ar(8/[1,2,4,8,1,2,3,4,5,6]);

	sig= LFSaw.ar(43.22);

	sig = sig + (ToggleFF.ar(t)[0] * CombN.ar(sig,0.25,0.25,10)) /2.0;
	sig = sig + (ToggleFF.ar(t)[1] * FreeVerb.ar(sig,0.29,10))/2.0;
	sig = sig + (ToggleFF.ar(t)[2] * FreeVerb.ar(sig,0.29,100))/2.0;
	sig = sig + (ToggleFF.ar(t)[3] * FreeVerb.ar(sig,0.29,1))/2.0;
	sig = sig + (ToggleFF.ar(t)[4] * FreeVerb.ar(sig,0.29,0.5))/2.0;
	sig = sig + (ToggleFF.ar(t)[5] * FreeVerb.ar(sig,0.29,0.1))/2.0;


	Splay.ar(sig,0.1,1);


};
)

(
~c={
	var t = 1/2/[5,3,6,7];
	var imp = Impulse.ar(t);
	var base = (Select.kr(TRand.kr(0.0001,9,imp),[48,60,65,63,67])+Select.kr(TRand.kr(0.0001,7,imp),[-12,0,12,24,-7,-14,-21])).midicps/2*[1,2,8,4];
	var sig = Formant.ar(base*[1,2,1.5,1.25]+SinOsc.ar([1,2,3,4]*11).range(-4,4),base/4pi,base/8pi) * LFTri.kr(t,pi).exprange(0.00001,0.33);

	sig = Vibrato.ar(sig,[4,5,6,7]*4,0.2);
	sig = sig + (BPF.ar(GrayNoise.ar(0.01!2)*LFPulse.ar(2/[4,8,16],1.5pi,0.01/[1,2,4]).lag(1/500),[8000,10000,15000]));

	sig = HPF.ar(sig,120);
	sig = GVerb.ar(sig,100,10);
	sig = CompanderD.ar(sig,1/4,1/2,1/2);
	sig = sig + LPF.ar((SinOsc.ar(50!2,pi,mul:0.5) * LFPulse.ar(1/[8,16,32],pi,0.05/[1,2,4])).lag(1/500),100);


	Splay.ar(sig.flat,0.5,0.5);

};
~c.quant=2;
~c.play;
)
s.boot;




(
Ndef(\a).quant = 2.0;
Ndef(\a).fadeTime = 8.0;
Ndef(\a,{
	var s,freq;
	s = Select.kr(Stepper.kr(Impulse.kr(2/[8,16,32,64])),[1,2,1.5,1.25,1,2,4,0.5,0.25]);
	freq = {LFSaw.ar(s/fib(8)).range(2,12000).round(432/8)};
	Splay.ar(
		CompanderD.ar(
			FreeVerb.ar(
				LPF.ar(
					CombN.ar(
						BBandPass.ar(
							LFSaw.ar(4320 * (s * pi) * (1.0001**(1..16)),mul:0.75/(1..32)) +
							SinOsc.ar(432 * (1.001**(1..16))/s.lag(0.5),mul:0.4/(1..32)) +
							SinOsc.ar(freq * (s.lag(0.1)/22) * (1.000125**(1..32)),mul:1/(1..32))
							,LFSaw.ar(1/4/(2.01**(1..8))).range(1100*(1.00075**(1..32)),22))
						,0.25,2,4) * 2
					,880) * LFSaw.ar(1/4/fib(21)).squared
				,0.8,0.02*(2.01**(1..32)))
			,0.25,1,0.025).softclip * 3
		,0.5,1,0.25)}).play;

)
s.scope;


//naisssseses
s.reboot;
StageLimiter.activate;

(
    Ndef(\crackles).quant = 2.0;
    Ndef(\crackles).fadeTime = 2.0;

    Ndef(\crackles,{

        var mod1a = Select.kr(Stepper.kr(Impulse.kr(1/[4,2 ])),[1,1,1.5,1.25,2,4,0.5,0.75,1,1,1]);
        var mod1b = Select.kr(Stepper.kr(Impulse.kr(4)),[1,1,1.5,1.25,2,4,0.5,0.75,1,1,1]);
        var mod2 = Select.kr(Stepper.kr(Impulse.kr(1/16)),11/2*[1,1,1.5,1.5,2,4,0.5,0.5,1,1,1]);

        Splay.ar(
            FreeVerb.ar(
                LPF.ar(
                    0
                    + Pulse.ar([4,2]/fib(21),mul:1/fib(21)) * Pulse.ar((1.0001**(1..8))*mod2*[mod1a,mod1b]*(2.0005**(1..8)))
                    + (Pulse.ar([4,2]/2/fib(21),mul:1/fib(21)) * WhiteNoise.ar(0.15!2))
                    + (LFPulse.ar(8/fib(12),mul:1/fib(21)) * SinOsc.ar((mod2*2)*Pulse.ar(1/fib(12)).range(8*[mod1b,mod1b],WhiteNoise.ar(1!4)),mul:0.4))
                    ,[22,23]+(16000*LFSaw.ar(1/4/fib(21)).range(0,1)))
                ,0.1)
            ,0.5,1,0.5)
    }).play;
)

Ndef(\crackles).stop(8)

(
    Ndef(\crackles2).quant = 2.0;
    Ndef(\crackles2).fadeTime = 2.0;

    Ndef(\crackles2,{

        var mod1a = Select.kr(Stepper.kr(Impulse.kr(1/4)),[1,1,1.5,1.25,2,4,0.5,0.75,1,1,1]);
        var mod1b = Select.kr(Stepper.kr(Impulse.kr(1/8)),[1,1,1.5,1.25,2,4,0.5,0.75,1,1,1]);
        var mod2 = Select.kr(Stepper.kr(Impulse.kr(1/32)),11*[1,1,1.5,1.5,2,4,0.5,0.5,1,1,1]);

        Splay.ar(
            LPF.ar(
                0
                + Pulse.ar([4,2]/fib(21),mul:1/fib(21)).lag(0.01) * Pulse.ar((1.0001**(1..8))*mod2*[mod1a,mod1b]*(2.0005**(1..8)))
                ,[22,23]+(16000*LFSaw.ar(1/4/fib(21)).range(0,1)))

            ,0.5,1,0.5)
    }).play;
)

Ndef(\crackles2).stop


s.scope;


(
~a={
	var mod = [1,2,1,1.5,0.5,1.5,4,0.5]/[2,4];
	var tone;
	var sig = SinOsc.ar(SinOsc.ar(11*[1,1.1]).range(44,88),mul:SinOsc.ar(1/16).range(0.0001,0.15));

	sig = sig + BPF.ar(GrayNoise.ar(LFSaw.ar(1/10*[1,1.1]).exprange(0.0001,0.005)),SinOsc.ar(11*[1.1,1.2]).range(100,10000));

	sig = sig * LFTri.ar(1/11/[1,1.1])**2;

	mod = Select.kr(TExpRand.kr(0.001,9,Impulse.kr(1/fib(12))),mod);
	sig = CompanderD.ar(sig,1/2,1/2,4);
	tone = LFSaw.ar(432*mod*([8,4,2,1]*pi)/(TExpRand.ar(1,8,Impulse.ar(1/fib(12))).round([1,2])),mul:LFTri.kr(1/fib(12),pi).range(0.0001,0.4) );
	tone = MoogFF.ar(tone,43.2*[4,8]*pi*mod);
	tone = tone * Decay.ar(Impulse.ar(1/[1,2],(0..3)/4),4);

	sig = sig + tone;

	sig = GVerb.ar(sig,100,10,0.5,0.2,30)/6+sig/3;

	sig = HPF.ar(sig,16);
	sig = LPF.ar(sig,4000);
	sig = CompanderD.ar(sig,0.75,1/1.5,4);

	sig = Limiter.ar(sig).softclip(-0.9,0.9);

	Splay.ar(sig.flat,0.1,0.5);
};
~a.quant=2;
~a.play;
)

//very nais
s.boot;

(
Ndef(\a).quant =2.0;
Ndef(\a).fadeTime = 4;
Ndef(\a,{
	Splay.ar(

		FreeVerb.ar(
			LPF.ar(
				AudioIn.ar([0,1]) * LFSaw.ar(1/4/(2**(1..8))).range(0,1) * 4
				,SinOsc.ar(1/4/(2**(1..8))).range(44,20000))
			,0.33,100)
	)
}).play;
)
Ndef(\a).stop(8);


(
Ndef(\b).quant =2.0;
Ndef(\b,{
	var m;
	m = Duty.kr(1,0,Dseq([1.5,1,0.5],inf)).lag(1/4);
	LFSaw.ar(432!2+(1.00001**(1..32)) * (m)),mul:0.5)
}).play;

Ndef(\b).mold(2);
)
p=ProxySpace.push(s);

(
~filt.fadeTime=4;
~filt={
	var sig = AudioIn.ar([0,1]);
	sig = PitchShift.ar(sig,0.2,SinOsc.ar(50/fib(12)).range(0.85,1.125));
	sig = GVerb.ar(sig,100);
	sig = CompanderD.ar(sig,0.5,1/2,1/2)/2+(sig/2);
	Splay.ar(sig.flat);
};
~filt.mold(2);
~filt.play;
)


~filt.stop(20)

//hm, no sound here. everything goes under -1.
//it need an audio in source

p = ProxySpace.push(s);
Ndef.defaultReshaping = \elastic;


(
~a.fadeTime = 5;
~a.play;
~a.quant = 2;


~modulate.quant=2;
~modulate = {Duty.kr(4*(1..8),0,Dseq([0,-48,-24,-12,-36],inf))};

~a[0]={
	var sig;

	sig = SinOsc.ar(([60,67,64,69,65,60-12+7,60-24+4]+~modulate).midiratio * (pi) * (1..12) * (1.0001**(1..12)),SinOsc.ar(8/[11,22,44]).range(-pi,pi),mul:1/(1..12));
	sig = sig * LFSaw.ar(1/(1..8)).range(0,1);
	sig = sig + (SinOsc.ar([44,45] * Decay2.ar(Impulse.ar(4/[1,2]),0.002,0.18,5,1),0.1) * Decay2.ar(Impulse.ar(4/[1,2]),0.2,1));
	sig = sig + (HPF.ar(WhiteNoise.ar(0.005!4),TExpRand.ar(440,16000,Impulse.ar(1/2!4))) * Pulse.ar([1/4,1/8,1],[1,2,6,8].normalize));
	sig = CompanderD.ar(sig,0.5,1,1/10);

	Splay.ar(sig,0.2,1);
};



~a[10]=\filter->{|in| BBandPass.ar(in,SinOsc.ar(1/12/(1..8)).range(44,8000)) * 1.5};
~a[12]=\filter->{|in| Resonz.ar(in,SinOsc.ar(1/4/(1..8)).range(44,8000)) * 1.5};
~a[14]=\filter->{|in| Vibrato.ar(in,[4,5,6,7],0.2)};
~a[16]=\filter->{|in| FreeVerb.ar(in,SinOsc.ar(1/5/(1..8)).range(0.01,0.8),1)};

)


//zer nais ^^


(
~w.fadeTime=4;
~w.quant=4;
~w.play;
~melod = {Duty.kr(4,0,Dseq(powerset([1,1.5,2,1.25,4,1.125,0.5]).scramble.flat,inf))};
~melod.quant=2;
)

(
~w={
	var t,env,sig,tempo;

	tempo = 1/8;

	t = Impulse.ar(tempo*8,1/4*(0..3));
	env = Decay.ar(t,1.75);
	sig = LFSaw.ar(43.2 * pi * [1,2,8,4]*(1.00001**(1..8)/~melod),mul:0.95)*env;

	t = Impulse.ar(tempo*8,1/4*(0..3));
	env = Decay.ar(t,1.5);
	sig = LFSaw.ar(43.2 * pi * [1,2,8,4]*(1.0001**(1..8)/~melod),mul:0.95)*env*sig;


	t = Impulse.ar(tempo,1/4*([0,1,2,3,3.25,3.5]+0.5));
	env = Decay.ar(t,0.3);
	sig = LFSaw.ar(16pi*43.2/~melod,mul:0.5) * env + sig;

	sig = MoogFF.ar(sig,env.sqrt+1*LFTri.ar(1/4/fib(6)).range(300,4000) );


	t = Impulse.ar(tempo*2,1/8*(1..7));
	env = Decay.ar(t,1.5);
	sig = SinOsc.ar(43.2+(1+env.sqrt),mul:0.95) * env + sig;



	t = Impulse.ar(tempo*2,1/8*((0..7)+0.5));
	env = Decay.ar(t,0.45);
	sig = HPF.ar(BrownNoise.ar(0.9!2)*env,1+env.sqrt*3000) + sig;

	t = Impulse.ar(tempo,1/8*((0..7)+0.5));
	env = Decay.ar(t,0.1);
	sig = HPF.ar(WhiteNoise.ar(0.4!2)*env,env.sqrt*10000) + sig;


	sig = CompanderD.ar(sig,0.85,1/1.5,1/6)+sig;
	sig = FreeVerb.ar(sig,0.15,7.5)*1.125+sig;

	Splay.ar(sig,0.1);
}
)
~w.stop(10)
s.scope;

~voice.

~voice.play;

~voice[0]={Mix.ar(AudioIn.ar([0,1]))!2};

~voice[47]=\filter->{|in| PitchShift.ar(in,0.1,0.75)*4};//CombN.ar(in,LFTri.ar(4/(1..8)).range(0.1,1),4,8)};
~voice[50]=\filter->{|in| BBandPass.ar(in,LFTri.ar(4).range(50,8800)) * 2};
~voice[53]=\filter->{|in| 2*Resonz.ar(in,LFTri.ar(1/4/(1..8)).range(50,550))};
~voice[57]=\filter->{|in| FreeVerb.ar(in,LFTri.ar(1/4/(1..8)).range(0.1,0.8),2)};


(
~voice[47]=nil;//\filter->{|in| CombN.ar(in,LFTri.ar(4/(1..8)).range(0.1,1),4,8)};
~voice[50]=nil;//\filter->{|in| BBandPass.ar(in,LFTri.ar(4).range(50,8800)) * 2};
~voice[53]=nil;//\filter->{|in| 2*Resonz.ar(in,LFTri.ar(1/4/(1..8)).range(50,550))};
~voice[57]=nil;//\filter->{|in| FreeVerb.ar(in,LFTri.ar(1/4/(1..8)).range(0.1,0.8),2)};
)

s.boot;
s.scope
(
  Ndef(\a,{
    var sig,sig2;
	sig = Pulse.ar([1,2,4,8]) ;
    sig = CombN.ar(sig,1/80,1/70+(1/80*LFSaw.ar(16/[1,2,4,8]).lag(0.1)),32);
    sig = Limiter.ar(sig,1,0.5);
    sig = sig * LFPulse.ar(8/fib(12));
    sig2 = HPF.ar(sig,SinOsc.ar(1/4/fib(12)).range(44,10000));

    sig = Resonz.ar(sig,43.2*[1,2,4,8,16,32,32*1.5,64,64*1.5],1,6);
    sig = sig * Decay.ar(Impulse.ar([4,3]/fib(12)),[1,2,4,6,8,10,20].normalize.reverse*2);
    sig = FreeVerb.ar(sig+(sig2),0.3,1);

    Splay.ar(
      sig
      ,0.1,1,0.5)
  }).play;
)

s.scope




(
~noise={
	var mel;
	var freq = LFSaw.ar(1/9/fib(12)).range(50,1500);
	var abc = PinkNoise.ar(1!12) + SinOsc.ar(44*[1,1,1.5,1.24],mul:SinOsc.kr(1/24/[1,3,6,9]).exprange(0.1,0.4))/2;
	abc = abc * LFTri.kr(1/8/fib(12)).exprange(0.0001,1);
	abc = CombN.ar(abc,0.1,1,8);
	abc = DFM1.ar(abc,freq,LFTri.ar(1/12/fib(12)).range(0.0001,1),1,[0,1])/[1,2];
	mel = BPF.ar(PitchShift.ar(abc,0.2,LFDNoise0.ar(4/fib(8)).range(1.5001,2)),LFDNoise0.ar(2/fib(8)).range(200,900),2);
	abc = Mix(abc)/8 + (Mix(mel)/20);

	abc = Pan2.ar(abc,SinOsc.ar(1/7,fib(12)));
	abc = LPF.ar(GVerb.ar(abc,100,12,0.2,0.2,32),SinOsc.ar(1/24/fib(8)).range(90,550))+(abc/1.2);
	abc = HPF.ar(abc,20);

	Splay.ar(abc.flat,0.25);
};
~noise.play;
)

//beautiful! 90% use of server on mine